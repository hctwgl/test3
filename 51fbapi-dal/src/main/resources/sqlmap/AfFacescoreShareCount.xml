<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- af_facescore_share_count表 -->
<mapper namespace="com.ald.fanbei.api.dal.dao.AfFacescoreShareCountDao">

	<!--基本的sql查询字段 公共引用... -->
	<sql id="queryFields">
		user_id,count
	</sql>

	<!-- 基本的sql查询条件公共引用 -->
	<sql id="commonCondition">
		WHERE is_delete = 0
		<if test="userId != null and userId != ''">
			AND user_id = #{userId,jdbcType=INTEGER}
		</if>
		<if test="count != null and count != ''">
			AND count = #{count,jdbcType=INTEGER}
		</if>
	</sql>


	<insert id="saveRecord"
		parameterType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo"
		keyProperty="rid">
		<selectKey resultType="java.lang.Long" keyProperty="rid"
			order="AFTER">
			SELECT LAST_INSERT_ID()
		</selectKey>

		INSERT INTO af_facescore_share_count
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="userId != null">
				user_id,
			</if>
			<if test="count != null">
				count,
			</if>
		</trim>

		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="userId != null">
				#{userId,jdbcType=INTEGER},
			</if>
			<if test="count != null">
				#{count,jdbcType=INTEGER},
			</if>
		</trim>
	</insert>

	<update id="updateById"
		parameterType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo">
		UPDATE af_facescore_share_count
		<set>
			<if test="userId != null and userId != '' ">
				user_id = #{userId,jdbcType=INTEGER},
			</if>
			<if test="count != null and count != '' ">
				count = #{count,jdbcType=INTEGER},
			</if>
			gmt_modified = now()
		</set>
		WHERE is_delete = 0 AND user_id = #{userId ,jdbcType=BIGINT}
	</update>

	<select id="getById"
		resultType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo">
		SELECT
		<include refid="queryFields" />
		FROM af_facescore_share_count
		WHERE is_delete = 0 AND id=#{rid ,jdbcType=BIGINT}
		LIMIT 0,1
	</select>

	<select id="getByCommonCondition"
		resultType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo"
		parameterType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo">
		SELECT
		<include refid="queryFields" />
		FROM af_facescore_share_count
		<include refid="commonCondition" />
		limit 0,1
	</select>

	<select id="getListByCommonCondition"
		resultType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo"
		parameterType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo">
		SELECT
		<include refid="queryFields" />
		FROM af_facescore_share_count
		<include refid="commonCondition" />
	</select>
	<select id="getByUserId"
		resultType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo">
		select
		<include refid="queryFields" />
		FROM af_facescore_share_count
		WHERE is_delete = 0 AND user_id=#{userId ,jdbcType=BIGINT}
	</select>
	<!-- 新增记录 -->
	<insert id="addRecord" parameterType="com.ald.fanbei.api.dal.domain.AfFacescoreShareCountDo">
	insert into af_facescore_share_count (user_id,count,gmt_modified) values (#{userId,jdbcType=BIGINT},#{count,jdbcType=INTEGER},now())
	</insert>
</mapper>
