<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ald.fanbei.api.dal.dao.AfCategoryDao">
	<sql id="queryFields">
		id rid,gmt_create,gmt_modified,creator,modifier,name,level,parent_id,is_show,sort,tag
	</sql>
	
	<select id="getCategoryList" resultType="AfCategoryDo">
		SELECT
			<include refid="queryFields"/>
		FROM
			af_category
		WHERE
			is_delete=0 AND level=1 AND is_show='Y'
		order by gmt_create desc
	</select>
	
	<select id="getHomePageCategoryInfo"  resultType="AfCategoryDo">
		SELECT 
		<include refid="queryFields"/>
 		FROM 
 		af_category 
 		WHERE parent_id  IN(
		SELECT c1.id FROM af_category c1 LEFT JOIN af_category c2 ON c1.parent_id = c2.id WHERE c2.tag='HOMEPAGE' AND c2.is_show = 'Y' AND c1.is_delete = 0
		)
		AND
		is_show = 'Y'
		AND
		is_delete = 0
	</select>

</mapper>