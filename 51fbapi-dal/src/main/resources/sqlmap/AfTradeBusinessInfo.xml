<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- af_trade_business_info表:商户信息表模块 -->
<mapper namespace="com.ald.fanbei.api.dal.dao.AfTradeBusinessInfoDao">
    
    <!--基本的sql查询字段 公共引用...-->
    <sql id="queryFields">
        id rid,business_id,name,type,image_url,address,workdays,open_time,end_time,phone,corporation_name,corporation_mobile,corporation_email,licence_url,front_url,inverse_url,protocol_url,author_url,withdraw_cycle,card_no,card_id,card_code,card_phone,card_idnumber,card_name,card_bank,link_name,link_mobile,link_qq,link_wx,link_email,status,audit_state,audit_time,audit_faild_reason,apply_time,can_withdraw,cannot_withdraw,creator,gmt_create,modifier,gmt_modified,rebate_percent,rebate_max 
    </sql>
    
    <!-- 基本的sql查询条件公共引用 -->
    <sql id="commonCondition">
    	WHERE is_delete = 0
        <if test="rid !=null">
            AND id  = #{rid,jdbcType=INTEGER}
        </if>
        <if test="businessId != null and businessId != ''">
            AND business_id = #{businessId,jdbcType=INTEGER}
        </if>
        <if test="name != null and name != ''">
            AND name = #{name,jdbcType=VARCHAR}
        </if>
        <if test="type != null and type != ''">
            AND type = #{type,jdbcType=INTEGER}
        </if>
        <if test="imageUrl != null and imageUrl != ''">
            AND image_url = #{imageUrl,jdbcType=VARCHAR}
        </if>
        <if test="address != null and address != ''">
            AND address = #{address,jdbcType=VARCHAR}
        </if>
        <if test="workdays != null and workdays != ''">
            AND workdays = #{workdays,jdbcType=VARCHAR}
        </if>
        <if test="openTime != null and openTime != ''">
            AND open_time = #{openTime,jdbcType=VARCHAR}
        </if>
        <if test="endTime != null and endTime != ''">
            AND end_time = #{endTime,jdbcType=VARCHAR}
        </if>
        <if test="phone != null and phone != ''">
            AND phone = #{phone,jdbcType=VARCHAR}
        </if>
        <if test="corporationName != null and corporationName != ''">
            AND corporation_name = #{corporationName,jdbcType=VARCHAR}
        </if>
        <if test="corporationMobile != null and corporationMobile != ''">
            AND corporation_mobile = #{corporationMobile,jdbcType=VARCHAR}
        </if>
        <if test="corporationEmail != null and corporationEmail != ''">
            AND corporation_email = #{corporationEmail,jdbcType=VARCHAR}
        </if>
        <if test="licenceUrl != null and licenceUrl != ''">
            AND licence_url = #{licenceUrl,jdbcType=VARCHAR}
        </if>
        <if test="frontUrl != null and frontUrl != ''">
            AND front_url = #{frontUrl,jdbcType=VARCHAR}
        </if>
        <if test="inverseUrl != null and inverseUrl != ''">
            AND inverse_url = #{inverseUrl,jdbcType=VARCHAR}
        </if>
        <if test="protocolUrl != null and protocolUrl != ''">
            AND protocol_url = #{protocolUrl,jdbcType=VARCHAR}
        </if>
        <if test="authorUrl != null and authorUrl != ''">
            AND author_url = #{authorUrl,jdbcType=VARCHAR}
        </if>
        <if test="withdrawCycle != null and withdrawCycle != ''">
            AND withdraw_cycle = #{withdrawCycle,jdbcType=INTEGER}
        </if>
        <if test="cardNo != null and cardNo != ''">
            AND card_no = #{cardNo,jdbcType=VARCHAR}
        </if>
        <if test="cardId != null and cardId != ''">
            AND card_id = #{cardId,jdbcType=INTEGER}
        </if>
        <if test="cardCode != null and cardCode != ''">
            AND card_code = #{cardCode,jdbcType=VARCHAR}
        </if>
        <if test="cardPhone != null and cardPhone != ''">
            AND card_phone = #{cardPhone,jdbcType=VARCHAR}
        </if>
        <if test="cardIdnumber != null and cardIdnumber != ''">
            AND card_idnumber = #{cardIdnumber,jdbcType=VARCHAR}
        </if>
        <if test="cardName != null and cardName != ''">
            AND card_name = #{cardName,jdbcType=VARCHAR}
        </if>
        <if test="cardBank != null and cardBank != ''">
            AND card_bank = #{cardBank,jdbcType=VARCHAR}
        </if>
        <if test="linkName != null and linkName != ''">
            AND link_name = #{linkName,jdbcType=VARCHAR}
        </if>
        <if test="linkMobile != null and linkMobile != ''">
            AND link_mobile = #{linkMobile,jdbcType=VARCHAR}
        </if>
        <if test="linkQq != null and linkQq != ''">
            AND link_qq = #{linkQq,jdbcType=VARCHAR}
        </if>
        <if test="linkWx != null and linkWx != ''">
            AND link_wx = #{linkWx,jdbcType=VARCHAR}
        </if>
        <if test="linkEmail != null and linkEmail != ''">
            AND link_email = #{linkEmail,jdbcType=VARCHAR}
        </if>
        <if test="status != null and status != ''">
            AND status = #{status,jdbcType=INTEGER}
        </if>
        <if test="auditState != null and auditState != ''">
            AND audit_state = #{auditState,jdbcType=INTEGER}
        </if>
        <if test="auditTime !=null">
            AND audit_time = #{auditTime,jdbcType=TIMESTAMP}
        </if>
        <if test="auditFaildReason != null and auditFaildReason != ''">
            AND audit_faild_reason = #{auditFaildReason,jdbcType=VARCHAR}
        </if>
        <if test="applyTime !=null">
            AND apply_time = #{applyTime,jdbcType=TIMESTAMP}
        </if>
        <if test="canWithdraw != null and canWithdraw != ''">
            AND can_withdraw = #{canWithdraw,jdbcType=DECIMAL}
        </if>
        <if test="cannotWithdraw != null and cannotWithdraw != ''">
            AND cannot_withdraw = #{cannotWithdraw,jdbcType=DECIMAL}
        </if>
        <if test="creator != null and creator != ''">
            AND creator = #{creator,jdbcType=VARCHAR}
        </if>
        <if test="gmtCreate !=null">
            AND gmt_create = #{gmtCreate,jdbcType=TIMESTAMP}
        </if>
        <if test="modifier != null and modifier != ''">
            AND modifier = #{modifier,jdbcType=VARCHAR}
        </if>
        <if test="gmtModified !=null">
            AND gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}
        </if>
        <if test="rebatePercent != null and rebatePercent != ''">
            AND rebate_percent = #{rebatePercent,jdbcType=DECIMAL}
        </if>
        <if test="rebateMax != null and rebateMax != ''">
            AND rebate_max = #{rebateMax,jdbcType=DECIMAL}
        </if>
    </sql>

    
    <insert id="saveRecord" parameterType="com.ald.fanbei.api.dal.domain.AfTradeBusinessInfoDo" keyProperty="rid">
    	<selectKey resultType="java.lang.Long" keyProperty="rid" order="AFTER" >
	      SELECT LAST_INSERT_ID()
	    </selectKey>
    
        INSERT INTO af_trade_business_info
        <trim prefix="(" suffix=")" suffixOverrides="," >
	        <if test="businessId != null">        
	            business_id,
	        </if>
	        <if test="name != null">        
	            name,
	        </if>
	        <if test="type != null">        
	            type,
	        </if>
	        <if test="imageUrl != null">        
	            image_url,
	        </if>
	        <if test="address != null">        
	            address,
	        </if>
	        <if test="workdays != null">        
	            workdays,
	        </if>
	        <if test="openTime != null">        
	            open_time,
	        </if>
	        <if test="endTime != null">        
	            end_time,
	        </if>
	        <if test="phone != null">        
	            phone,
	        </if>
	        <if test="corporationName != null">        
	            corporation_name,
	        </if>
	        <if test="corporationMobile != null">        
	            corporation_mobile,
	        </if>
	        <if test="corporationEmail != null">        
	            corporation_email,
	        </if>
	        <if test="licenceUrl != null">        
	            licence_url,
	        </if>
	        <if test="frontUrl != null">        
	            front_url,
	        </if>
	        <if test="inverseUrl != null">        
	            inverse_url,
	        </if>
	        <if test="protocolUrl != null">        
	            protocol_url,
	        </if>
	        <if test="authorUrl != null">        
	            author_url,
	        </if>
	        <if test="withdrawCycle != null">        
	            withdraw_cycle,
	        </if>
	        <if test="cardNo != null">        
	            card_no,
	        </if>
	        <if test="cardId != null">        
	            card_id,
	        </if>
	        <if test="cardCode != null">        
	            card_code,
	        </if>
	        <if test="cardPhone != null">        
	            card_phone,
	        </if>
	        <if test="cardIdnumber != null">        
	            card_idnumber,
	        </if>
	        <if test="cardName != null">        
	            card_name,
	        </if>
	        <if test="cardBank != null">        
	            card_bank,
	        </if>
	        <if test="linkName != null">        
	            link_name,
	        </if>
	        <if test="linkMobile != null">        
	            link_mobile,
	        </if>
	        <if test="linkQq != null">        
	            link_qq,
	        </if>
	        <if test="linkWx != null">        
	            link_wx,
	        </if>
	        <if test="linkEmail != null">        
	            link_email,
	        </if>
	        <if test="status != null">        
	            status,
	        </if>
	        <if test="auditState != null">        
	            audit_state,
	        </if>
	        <if test="auditTime != null">        
	            audit_time,
	        </if>
	        <if test="auditFaildReason != null">        
	            audit_faild_reason,
	        </if>
	        <if test="applyTime != null">        
	            apply_time,
	        </if>
	        <if test="canWithdraw != null">        
	            can_withdraw,
	        </if>
	        <if test="cannotWithdraw != null">        
	            cannot_withdraw,
	        </if>
	        <if test="creator != null">        
	            creator,
	        </if>
	        <if test="gmtCreate != null">        
	            gmt_create,
	        </if>
	        <if test="modifier != null">        
	            modifier,
	        </if>
	        <if test="gmtModified != null">        
	            gmt_modified,
	        </if>
	        <if test="rebatePercent != null">        
	            rebate_percent,
	        </if>
	        <if test="rebateMax != null">        
	            rebate_max,
	        </if>
        </trim>
        
        <trim prefix="values (" suffix=")" suffixOverrides="," >
		    <if test="businessId != null" >
		       #{businessId,jdbcType=INTEGER},
		    </if>
		    <if test="name != null" >
		       #{name,jdbcType=VARCHAR},
		    </if>
		    <if test="type != null" >
		       #{type,jdbcType=INTEGER},
		    </if>
		    <if test="imageUrl != null" >
		       #{imageUrl,jdbcType=VARCHAR},
		    </if>
		    <if test="address != null" >
		       #{address,jdbcType=VARCHAR},
		    </if>
		    <if test="workdays != null" >
		       #{workdays,jdbcType=VARCHAR},
		    </if>
		    <if test="openTime != null" >
		       #{openTime,jdbcType=VARCHAR},
		    </if>
		    <if test="endTime != null" >
		       #{endTime,jdbcType=VARCHAR},
		    </if>
		    <if test="phone != null" >
		       #{phone,jdbcType=VARCHAR},
		    </if>
		    <if test="corporationName != null" >
		       #{corporationName,jdbcType=VARCHAR},
		    </if>
		    <if test="corporationMobile != null" >
		       #{corporationMobile,jdbcType=VARCHAR},
		    </if>
		    <if test="corporationEmail != null" >
		       #{corporationEmail,jdbcType=VARCHAR},
		    </if>
		    <if test="licenceUrl != null" >
		       #{licenceUrl,jdbcType=VARCHAR},
		    </if>
		    <if test="frontUrl != null" >
		       #{frontUrl,jdbcType=VARCHAR},
		    </if>
		    <if test="inverseUrl != null" >
		       #{inverseUrl,jdbcType=VARCHAR},
		    </if>
		    <if test="protocolUrl != null" >
		       #{protocolUrl,jdbcType=VARCHAR},
		    </if>
		    <if test="authorUrl != null" >
		       #{authorUrl,jdbcType=VARCHAR},
		    </if>
		    <if test="withdrawCycle != null" >
		       #{withdrawCycle,jdbcType=INTEGER},
		    </if>
		    <if test="cardNo != null" >
		       #{cardNo,jdbcType=VARCHAR},
		    </if>
		    <if test="cardId != null" >
		       #{cardId,jdbcType=INTEGER},
		    </if>
		    <if test="cardCode != null" >
		       #{cardCode,jdbcType=VARCHAR},
		    </if>
		    <if test="cardPhone != null" >
		       #{cardPhone,jdbcType=VARCHAR},
		    </if>
		    <if test="cardIdnumber != null" >
		       #{cardIdnumber,jdbcType=VARCHAR},
		    </if>
		    <if test="cardName != null" >
		       #{cardName,jdbcType=VARCHAR},
		    </if>
		    <if test="cardBank != null" >
		       #{cardBank,jdbcType=VARCHAR},
		    </if>
		    <if test="linkName != null" >
		       #{linkName,jdbcType=VARCHAR},
		    </if>
		    <if test="linkMobile != null" >
		       #{linkMobile,jdbcType=VARCHAR},
		    </if>
		    <if test="linkQq != null" >
		       #{linkQq,jdbcType=VARCHAR},
		    </if>
		    <if test="linkWx != null" >
		       #{linkWx,jdbcType=VARCHAR},
		    </if>
		    <if test="linkEmail != null" >
		       #{linkEmail,jdbcType=VARCHAR},
		    </if>
		    <if test="status != null" >
		       #{status,jdbcType=INTEGER},
		    </if>
		    <if test="auditState != null" >
		       #{auditState,jdbcType=INTEGER},
		    </if>
		    <if test="auditTime != null" >
		       #{auditTime,jdbcType=TIMESTAMP},
		    </if>
		    <if test="auditFaildReason != null" >
		       #{auditFaildReason,jdbcType=VARCHAR},
		    </if>
		    <if test="applyTime != null" >
		       #{applyTime,jdbcType=TIMESTAMP},
		    </if>
		    <if test="canWithdraw != null" >
		       #{canWithdraw,jdbcType=DECIMAL},
		    </if>
		    <if test="cannotWithdraw != null" >
		       #{cannotWithdraw,jdbcType=DECIMAL},
		    </if>
		    <if test="creator != null" >
		       #{creator,jdbcType=VARCHAR},
		    </if>
		    <if test="gmtCreate != null" >
		       #{gmtCreate,jdbcType=TIMESTAMP},
		    </if>
		    <if test="modifier != null" >
		       #{modifier,jdbcType=VARCHAR},
		    </if>
		    <if test="gmtModified != null" >
		       #{gmtModified,jdbcType=TIMESTAMP},
		    </if>
		    <if test="rebatePercent != null" >
		       #{rebatePercent,jdbcType=DECIMAL},
		    </if>
		    <if test="rebateMax != null" >
		       #{rebateMax,jdbcType=DECIMAL},
		    </if>
        </trim>
    </insert>
    
    <update id="updateById"  parameterType="com.ald.fanbei.api.dal.domain.AfTradeBusinessInfoDo">
        UPDATE af_trade_business_info
          <set>
            <if test="businessId != null and businessId != '' ">        
                business_id = #{businessId,jdbcType=INTEGER},                
            </if>
            <if test="name != null and name != '' ">        
                name = #{name,jdbcType=VARCHAR},                
            </if>
            <if test="type != null and type != '' ">        
                type = #{type,jdbcType=INTEGER},                
            </if>
            <if test="imageUrl != null and imageUrl != '' ">        
                image_url = #{imageUrl,jdbcType=VARCHAR},                
            </if>
            <if test="address != null and address != '' ">        
                address = #{address,jdbcType=VARCHAR},                
            </if>
            <if test="workdays != null and workdays != '' ">        
                workdays = #{workdays,jdbcType=VARCHAR},                
            </if>
            <if test="openTime != null and openTime != '' ">        
                open_time = #{openTime,jdbcType=VARCHAR},                
            </if>
            <if test="endTime != null and endTime != '' ">        
                end_time = #{endTime,jdbcType=VARCHAR},                
            </if>
            <if test="phone != null and phone != '' ">        
                phone = #{phone,jdbcType=VARCHAR},                
            </if>
            <if test="corporationName != null and corporationName != '' ">        
                corporation_name = #{corporationName,jdbcType=VARCHAR},                
            </if>
            <if test="corporationMobile != null and corporationMobile != '' ">        
                corporation_mobile = #{corporationMobile,jdbcType=VARCHAR},                
            </if>
            <if test="corporationEmail != null and corporationEmail != '' ">        
                corporation_email = #{corporationEmail,jdbcType=VARCHAR},                
            </if>
            <if test="licenceUrl != null and licenceUrl != '' ">        
                licence_url = #{licenceUrl,jdbcType=VARCHAR},                
            </if>
            <if test="frontUrl != null and frontUrl != '' ">        
                front_url = #{frontUrl,jdbcType=VARCHAR},                
            </if>
            <if test="inverseUrl != null and inverseUrl != '' ">        
                inverse_url = #{inverseUrl,jdbcType=VARCHAR},                
            </if>
            <if test="protocolUrl != null and protocolUrl != '' ">        
                protocol_url = #{protocolUrl,jdbcType=VARCHAR},                
            </if>
            <if test="authorUrl != null and authorUrl != '' ">        
                author_url = #{authorUrl,jdbcType=VARCHAR},                
            </if>
            <if test="withdrawCycle != null and withdrawCycle != '' ">        
                withdraw_cycle = #{withdrawCycle,jdbcType=INTEGER},                
            </if>
            <if test="cardNo != null and cardNo != '' ">        
                card_no = #{cardNo,jdbcType=VARCHAR},                
            </if>
            <if test="cardId != null and cardId != '' ">        
                card_id = #{cardId,jdbcType=INTEGER},                
            </if>
            <if test="cardCode != null and cardCode != '' ">        
                card_code = #{cardCode,jdbcType=VARCHAR},                
            </if>
            <if test="cardPhone != null and cardPhone != '' ">        
                card_phone = #{cardPhone,jdbcType=VARCHAR},                
            </if>
            <if test="cardIdnumber != null and cardIdnumber != '' ">        
                card_idnumber = #{cardIdnumber,jdbcType=VARCHAR},                
            </if>
            <if test="cardName != null and cardName != '' ">        
                card_name = #{cardName,jdbcType=VARCHAR},                
            </if>
            <if test="cardBank != null and cardBank != '' ">        
                card_bank = #{cardBank,jdbcType=VARCHAR},                
            </if>
            <if test="linkName != null and linkName != '' ">        
                link_name = #{linkName,jdbcType=VARCHAR},                
            </if>
            <if test="linkMobile != null and linkMobile != '' ">        
                link_mobile = #{linkMobile,jdbcType=VARCHAR},                
            </if>
            <if test="linkQq != null and linkQq != '' ">        
                link_qq = #{linkQq,jdbcType=VARCHAR},                
            </if>
            <if test="linkWx != null and linkWx != '' ">        
                link_wx = #{linkWx,jdbcType=VARCHAR},                
            </if>
            <if test="linkEmail != null and linkEmail != '' ">        
                link_email = #{linkEmail,jdbcType=VARCHAR},                
            </if>
            <if test="status != null and status != '' ">        
                status = #{status,jdbcType=INTEGER},                
            </if>
            <if test="auditState != null and auditState != '' ">        
                audit_state = #{auditState,jdbcType=INTEGER},                
            </if>
            <if test="auditTime != null and auditTime != '' ">        
                audit_time = #{auditTime,jdbcType=TIMESTAMP},                
            </if>
            <if test="auditFaildReason != null and auditFaildReason != '' ">        
                audit_faild_reason = #{auditFaildReason,jdbcType=VARCHAR},                
            </if>
            <if test="applyTime != null and applyTime != '' ">        
                apply_time = #{applyTime,jdbcType=TIMESTAMP},                
            </if>
            <if test="canWithdraw != null and canWithdraw != '' ">        
                can_withdraw = #{canWithdraw,jdbcType=DECIMAL},                
            </if>
            <if test="cannotWithdraw != null and cannotWithdraw != '' ">        
                cannot_withdraw = #{cannotWithdraw,jdbcType=DECIMAL},                
            </if>
            <if test="creator != null and creator != '' ">        
                creator = #{creator,jdbcType=VARCHAR},                
            </if>
            <if test="gmtCreate != null and gmtCreate != '' ">        
                gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},                
            </if>
            <if test="modifier != null and modifier != '' ">        
                modifier = #{modifier,jdbcType=VARCHAR},                
            </if>
            <if test="gmtModified != null and gmtModified != '' ">        
                gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},                
            </if>
            <if test="rebatePercent != null and rebatePercent != '' ">        
                rebate_percent = #{rebatePercent,jdbcType=DECIMAL},                
            </if>
            <if test="rebateMax != null and rebateMax != '' ">        
                rebate_max = #{rebateMax,jdbcType=DECIMAL}                
            </if>
        </set>    
        WHERE is_delete = 0 AND id = #{rid ,jdbcType=BIGINT}
    </update>

	<select id="getById" resultType="com.ald.fanbei.api.dal.domain.AfTradeBusinessInfoDo">
        SELECT
        <include refid="queryFields" />
        FROM af_trade_business_info
        WHERE is_delete = 0 AND id=#{rid ,jdbcType=BIGINT}
        LIMIT 0,1
    </select>

	<select id="getByCommonCondition" resultType="com.ald.fanbei.api.dal.domain.AfTradeBusinessInfoDo" parameterType="com.ald.fanbei.api.dal.domain.AfTradeBusinessInfoDo">
        SELECT
        <include refid="queryFields" />
        FROM af_trade_business_info
        <include refid="commonCondition"/> 
        limit 0,1
    </select>
               
    <select id="getListByCommonCondition" resultType="com.ald.fanbei.api.dal.domain.AfTradeBusinessInfoDo" parameterType="com.ald.fanbei.api.dal.domain.AfTradeBusinessInfoDo">
        SELECT
        <include refid="queryFields" />
        FROM af_trade_business_info
        <include refid="commonCondition"/>
    </select>
	<select id="getByBusinessId" resultType="com.ald.fanbei.api.dal.domain.AfTradeBusinessInfoDo">
		SELECT
		<include refid="queryFields" />
		FROM af_trade_business_info
		WHERE is_delete = 0 AND business_id=#{businessId}
		LIMIT 0,1
	</select>

	<select id="getByOrderId" resultType="com.ald.fanbei.api.dal.domain.dto.AfTradeBusinessInfoDto">
		SELECT
		i.image_url,i.business_id,o.order_id,i.name
		FROM af_trade_business_info i, af_trade_order o
		WHERE o.business_id = i.business_id AND o.is_delete = 0 AND i.is_delete = 0
		<if test="orderId != null">
			AND o.order_id = #{orderId}
		</if>
	</select>
    
</mapper>
