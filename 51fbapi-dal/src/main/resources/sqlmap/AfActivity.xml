<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ald.fanbei.api.dal.dao.AfActivityDao">
	
	<sql id="activitySqlField">
		id,is_delete,gmt_create,gmt_modified,name,type,icon_url,gmt_start,gmt_end,title1,title2,title3,title4,bg_color,btn_color
	</sql>
	
	<insert id="addActivity" parameterType="AfActivityDo" keyProperty="id" useGeneratedKeys="true" >
		INSERT INTO
			af_activity
			(
				gmt_create,
				gmt_modified,
				name,
				type,
				icon_url,
				gmt_start,
				gmt_end
			)
		VALUES
		    (
				NOW(),
				NOW(),
				#{name},
				#{type},
				#{iconUrl},
				#{gmtStart},
				#{gmtEnd}
			)
	</insert>
	
	<select id="getActivityById" parameterType="java.lang.Long" resultType="AfActivityDo">
		SELECT
			<include refid="activitySqlField"/>
		FROM
			af_activity 
		WHERE
			is_delete=0
		AND
			id = #{activityId}
	</select>
	
	<select id="listAllActivity"  resultType="AfActivityDo">
		SELECT
			<include refid="activitySqlField"/>
		FROM
			af_activity 
		WHERE
			is_delete=0
	</select>
	
	<update id="updateActivity" parameterType="AfActivityDo">
		UPDATE af_activity SET gmt_modified = NOW() 
			<if test="name != null">
			    ,name=#{name}
			</if>
			<if test="type != null">
			    ,type=#{type}
			</if>
			<if test="iconUrl != null">
			    ,icon_url=#{iconUrl}
			</if>
			<if test="gmtStart != null">
			    ,gmt_start=#{gmtStart}
			</if>
			<if test="gmtEnd != null">
			    ,gmt_end=#{gmtEnd}
			</if>
		WHERE id = #{id}
	</update>
	
	<update id="deleteActivityById" parameterType="java.lang.Long">
		UPDATE
			af_activity
		SET
			gmt_modified = NOW(),
			is_delete = 1
		WHERE
			id = #{activityId}
	</update>
</mapper>