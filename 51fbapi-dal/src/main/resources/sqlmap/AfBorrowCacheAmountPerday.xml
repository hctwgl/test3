<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ald.fanbei.api.dal.dao.AfBorrowCacheAmountPerdayDao">
	<sql id="queryAllFields">
		id,gmt_create,gmt_modified,day,amount,nums
	</sql>

	<insert id="addBorrowCacheAmountPerday" parameterType="AfBorrowCacheAmountPerdayDo" useGeneratedKeys="true" keyProperty="rid">
		INSERT INTO af_borrow_cache_amount_perday(gmt_create , gmt_modified , day , amount)
		VALUES (
    		NOW(),
    		NOW(),
    		#{day},
    		#{amount}
		)
	</insert>
	
	<update id="updateBorrowCacheAmount" parameterType="AfBorrowCacheAmountPerdayDo" >
		UPDATE af_borrow_cache_amount_perday SET gmt_modified = NOW()
    		,amount=amount + #{amount},nums=nums+1
		WHERE day = #{day}
	</update>
	
	<select id="getSigninByDay" resultType="AfBorrowCacheAmountPerdayDo">
		SELECT
			<include refid="queryAllFields" />
		FROM
			af_borrow_cache_amount_perday
		WHERE
			is_delete = 0
		AND
			day = #{day} limit 1;
	</select>
	
	
	
</mapper>