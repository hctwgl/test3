<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ald.fanbei.api.dal.dao.AfShopDao">
	<sql id="queryFields">
		id rid,gmt_create,gmt_modified,creator,modifier,name,description,type,shop_url,icon,logo,latest_use_icon,shop_activity,latest_online,commission_amount,commission_unit,rebate_amount,rebate_unit,status,platform_name,service_provider,interest_free_id,new_icon,new_logo
	</sql>
	
	<select id="getShopById" resultType="AfShopDo">
		SELECT
			<include refid="queryFields" />
		FROM
			af_shop
		WHERE
			is_delete = 0
		AND
			id = #{shopId}
	</select>
	
	<select id="getShopByPlantNameAndTypeAndServiceProvider" resultType="AfShopDo">
		SELECT
			<include refid="queryFields" />
		FROM
			af_shop
		WHERE
			is_delete = 0
		AND
			platform_name = #{platformName}
		AND
			type = #{type}
		AND
			service_provider = #{serviceProvider}
		LIMIT 1
	</select>
	
	<select id="getShopList"   resultType="AfShopDo">
		SELECT
			<include refid="queryFields" />
		FROM
			af_shop
		WHERE
			is_delete = 0
		AND
			status = 'O'
		ORDER BY sort DESC, gmt_modified DESC
	</select>
	
	<select id="getPreEnvShopList"  resultType="AfShopDo">
		SELECT
			<include refid="queryFields" />
		FROM
			af_shop
		WHERE
			is_delete = 0
		ORDER BY sort DESC, gmt_modified DESC
	</select>
	
	<select id="getShopInfoBySecType" parameterType="AfShopDo" resultType="AfShopDo">
		SELECT
			<include refid="queryFields" />
		FROM
			af_shop
		WHERE
			is_delete = 0
		AND
			type = #{type}
		ORDER BY `status` DESC
		limit 1
	</select>
		<select id="getShopInfoBySecTypeOpen" parameterType="AfShopDo" resultType="AfShopDo">
		SELECT
			<include refid="queryFields" />
		FROM
			af_shop
		WHERE
			is_delete = 0
		AND
		    status = 'O'
		AND
			type = #{type}
	</select>
	<select id="getWaiMainShopId" resultType="java.lang.Long">
		SELECT id FROM af_shop WHERE type = 'WAIMAI' AND is_delete = 0 AND `status` = 'O';
	</select>
	
</mapper>