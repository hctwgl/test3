<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ald.fanbei.api.dal.dao.AfRedRainPoolDao">
	<sql id="queryFields">
		p.id,p.num,p.coupon_id,p.coupon_name,p.coupon_type,p.amount,p.gmt_create,p.gmt_modified,p.creator,p.modifier,p.is_delete
	</sql>
	
	<select id="queryAll" resultType="AfRedRainPoolDo">
		SELECT
		<include refid="queryFields"/>,
		  c.limit_amount as 'couponLimitAmount', DATE_FORMAT(c.gmt_end,'%Y年%m月%d日') as 'couponEffectiveTime'
		FROM af_red_rain_pool p
		INNER JOIN af_coupon c on p.coupon_id = c.id
		WHERE p.is_delete = 0 and c.is_delete = 0
	</select>
	
</mapper>