"use strict";function toMaidian(e,t){maidianFnNew(e,channelCode,pointCode,t)}function login(){toMaidian("toLogin"),window.location.href="25"==style?1==os?"http://sftp.51fanbei.com/jiekuanchaoren_v3.9.1_app.apk":"https://itunes.apple.com/cn/app/%E5%80%9F%E6%AC%BE%E8%B6%85%E4%BA%BA-%E5%B0%8F%E9%A2%9D%E5%88%86%E6%9C%9F%E8%B4%B7%E6%AC%BE%E5%80%9F%E9%92%B1%E5%80%9F%E8%B4%B7%E8%BD%AF%E4%BB%B6/id1263792729?mt=8":"24"==style?1==os?"http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www.borrowSuperman":"https://itunes.apple.com/cn/app/%E5%80%9F%E6%AC%BE%E8%B6%85%E4%BA%BA-%E5%B0%8F%E9%A2%9D%E5%88%86%E6%9C%9F%E8%B4%B7%E6%AC%BE%E5%80%9F%E9%92%B1%E5%80%9F%E8%B4%B7%E8%BD%AF%E4%BB%B6/id1263792729?mt=8":"http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www"}function formatDateTime(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var a=e.getDate();return a=a<10?"0"+a:a,t+o+a+e.getHours()+e.getMinutes()+e.getSeconds()}var token=formatDateTime()+Math.random().toString(36).substr(2),style=$("#style").val(),os=getBlatFrom();console.log(style);var channelCode=getUrl("channelCode"),pointCode=getUrl("pointCode"),protocolRegisterName="《爱上街用户注册协议》";19==style&&(protocolRegisterName="《爱上街用户注册协议》");var _fmOpt;!function(){_fmOpt={partner:"alading",appName:"alading_web",token:token};var e=new Image(1,1);e.onload=function(){_fmOpt.imgLoaded=!0},e.src=("https:"==document.location.protocol?"https://":"http://")+"fp.fraudmetrix.cn/fp/clear.png?partnerCode=alading&appName=alading_web&tokenId="+_fmOpt.token;var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://":"http://")+"static.fraudmetrix.cn/fm.js?ver=0.1&t="+((new Date).getTime()/36e5).toFixed(0);var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o)}(),function(e){e._tt_config=!0;var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=document.location.protocol+"//s3.pstatp.com/bytecom/resource/track_log/src/toutiao-track-log.js",t.onerror=function(){var e=new XMLHttpRequest,o=window.encodeURIComponent(window.location.href),a=t.src,n="//ad.toutiao.com/link_monitor/cdn_failed?web_url="+o+"&js_url="+a;e.open("GET",n,!0),e.send(null)};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o)}(window),$(function(){function e(){a--,a<=0?($("#register_codeBtn").removeAttr("disabled"),$("#register_codeBtn").text("点击获取"),clearInterval(o),a=60):$("#register_codeBtn").text(a+" s")}function t(){var t=($(this).attr("isState"),$("#register_mobile").val()),n=$("#channelCode").val(),s=$("#pointCode").val();!isNaN(t)&&/^1(3|4|5|6|7|8|9)\d{9}$/i.test(t)?($("#register_codeBtn").attr("disabled",!0),$.ajax({url:"/app/user/getRegisterSmsCode4Geetest",type:"POST",dataType:"JSON",data:{mobile:t,token:token,channelCode:n,pointCode:s,bsqToken:token},success:function(t){t.success?($(".registerMask").addClass("hide"),$("#register_codeBtn").attr("isState",1),$("#register_codeBtn").text(a+" s"),o=setInterval(e,1e3)):(requestMsg(t.msg),$("#register_codeBtn").removeAttr("disabled"))},error:function(){requestMsg(returnData.msg)}})):requestMsg("请填写正确的手机号")}var o,a=60;$.ajax({url:"/fanbei-web/getGeetestCode",type:"get",dataType:"json",success:function(e){initGeetest({gt:e.gt,challenge:e.challenge,new_captcha:e.new_captcha,offline:!e.success,product:"bind"},function(o){document.getElementById("register_codeBtn").addEventListener("click",function(){var e=$("#register_mobile").val();/^1(3|4|5|6|7|8|9)\d{9}$/i.test(e)?$.ajax({url:"/app/user/checkMobileRegistered",type:"post",data:{mobile:e},success:function(e){e=JSON.parse(e),"N"==e.data?(o.verify(),toMaidian("getCodeSuccess")):(toMaidian("getCodeRegistered"),requestMsg(e.msg))}}):requestMsg("请输入正确的手机号")}),o.onSuccess(function(){var a=o.getValidate();$.ajax({url:"/fanbei-web/verifyGeetestCode",type:"POST",dataType:"json",data:{userId:e.userId,geetestChallenge:a.geetest_challenge,geetestValidate:a.geetest_validate,geetestSeccode:a.geetest_seccode},success:function(e){"success"===e.data.status?(toMaidian("sendCodeSuccess"),t()):"fail"===e.data.status&&(toMaidian("sendCodeFail"),requestMsg(e.msg))}})})})}}),toMaidian("channelRegister"),$("#register_submitBtn").click(function(){if(toMaidian("registerBtn"),"8"!=style&&"9"!=style&&"10"!=style&&"11"!=style&&"12"!=style&&"13"!=style&&"14"!=style&&"15"!=style&&"19"!=style)var e=$("#register_password").val(),t=String(CryptoJS.MD5(e)),o=e.length,a=/^((?=.*?\d)(?=.*?[A-Za-z])|(?=.*?\d)(?=.*?[.!@#$%])|(?=.*?[A-Za-z])(?=.*?[.]))[\dA-Za-z.!@#$%]+$/,n=a.test(e);else var t="";var s=$("#register_mobile").val(),i=$("#register_verification").val(),r=$("#channelCode").val(),c=$("#pointCode").val();$("#register_codeBtn").attr("isState");/^1(3|4|5|6|7|8|9)\d{9}$/i.test(s)&&""!=s?""!=i?"8"==style||"9"==style||"10"==style||"11"==style||"12"==style||"13"==style||"14"==style||"15"==style||"19"==style||n&&6<=o&&o<=18?$("#input_check").is(":checked")||"12"==style||"13"==style||"14"==style||"15"==style?1==$("#register_codeBtn").attr("isState")?$.ajax({url:"/app/user/commitChannelRegister",type:"POST",dataType:"JSON",data:{registerMobile:s,smsCode:i,password:t,channelCode:r,pointCode:c,token:token,bsqToken:token},success:function(e){if(e.success){toMaidian("registerSuccess",s);var t=navigator.userAgent.toLowerCase();if("25"==style)return 1==os?(window.location.href="http://sftp.51fanbei.com/jiekuanchaoren_v3.9.1_app.apk",!1):(window.location.href="https://itunes.apple.com/cn/app/%E5%80%9F%E6%AC%BE%E8%B6%85%E4%BA%BA-%E5%B0%8F%E9%A2%9D%E5%88%86%E6%9C%9F%E8%B4%B7%E6%AC%BE%E5%80%9F%E9%92%B1%E5%80%9F%E8%B4%B7%E8%BD%AF%E4%BB%B6/id1263792729?mt=8",!1);if("24"==style)return 1==os?(window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www.borrowSuperman",!1):(window.location.href="https://itunes.apple.com/cn/app/%E5%80%9F%E6%AC%BE%E8%B6%85%E4%BA%BA-%E5%B0%8F%E9%A2%9D%E5%88%86%E6%9C%9F%E8%B4%B7%E6%AC%BE%E5%80%9F%E9%92%B1%E5%80%9F%E8%B4%B7%E8%BD%AF%E4%BB%B6/id1263792729?mt=8",!1);1==os&&"micromessenger"!=t.match(/MicroMessenger/i)&&"qq"!=t.match(/QQ/i)&&(window.location.href="http://sftp.51fanbei.com/51fanbei_app.apk"),"14"==style&&_taq.push({convert_id:"92097724391",event_type:"form"}),window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www"}else maidianFnNew("registerFail",r,c,e.msg),requestMsg(e.msg)},error:function(){requestMsg("注册失败")}}):requestMsg("请获取验证码"):requestMsg("请阅读并同意"+protocolRegisterName):requestMsg("请填写6-18位的数字、字母、字符组成的密码"):requestMsg("请输入正确的验证码"):requestMsg("请填写正确的手机号")}),$(".goTop").click(function(){$("body,html").animate({scrollTop:0},300)}),$(".goodCont").click(function(){$("body,html").animate({scrollTop:0},300)})});var tag=!1,ox=0,left=300*document.documentElement.clientWidth/375,bgleft=0,totalLength=300*document.documentElement.clientWidth/375;$(".progress_btn").on("touchstart",function(e){var t,o=e.originalEvent,a=o.touches;t=a?a[0]:e,console.log(t),ox=t.pageX-left,tag=!0}),$(document).on("touchend",function(){tag=!1}),$(document).on("touchmove",function(e){var t,o=e.originalEvent,a=o.touches;t=a?a[0]:e,tag&&(left=t.pageX-ox,left<=0?left=0:left>totalLength&&(left=totalLength),$(".progress_btn").css("left",left),$(".progress_bar").width(left/(document.documentElement.clientWidth/750*100)+"rem"),$(".text").html("￥"+parseInt(left/totalLength*19500+500)),$("#leftMoney").html("￥"+parseInt(left/totalLength*19500+500)),$("#rightMoney").html("￥"+(.001*parseInt(left/totalLength*19500+500)).toFixed(2)))}),function(e){$(".to_loadapp_btn").on("click",function(){var t=navigator.userAgent.toLowerCase();return 2==os?void(e.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www"):1==os&&"micromessenger"==t.match(/MicroMessenger/i)&&"qq"==t.match(/QQ/i)?void(e.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www"):(maidianFnNew("channel_"+style+"_download"),void(e.location.href="http://sftp.51fanbei.com/ishangjie_app_"+channelCode+".apk"))})}(window);
//# sourceMappingURL=../../_srcmap/js/user/channelRegister.js.map
