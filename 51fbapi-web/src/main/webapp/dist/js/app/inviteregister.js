"use strict";function formatDateTime(){var e=new Date,o=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var t=e.getDate();return t=t<10?"0"+t:t,o+n+t+e.getHours()+e.getMinutes()+e.getSeconds()}var users=[{phone:"13120808880",money:"8000"},{phone:"13777739767",money:"6000"},{phone:"18657172099",money:"7000"},{phone:"15869125132",money:"6000"},{phone:"17826833863",money:"4000"},{phone:"17623000389",money:"5000"},{phone:"15769163696",money:"4000"},{phone:"18367127197",money:"3000"},{phone:"13958114326",money:"5000"},{phone:"13758140925",money:"4000"},{phone:"13588865276",money:"3000"},{phone:"15757161549",money:"7000"},{phone:"18768110576",money:"6000"},{phone:"13216178996",money:"4000"},{phone:"18768110576",money:"5000"}],recommendCode=getUrl("recommendCode"),token=formatDateTime()+Math.random().toString(36).substr(2),checkphone=function(){return!!/^1(3|4|5|7|8)\d{9}$/i.test($("#user").val())},checkpwd=function(){return!!/^((?=.*?\d)(?=.*?[A-Za-z])|(?=.*?\d)(?=.*?[.!@#$%])|(?=.*?[A-Za-z])(?=.*?[.]))[\dA-Za-z.!@#$%]+$/.test($("#pwd").val())},checkverify=function(){return 4===$("#verify").val().length},checkcheckbox=function(){return!!$(".checkbox").hasClass("checked")},sixty=function(){var e=60,o=setInterval(function(){$(".getcode").html(e+"S"),e--},1e3);setTimeout(function(){clearInterval(o),$(".getcode").removeClass("disabled").text("获取验证码")},61e3)},insertroll=function(e){var o="";return e.forEach(function(e){var n=e.phone.split("");n.splice(3,4,"****"),o+="<li>用户 "+n.join("")+" &nbsp;成功借款 "+e.money+"元</li>"}),o},timescroll=function(e){var o=e.length;setInterval(function(){$(".roll ul").animate({top:"-=20px"})},2e3),setInterval(function(){$(".roll ul").css({top:"20px"})},2e3*o-1)};window.onload=function(){$(".roll ul").append(insertroll(users)),timescroll(users),$(".getcode").on("click",function(){!checkphone()||$(".getcode").hasClass("disabled")||$(".getcode").hasClass("pending")?checkphone()||requestMsg("请填写正确的手机号"):($(".getcode").addClass("pending"),$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:$("#user").val()},success:function(e){$(".getcode").removeClass("pending"),$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$(".imgVftCodeRefresh").on("click",function(){$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:$("#user").val()},success:function(e){$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data)},error:function(){requestMsg("请求失败")}})}),$(".imgVftCodeSbumit").on("click",function(){$.ajax({url:"/app/user/getRegisterSmsCode",type:"POST",dataType:"JSON",data:{mobile:$("#user").val(),token:token,verifyImgCode:$("#imgVftCode").val()},success:function(e){e.success?($(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide"),$(".getcode").addClass("disabled"),sixty()):(requestMsg(e.msg),$(".getcode").removeClass("disabled"))},error:function(){requestMsg("请求失败")}})}),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){$(".getcode").removeClass("pending"),requestMsg("请求失败")}}))}),$(".reg").on("click",function(){var e=checkphone(),o=checkpwd(),n=checkverify(),t=checkcheckbox();e?o?n?t||requestMsg("请阅读并同意《51返呗用户注册协议》"):requestMsg("请输入正确的验证码"):requestMsg("请填写6-18位的数字、字母、字符组成的密码"):requestMsg("请填写正确的手机号"),e&&o&&n&&t&&($(".reg").hasClass("pending")||($(".reg").addClass("pending"),$.ajax({url:"/app/user/commitRegister",type:"POST",dataType:"JSON",data:{registerMobile:$("#user").val(),smsCode:$("#verify").val(),password:String(CryptoJS.MD5($("#pwd").val())),recommendCode:recommendCode,token:token},success:function(e){$(".reg").removeClass("pending"),e.success?window.location.href=e.url:requestMsg(e.msg)},error:function(){$(".reg").removeClass("pending"),requestMsg("注册失败")}})))}),$(".checkbox").on("click",function(){$(".checkbox").toggleClass("checked")})};
//# sourceMappingURL=../../_srcmap/js/app/inviteregister.js.map
