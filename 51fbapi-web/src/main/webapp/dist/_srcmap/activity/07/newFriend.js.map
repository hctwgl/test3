{"version":3,"sources":["activity/07/newFriend.js"],"names":["activityId","getUrl","vue","Vue","content","data","tableContent","this","logData","methods","getCoupon","type","self","sceneId","userName","url","postData","couponId","ajax","success","res","eval","location","href","requestMsg","msg","buyNow","item","source","notifyUrl","goodsId","window","txtFix","i","str","len","char_length","cut_str","length","son_str","charAt","encodeURI","sub_len","$","log","oneKeyReceive","returnData","error"],"mappings":"YAGA,IAAIA,YAAaC,OAAO,cACpBC,IAAI,GAAIC,MADRH,GAAAA,UACAE,MACGE,WACHC,iBAEIC,QAAAA,WAJQC,KAAAC,WAORC,SAPQC,UAAA,QAAAA,WAAAL,KAAAM,MASZF,GAASG,MAAAL,KACLG,IAAU,oBACFE,UAAKC,QAATR,KAAAS,SAAAF,KAAAR,QAAAU,SACIC,MAAJJ,OACIK,IAAAA,aACDL,UAAMM,SAAIZ,OAETW,EAAAA,MACHD,IAAA,eAAAA,IACCG,KAAK,OACHH,KAAIC,SACJL,QAAK,QAAAQ,SAFFC,KAGHf,IAAKW,KAAAA,IAHFI,IAAA,KAKU,GAATA,IAAIC,SAGGD,IAAIL,KAAe,KAAVK,IAAIL,IADbI,OAAJG,SAAHC,KAAsBH,IAAAL,IAKjBS,WAAAJ,IAAAK,SAZNC,OAXNlB,SAWDmB,GATC,GAAAf,GAAAL,IAAA,gBAAAoB,EAAAC,OA6BGhB,OAAKU,SAATC,KAAAX,EAAAN,aAAAuB,UAAA,8BAAAF,EAAAG,QAAA,KAEIC,OAAOT,SAASC,KAAhBX,EAAqBA,aAAKN,UAAauB,uBAAUF,EAAAG,QAA8BH,MAGlFK,OApCAxB,SAoCAyB,GAiBI,MAnDJ,UAAAC,EAAAC,GAAA,GAAAC,GAAA,CAqCD,IAAAF,EAASG,QAAQH,EACTE,MAAAA,EAEA,KAAA,GAAOF,GAAP,EAAAD,EAAAC,EAAAI,OAAAL,IAAA,CACC,GAAAM,GAAAL,EAAAM,OAAAP,EAEG,IADJQ,UAAAF,GAAoBL,OAAYD,EAAhCG,GAAoC,EAAAA,GAAA,GAC5BG,GAAcC,EAAAA,CAClBC,GAAAA,GAAAL,GAAgCA,EAAAA,EAAAA,EAAAA,CAC5BA,OAAAA,GAAAA,OAAJ,EAAuBM,MAM9BT,EAAA,KAELzB,QAAA,QAAAA,WArDC,GAAAI,MAAAL,IAyDDoC,GAAEzB,MAFNV,IAAQ,iCACAI,KAAAA,OACFM,MAAKlB,WAAAA,YACHe,QAAI,QAAAI,SAAAd,MACJM,KAAKL,aAFFe,KAAA,IAAAhB,KAAA,KAGHA,KAAMC,aAAaN,KAAAA,aAHhBK,QAMCO,EAAAA,MACHG,IAAA,0BAPLJ,KAAA,OASEO,QAAK,QAAAC,SAAAd,MACHU,KAAIX,QAAAiB,KAAA,IADDhB,KAAA,KAEHM,KAAKP,QAFFQ,KAAAR,QAAAC,KAGHc,QAAQyB,IAAAhC,KAAAR,aAIPyC,cA3EJrC,QAAAA,iBAoEMmC,EAAPzB,MAlECH,IAAA,sCA4EL8B,KA5EK,OA6EC3B,QAAK,QAAAC,SAAA2B,YACH/B,GAAIV,MAAAgB,KAAA,IAAAyB,WAAA,IACCzC,MAFFc,QAGHA,WAAQ,QAEDd,KAAKc,IACJK,SAAWD,KAAXlB,KAAAU,IAEGV,WAASA,KAAAoB,MAIXsB,MAAA,WACJvB,WAAA","file":"../../../activity/07/newFriend.js","sourcesContent":["/**\r\n * Created by nizhiwei-labtop on 2017/7/10.\r\n */\r\nlet activityId = getUrl(\"activityId\");\r\nlet vue=new Vue({\r\n    el:'#vueCon',\r\n    data:{\r\n        content:[],\r\n        tableContent:[]\r\n    },\r\n    created:function () {\r\n        this.logData();\r\n    },\r\n    methods: {\r\n        getCoupon:function (data,type) {\r\n            let self=this;\r\n            let url='pickBoluomeCoupon';\r\n            let postData={\"sceneId\":data,\"userName\":self.content.userName};\r\n            if(type=='1'){\r\n                url='pickCoupon';\r\n                postData={couponId:data};\r\n            }\r\n            $.ajax({\r\n                url:\"/fanbei-web/\"+url,\r\n                type:'post',\r\n                data:postData,\r\n                success:function (res) {\r\n                    res=eval('(' + res+ ')');\r\n\r\n                    if(res.success==false){\r\n                        if(res.url&&res.url!==\"\"){\r\n                            window.location.href=res.url\r\n                        }else{\r\n                            requestMsg(res.msg)\r\n                        }\r\n                    }else{\r\n                        requestMsg(res.msg)\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        buyNow(item){\r\n            let self=this;\r\n            if (item.source==\"SELFSUPPORT\"){\r\n                window.location.href=self.tableContent.notifyUrl+'&params={\"privateGoodsId\":\"'+item.goodsId+'\"}'\r\n            }else{\r\n                window.location.href=self.tableContent.notifyUrl+'&params={\"goodsId\":\"'+item.goodsId+'\"}'\r\n            }\r\n        },\r\n        txtFix(i){\r\n            function cut_str(str,len){\r\n                var char_length = 0;\r\n                if(str.length<=len){\r\n                    return str\r\n                }else{\r\n                    for (var i = 0; i < str.length; i++){\r\n                        var son_str = str.charAt(i);\r\n                        encodeURI(son_str).length > 2 ? char_length += 1 : char_length += 0.5;\r\n                        if (char_length >= len){\r\n                            var sub_len = char_length == len ? i+1 : i;\r\n                            return str.substr(0, sub_len);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return cut_str(i, 20)\r\n        },\r\n        logData:function(){\r\n            let self=this;\r\n            $.ajax({\r\n                url:'/fanbei-web/encoreActivityInfo',\r\n                type:'post',\r\n                data:{'activityId':activityId},\r\n                success:function (data) {\r\n                    self.tableContent = eval('(' + data + ')');\r\n                    self.tableContent = self.tableContent.data;\r\n                }\r\n            });\r\n            $.ajax({\r\n                url:'/fanbei-web/newUserGift',\r\n                type:'post',\r\n                success:function (data) {\r\n                    self.content = eval('(' + data + ')');\r\n                    self.content = self.content.data;\r\n                    console.log(self.content);\r\n                }\r\n            });\r\n        },\r\n        oneKeyReceive(){\r\n            $.ajax({\r\n                url:'/fanbei-web/pickSysAndBoluomeCoupon',\r\n                type:'post',\r\n                success:function (returnData) {\r\n                    let data=eval('(' + returnData + ')');\r\n                    if(data.success){\r\n                        requestMsg(\"领劵成功\");\r\n                    }else{\r\n                        if(data.url){\r\n                            location.href=data.url;\r\n                        }else{\r\n                            requestMsg(data.msg);\r\n                        }\r\n                    }\r\n                },\r\n                error: function(){\r\n                    requestMsg(\"请求失败\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n});\r\n"]}