{"version":3,"sources":["activity/07/huiLi.js"],"names":["modelId","getUrl","console","log","el","vm","couponCont","data","content","list01","list02","list03","second","this","logCoupon","created","logContent","methods","$","ajax","self","type","success","url","eval","requestMsg","couponClick","e","couponId","dataType","returnData","status","window","location","msg","error","activityList","activityGoodsList","goodsId","source","first","item","href","productClick","str","len","length","cut_str","i","char_length","charAt","sub_len","l"],"mappings":"YAAA,IAAIA,SAAUC,OAAO,UACrBC,SAAQC,IAAIH,QAAZE,IAAAA,IAAQC,GAAIH,MACZI,GAAA,SACIC,MACIC,cACJC,WACID,UACAE,UACAC,UACAC,SACAC,WAEAC,QAAAA,WATSC,KAAAC,YAWbC,KAASC,cAELC,SAbSH,UAaJE,QAAAA,aAGLF,GAAAA,MADKD,IAEDK,GAAAC,MACIC,KAAAA,OACFD,IAAK,iCACHE,QAAM,QAAAC,SADHf,MAEHgB,KAAKjB,WAAAkB,KAAA,IAAAjB,KAFF,KAAAA,KAGHe,QAASnB,IAAAiB,KAAAd,aAELJ,MAAAA,WALDuB,WAAA,YAYVC,YAhBI,SAAAC,GAkBD,GADJD,GAAYC,EAAAC,QAER1B,SAAI0B,IAAAA,GACJV,EAAAC,MACAjB,IAAQC,yBACNgB,KAAK,OACHI,SAAK,OACLF,MACAQ,SAAUD,GAENA,QAAAA,SAASA,GALV,GAAAE,EAAAR,QAOHA,WAAS,eACFQ,CACAL,QAAAA,IAAWK,EADd,IAEKC,GAAAD,EAAAvB,KAAA,MACWuB,mBAAZ5B,IACI6B,OAAAA,SAASD,KAAWvB,EAAxBgB,KACkC,QAAAQ,IAC9BC,WAAOC,EAAPC,KACHT,WAAA,kBACuB,oBAAAM,GACpBN,WAAWK,EAAWI,KAEzB,aAAAH,GACGA,WAAUD,EAAAI,OAGdC,MAAA,WAA6BV,WAAA,YAKrCU,WApDHnB,QAAAA,cAqDOS,GAAAA,MAAAA,IACHP,GAAAC,MA9BLE,KAAA,OAtBCE,IAAA,wCAAAvB,QAwDLgB,QAxDK,QAAAM,SAAAf,MAyDGa,KAAOZ,QAAXgB,KAAA,IAAAjB,KAAA,KAAAA,KACOL,QAAAC,IAAAiB,KAAAZ,SACHa,KAAMZ,OADHW,KAAAZ,QAAA4B,aAAA,GAAAC,kBAEHd,KAAKb,OAAAU,KAAAZ,QAAA4B,aAAA,GAAAC,kBACLf,KAASX,OAAAS,KAAAZ,QAAUD,aAAM,GAAA8B,kBACrBjB,KAAKZ,MAAAA,QAAUgB,KAAKf,OAAA,GAAa6B,QACjCpC,KAAAA,MAAAqC,OAAiB/B,KAAAA,OAAjB,GAAA+B,OACAnB,KAAKX,OAAL6B,QAAiB9B,KAAAA,OAAQ4B,GAAAA,QACzBhB,KAAKV,OAAL6B,OAAiB/B,KAAAA,OAAQ4B,GAAAA,OACzBhB,KAAKT,OAALS,KAAYA,OAAKZ,MAAQ4B,GACzBhB,KAAKoB,OAAMF,KAAAA,OAAQlB,MAAKX,GACxBW,QAAKoB,IAAMD,KAAXC,OACApB,QAAKR,IAAO0B,KAAAA,SAEZlB,MAAAA,WACAA,WAAA,YAIJe,aA9EHnB,SA8EGmB,GACIV,QAAAA,IAAAA,GACH,eAAAgB,EAAAF,OApBLP,OAAAC,SAAAS,KAAA,2EAAAD,EAAAH,QAAA,KAuBJK,OAjFKV,SAAAS,KAAA,oEAiFaD,EAAAH,QAAA,MAGVN,OAtFHhB,SAsFGgB,EAAAA,GAiBY,MAhBf,UAAMY,EAAAC,GACHb,GAAAA,GAAgBU,CACnB,IAAAE,EAAAE,QAAAD,EAvFA,MAAAD,EA0FD,KAASG,GAAQH,GAAjB,EAAqBC,EAAID,EAAAE,OAAAE,IAAA,CACjBC,GAAAA,GAAJL,EAAAM,OAAAF,EAEI,IADGF,UAAQD,GAAIC,OAAA,EAAAG,GAAA,EAAAA,GAAA,GACRL,GAAPC,EAAA,CACC,GAAAM,GAAAF,GAAAJ,EAAAG,EAAA,EAAAA,CACI,OAALJ,GAAgBI,OAAQF,EAAAA,MAMhBE,EAAAI","file":"../../../activity/07/huiLi.js","sourcesContent":["let modelId = getUrl(\"modelId\");\nconsole.log(modelId)\n//获取数据\nlet vm = new Vue({\n    el: '#huiLi',\n    data: {\n        couponCont:{},\n        content: {},\n        list01:{},\n        list02:{},\n        list03:{},\n        first:{},\n        second:{}\n    },\n    created: function () {\n        this.logCoupon();\n        this.logContent();\n    },\n    methods: {\n        logCoupon() {\n            //获取页面初始化信息\n            let self = this;\n            $.ajax({\n                type: 'post',\n                url: \"/fanbei-web/activityCouponList\",\n                success: function (data) {\n                    self.couponCont = eval('(' + data + ')').data;\n                    console.log(self.couponCont);                   \n                },\n                error: function () {\n                    requestMsg(\"请求失败\");\n                }\n            });\n            \n        },\n        couponClick:function(e){\n            let self=this;\n            var couponId=e.couponId;\n            //点击领券\n            console.log(couponId)\n            $.ajax({\n                url: \"/fanbei-web/pickCoupon\",\n                type: \"POST\",\n                dataType: \"JSON\",\n                data: {\n                    couponId:couponId\n                },\n                success: function(returnData){\n                    if(returnData.success){\n                       requestMsg(\"优惠劵领取成功\");                          \n                    }else{\n                        console.log(returnData)\n                        var status = returnData.data[\"status\"];\n                        if (status == \"USER_NOT_EXIST\") { // 用户不存在                                \n                            window.location.href = returnData.url;\n                        }\n                        if (status == \"OVER\") { // 优惠券个数超过最大领券个数\n                            requestMsg(returnData.msg);\n                            requestMsg(\"优惠券个数超过最大领券个数\");\n                        }\n                        if (status == \"COUPON_NOT_EXIST\") { // 优惠券不存在\n                            requestMsg(returnData.msg);\n                        }\n                        if (status == \"MORE_THAN\") { // 优惠券已领取完\n                            requestMsg(returnData.msg);\n                        }  \n                    }\n                },\n                error: function(){\n                    requestMsg(\"请求失败\");\n                }\n            });\n            \n        },\n        logContent(){\n            let self = this;\n            $.ajax({\n                type: 'post',\n                url: \"/fanbei-web/partActivityInfo?modelId=\"+modelId,\n                success: function (data) {\n                    self.content = eval('(' + data + ')').data;\n                    console.log(self.content);\n                    self.list01=self.content.activityList[0].activityGoodsList;\n                    self.list02=self.content.activityList[1].activityGoodsList;\n                    self.list03=self.content.activityList[2].activityGoodsList;\n                    self.first.goodsId=self.list01[0].goodsId;\n                    self.first.source=self.list01[0].source;                    \n                    self.second.goodsId=self.list02[0].goodsId;\n                    self.second.source=self.list02[0].source;\n                    self.list01=self.list01.slice(1);\n                    self.list02=self.list02.slice(1);\n                    console.log(self.first)  \n                    console.log(self.second)            \n                },\n                error: function () {\n                    requestMsg(\"请求失败\");\n                }\n            });\n        },\n        productClick(item){\n            console.log(item);\n            if ( item.source==\"SELFSUPPORT\" ) {\n                window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={\"privateGoodsId\":\"'+item.goodsId+'\"}'\n            } else {\n                window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={\"goodsId\":\"'+item.goodsId+'\"}'\n            }\n        },\n        txtFix(i,l){\n            function cut_str(str,len){\n                var char_length = 0;\n                if(str.length<=len){\n                    return str\n                }else{\n                    for (var i = 0; i < str.length; i++){\n                        var son_str = str.charAt(i);\n                        encodeURI(son_str).length > 2 ? char_length += 1 : char_length += 0.5;\n                        if (char_length >= len){\n                            var sub_len = char_length == len ? i+1 : i;\n                            return str.substr(0, sub_len);\n                            break;\n                        }\n                    }\n                }\n            }\n            return cut_str(i, l)\n        }\n    }\n})\n"]}