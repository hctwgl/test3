{"version":3,"sources":["activity/07/huiLi.js"],"names":["modelId","getUrl","console","log","el","data","couponCont","content","list01","list02","list03","second","this","logCoupon","created","logContent","methods","$","ajax","self","type","success","url","eval","requestMsg","couponClick","e","couponId","dataType","returnData","status","window","location","msg","error","activityList","activityGoodsList","goodsId","source","first","item","href","productClick","str","len","length","cut_str","i","char_length","charAt","sub_len","l"],"mappings":"YAAA,IAAIA,SAAUC,OAAO,UACrBC,SAAQC,IAAIH,QAAZE,IAAAA,IAAQC,GAAIH,MACZI,GAAA,SACAC,MACQC,cACJD,WACIC,UACAC,UACAC,UACAC,SACAC,WAEAC,QAAAA,WATSC,KAAAC,YAWbC,KAASC,cAELC,SAbSH,UAaJE,QAAAA,aAGLF,GAAAA,MADKD,IAEDK,GAAAC,MACIC,KAAAA,OACFD,IAAK,iCACHE,QAAM,QAAAC,SADHhB,MAEHiB,KAAKhB,WAAAiB,KAAA,IAAAlB,KAFF,KAAAA,KAGHgB,QAASlB,IAAAgB,KAAAb,aAELJ,MAAAA,WALDsB,WAAA,YAYVC,YAhBI,SAAAC,GAkBD,GADJD,GAAYC,EAAAC,QAERzB,SAAIyB,IAAAA,GACJV,EAAAC,MACAhB,IAAQC,yBACNe,KAAK,OACHI,SAAK,OACLF,MACAQ,SAAUD,GAENA,QAAAA,SAASA,GALV,GAAAE,EAAAR,QAOHA,WAAS,eACFQ,CACAL,QAAAA,IAAWK,EADd,IAEKC,GAAAD,EAAAxB,KAAA,MACWwB,mBAAZ3B,IACI4B,OAAAA,SAASD,KAAWxB,EAAxBiB,KACkC,QAAAQ,IAC9BC,WAAOC,EAAPC,KACHT,WAAA,kBACuB,oBAAAM,GACpBN,WAAWK,EAAWI,KAEzB,aAAAH,GACGA,WAAUD,EAAAI,OAGdC,MAAA,WAA6BV,WAAA,YAKrCU,WApDHnB,QAAAA,cAqDOS,GAAAA,MAAAA,IACHP,GAAAC,MA9BLE,KAAA,OAtBCE,IAAA,wCAAAtB,QAwDLe,QAxDK,QAAAM,SAAAhB,MAyDGc,KAAOZ,QAAXgB,KAAA,IAAAlB,KAAA,KAAAA,KACOH,QAAAC,IAAAgB,KAAAZ,SACHa,KAAMZ,OADHW,KAAAZ,QAAA4B,aAAA,GAAAC,kBAEHd,KAAKb,OAAAU,KAAAZ,QAAA4B,aAAA,GAAAC,kBACLf,KAASX,OAAAS,KAAAZ,QAAUF,aAAM,GAAA+B,kBACrBjB,KAAKZ,MAAAA,QAAUgB,KAAKf,OAAA,GAAa6B,QACjCnC,KAAAA,MAAAoC,OAAiB/B,KAAAA,OAAjB,GAAA+B,OACAnB,KAAKX,OAAL6B,QAAiB9B,KAAAA,OAAQ4B,GAAAA,QACzBhB,KAAKV,OAAL6B,OAAiB/B,KAAAA,OAAQ4B,GAAAA,OACzBhB,KAAKT,OAALS,KAAYA,OAAKZ,MAAQ4B,GACzBhB,KAAKoB,OAAMF,KAAAA,OAAQlB,MAAKX,GACxBW,QAAKoB,IAAMD,KAAXC,OACApB,QAAKR,IAAO0B,KAAAA,SAEZlB,MAAAA,WACAA,WAAA,YAIJe,aA9EHnB,SA8EGmB,GACIV,QAAAA,IAAAA,GACH,eAAAgB,EAAAF,OApBLP,OAAAC,SAAAS,KAAA,2EAAAD,EAAAH,QAAA,KAuBJK,OAjFKV,SAAAS,KAAA,oEAiFaD,EAAAH,QAAA,MAGVN,OAtFHhB,SAsFGgB,EAAAA,GAiBY,MAhBf,UAAMY,EAAAC,GACHb,GAAAA,GAAgBU,CACnB,IAAAE,EAAAE,QAAAD,EAvFA,MAAAD,EA0FD,KAASG,GAAQH,GAAjB,EAAqBC,EAAID,EAAAE,OAAAE,IAAA,CACjBC,GAAAA,GAAJL,EAAAM,OAAAF,EAEI,IADGF,UAAQD,GAAIC,OAAA,EAAAG,GAAA,EAAAA,GAAA,GACRL,GAAPC,EAAA,CACC,GAAAM,GAAAF,GAAAJ,EAAAG,EAAA,EAAAA,CACI,OAALJ,GAAgBI,OAAQF,EAAAA,MAMhBE,EAAAI","file":"../../../activity/07/huiLi.js","sourcesContent":["let modelId = getUrl(\"modelId\");\r\nconsole.log(modelId)\r\n//获取数据\r\nlet vm = new Vue({\r\n    el: '#huiLi',\r\n    data: {\r\n        couponCont:{},\r\n        content: {},\r\n        list01:{},\r\n        list02:{},\r\n        list03:{},\r\n        first:{},\r\n        second:{}\r\n    },\r\n    created: function () {\r\n        this.logCoupon();\r\n        this.logContent();\r\n    },\r\n    methods: {\r\n        logCoupon() {\r\n            //获取页面初始化信息\r\n            let self = this;\r\n            $.ajax({\r\n                type: 'post',\r\n                url: \"/fanbei-web/activityCouponList\",\r\n                success: function (data) {\r\n                    self.couponCont = eval('(' + data + ')').data;\r\n                    console.log(self.couponCont);                   \r\n                },\r\n                error: function () {\r\n                    requestMsg(\"请求失败\");\r\n                }\r\n            });\r\n            \r\n        },\r\n        couponClick:function(e){\r\n            let self=this;\r\n            var couponId=e.couponId;\r\n            //点击领券\r\n            console.log(couponId)\r\n            $.ajax({\r\n                url: \"/fanbei-web/pickCoupon\",\r\n                type: \"POST\",\r\n                dataType: \"JSON\",\r\n                data: {\r\n                    couponId:couponId\r\n                },\r\n                success: function(returnData){\r\n                    if(returnData.success){\r\n                       requestMsg(\"优惠劵领取成功\");                          \r\n                    }else{\r\n                        console.log(returnData)\r\n                        var status = returnData.data[\"status\"];\r\n                        if (status == \"USER_NOT_EXIST\") { // 用户不存在                                \r\n                            window.location.href = returnData.url;\r\n                        }\r\n                        if (status == \"OVER\") { // 优惠券个数超过最大领券个数\r\n                            requestMsg(returnData.msg);\r\n                            requestMsg(\"优惠券个数超过最大领券个数\");\r\n                        }\r\n                        if (status == \"COUPON_NOT_EXIST\") { // 优惠券不存在\r\n                            requestMsg(returnData.msg);\r\n                        }\r\n                        if (status == \"MORE_THAN\") { // 优惠券已领取完\r\n                            requestMsg(returnData.msg);\r\n                        }  \r\n                    }\r\n                },\r\n                error: function(){\r\n                    requestMsg(\"请求失败\");\r\n                }\r\n            });\r\n            \r\n        },\r\n        logContent(){\r\n            let self = this;\r\n            $.ajax({\r\n                type: 'post',\r\n                url: \"/fanbei-web/partActivityInfo?modelId=\"+modelId,\r\n                success: function (data) {\r\n                    self.content = eval('(' + data + ')').data;\r\n                    console.log(self.content);\r\n                    self.list01=self.content.activityList[0].activityGoodsList;\r\n                    self.list02=self.content.activityList[1].activityGoodsList;\r\n                    self.list03=self.content.activityList[2].activityGoodsList;\r\n                    self.first.goodsId=self.list01[0].goodsId;\r\n                    self.first.source=self.list01[0].source;                    \r\n                    self.second.goodsId=self.list02[0].goodsId;\r\n                    self.second.source=self.list02[0].source;\r\n                    self.list01=self.list01.slice(1);\r\n                    self.list02=self.list02.slice(1);\r\n                    console.log(self.first)  \r\n                    console.log(self.second)            \r\n                },\r\n                error: function () {\r\n                    requestMsg(\"请求失败\");\r\n                }\r\n            });\r\n        },\r\n        productClick(item){\r\n            console.log(item);\r\n            if ( item.source==\"SELFSUPPORT\" ) {\r\n                window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={\"privateGoodsId\":\"'+item.goodsId+'\"}'\r\n            } else {\r\n                window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={\"goodsId\":\"'+item.goodsId+'\"}'\r\n            }\r\n        },\r\n        txtFix(i,l){\r\n            function cut_str(str,len){\r\n                var char_length = 0;\r\n                if(str.length<=len){\r\n                    return str\r\n                }else{\r\n                    for (var i = 0; i < str.length; i++){\r\n                        var son_str = str.charAt(i);\r\n                        encodeURI(son_str).length > 2 ? char_length += 1 : char_length += 0.5;\r\n                        if (char_length >= len){\r\n                            var sub_len = char_length == len ? i+1 : i;\r\n                            return str.substr(0, sub_len);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return cut_str(i, l)\r\n        }\r\n    }\r\n})\r\n"]}