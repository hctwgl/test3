{"version":3,"sources":["activity/06/game.js"],"names":["clientRate","recommendCode","appLogin","protocol","window","host","location","urlHost","shareAppImage","shareAppUrl","isSubmit","sharePage","JSON","stringify","dataObj","dataInit","$","ajax","url","type","success","data","eval","console","log","dataStr","chanceCount","isLogin","html","chanceCodes","split","i","chance","length","undefined","_typeof","item1Count","find","eq","attr","splice","item2Count","item3Count","item4Count","item5Count","con","awardList","avatar","userName","msg","entityAwardList","hide","show","isAward","gmtOpen","hours01","hours02","minutes01","minutes02","seconds01","seconds02","starTime","setInterval","time","leftTime","gmtCurrent","leftsecond","parseInt","hours","minutes","seconds","toString","slice","clearInterval","awardInfo","isSubmitContacts","awardIcon","AutoScroll","obj","x","animate","this","click","appendTo","goUp","css","slideDown","goDown","getInfo","isShow","game","width","_classCallCheck","init","num","requestMsg","claw","bind","self","doll","startMove","marginLeft","round","Countdown","setTimeout","alertMsg","Math","timeStart","clearTimeout","dollNum","state","item","result","code","lotteryResult","amount","clawLeft","offset","left","top","each","dollLeft","floor","random","position","dataProp","sixGame","href","document","ready","marginTop","onoff"],"mappings":"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","file":"../../../activity/06/game.js","sourcesContent":["/**\r\n * Created by nizhiwei-labtop on 2017/5/31.\r\n */\r\nlet userName = \"\";\r\nif(getInfo().userName){\r\n    userName=getInfo().userName\r\n}\r\nlet chance=[],isLogin,isShow,clientRate,chanceCount,recommendCode;\r\n\r\nlet protocol = window.location.protocol;\r\nlet host = window.location.host;\r\nlet urlHost = protocol+'//'+host;\r\n// alert(urlHost);\r\n// let shareAppUrl = urlHost+'/fanbei-web/activity/gameShare?recommendCode='+recommendCode;\r\n// console.log(shareAppUrl);\r\n\r\n\r\n// app调用web的方法\r\nfunction alaShareData(){\r\n    // 分享内容\r\n    let dataObj = {\r\n        'appLogin': 'Y', // 是否需要登录，Y需要，N不需要\r\n        'type': 'share', // 此页面的类型\r\n        'shareAppTitle': '引爆年中抓娃娃，100%中大奖',  // 分享的title\r\n        'shareAppContent': '抓娃娃次数无上限100%中奖，集齐5娃，平分1亿大奖，最高888红包雨在等你，有且只在51返呗！',  // 分享的内容\r\n        'shareAppImage': 'https://fs.51fanbei.com/h5/common/icon/midyearCorner.png',  // 分享右边小图\r\n        'shareAppUrl': urlHost+'/fanbei-web/activity/gameShare?recommendCode='+recommendCode,  // 分享后的链接\r\n        'isSubmit': 'Y', // 是否需要向后台提交数据，Y需要，N不需要\r\n        'sharePage': 'gameShare' // 分享的页面\r\n    };\r\n    let dataStr = JSON.stringify(dataObj);  // json数组转换成json对象\r\n    return dataStr;\r\n}\r\n\r\n//数据初始化\r\nfunction dataInit() {\r\n    $.ajax({\r\n        url:'/fanbei-web/initGame.htm',\r\n        type:'post',\r\n        success:function (data) {\r\n            data=eval('(' + data + ')');\r\n            console.log(data);\r\n            if(data.success){\r\n                isLogin=data.data.isLogin;\r\n                chanceCount=data.data.chanceCount;\r\n                clientRate=data.data.clientRate||100;\r\n                recommendCode=data.data.recommendCode;\r\n                //抽奖次数显示,抽奖码获取\r\n                if(isLogin=='N'){\r\n                    $('#chance').html('您还有3次机会');\r\n                }else{\r\n                    $('#chance').html('您还有'+data.data.chanceCount+'次机会');\r\n                }\r\n                if(data.data.chanceCodes){\r\n                    chance=data.data.chanceCodes.split(',');\r\n                    for(var i = 0;i<chance.length;i++){\r\n                        if(chance[i]==''||chance[i]==null||typeof(chance[i])==undefined){\r\n                            chance.splice(i,1);\r\n                            i=i-1;\r\n                        }\r\n                    }\r\n                }else{chance=[]}\r\n\r\n                //底部娃娃数量显示\r\n                if(data.data.item1Count>0){\r\n                    $('#toys').find('img').eq(0).attr('src','https://fs.51fanbei.com/h5/app/activity/06/ni_boll1.png');\r\n                    $('#toys').find('span').eq(0).html(data.data.item1Count)\r\n                }\r\n                if(data.data.item2Count>0){\r\n                    $('#toys').find('img').eq(1).attr('src','https://fs.51fanbei.com/h5/app/activity/06/ni_boll2.png');\r\n                    $('#toys').find('span').eq(1).html(data.data.item2Count)\r\n                }\r\n                if(data.data.item3Count>0){\r\n                    $('#toys').find('img').eq(2).attr('src','https://fs.51fanbei.com/h5/app/activity/06/ni_boll3.png');\r\n                    $('#toys').find('span').eq(2).html(data.data.item3Count)\r\n                }\r\n                if(data.data.item4Count>0){\r\n                    $('#toys').find('img').eq(3).attr('src','https://fs.51fanbei.com/h5/app/activity/06/ni_boll4.png');\r\n                    $('#toys').find('span').eq(3).html(data.data.item4Count)\r\n                }\r\n                if(data.data.item5Count>0){\r\n                    $('#toys').find('img').eq(4).attr('src','https://fs.51fanbei.com/h5/app/activity/06/ni_boll5.png');\r\n                    $('#toys').find('span').eq(4).html(data.data.item5Count)\r\n                }\r\n\r\n                //娃娃中奖信息循环\r\n                {\r\n                    let con='';\r\n                    for(let i=0;i<data.data.awardList.length;i++){\r\n                        con+=`<li>\r\n                <div class=\"personImg\" style=\"background-image:url('${data.data.awardList[i].avatar}')\"></div>\r\n                <h2><span>${data.data.awardList[i].userName}</span><span>${data.data.awardList[i].msg}</span></h2></li>`\r\n                    }$('.awardList').html(con);\r\n                }\r\n\r\n                //实物中奖信息循环\r\n                {\r\n                    let con='';\r\n                    for(let i=0;i<data.data.entityAwardList.length;i++){\r\n                        con+=`<li>\r\n                <div class=\"personImg\" style=\"background-image:url('${data.data.entityAwardList[i].avatar}')\"></div>\r\n                <h2><span>${data.data.entityAwardList[i].userName}</span><span>${data.data.entityAwardList[i].msg}</span></h2></li>`}\r\n                    $('.entityAwardList').html(con);\r\n                }\r\n\r\n                //如果有人中实物大奖，就显示中奖滚轮\r\n                if(data.data.entityAwardList.length>0){\r\n                    $('#getPrize h6').hide();\r\n                    $('#getPrize h4').html('618活动抽奖获奖名单');\r\n                    $('#dollRoll').show();\r\n                }\r\n                //是否集齐五娃\r\n                if(data.data.isFinish=='Y'){\r\n                    $('#allToy').find('h3').html('五娃已集齐，请静等开奖！');\r\n                        //五娃是否中奖\r\n                        if (data.data.isAward == 'N') {\r\n                            //开奖时间\r\n                            if(data.data.gmtOpen>0) {\r\n                                let time = 0,hours01, hours02, minutes01, minutes02, seconds01, seconds02;\r\n                                let starTime=setInterval(function () {\r\n                                    time += 1000;\r\n                                    let leftTime = data.data.gmtOpen - data.data.gmtCurrent - time;\r\n                                    let leftsecond = parseInt(leftTime / 1000);\r\n                                    let hours = parseInt(leftsecond / 3600);\r\n                                    let minutes = parseInt((leftsecond % 3600) / 60);\r\n                                    let seconds = (leftsecond % 3600) % 60;\r\n\r\n                                    if (hours < 10) {\r\n                                        hours01 = '0';\r\n                                        hours02 = hours;\r\n                                    } else {\r\n                                        hours = hours.toString();\r\n                                        hours01 = hours.slice(0, 1);\r\n                                        hours02 = hours.slice(1, 2);\r\n\r\n                                    }\r\n                                    if (minutes < 10) {\r\n                                        minutes01 = '0';\r\n                                        minutes02 = minutes;\r\n                                    } else {\r\n                                        minutes = minutes.toString();\r\n                                        minutes01 = minutes.slice(0, 1);\r\n                                        minutes02 = minutes.slice(1, 2);\r\n\r\n                                    }\r\n                                    if (seconds < 10) {\r\n                                        seconds01 = '0';\r\n                                        seconds02 = seconds;\r\n                                    } else {\r\n                                        seconds = seconds.toString();\r\n                                        seconds01 = seconds.slice(0, 1);\r\n                                        seconds02 = seconds.slice(1, 2);\r\n\r\n                                    }\r\n                                    //console.log(hours01+hours02+minutes01+minutes02+seconds01+seconds02)\r\n                                    $('.countDown').find('span').eq(0).html(hours01);\r\n                                    $('.countDown').find('span').eq(1).html(hours02);\r\n                                    $('.countDown').find('span').eq(3).html(minutes01);\r\n                                    $('.countDown').find('span').eq(4).html(minutes02);\r\n                                    $('.countDown').find('span').eq(6).html(seconds01);\r\n                                    $('.countDown').find('span').eq(7).html(seconds02);\r\n                                }, 1000);\r\n                                //如果倒计时到0\r\n                            if(hours01<=0&&hours02<=0&&minutes01<=0&&minutes02<=0&&seconds01<=0&&seconds02<=0){\r\n                                clearInterval(starTime);\r\n                                $('#getPrize h5').html('正在抽取大奖中...');\r\n                            }else{\r\n                                if(data.data.gmtOpen>1497751200000){\r\n                                    $('#getPrize h4').html('很遗憾，您暂未中奖，请静等下一波！');\r\n                                }\r\n                                $('#getPrize h5').html('开奖倒计时');\r\n                                $('.countDown').show()\r\n                            }\r\n\r\n                        }\r\n                        } else {\r\n                            if (data.data.awardInfo.type == 'G') {\r\n                                $('#getPrize h4').html('恭喜您获得幸运大奖！');\r\n                                $('#getPrize h5').html('奖项已发送至:我的-抵用券');\r\n                            } else if (data.data.awardInfo.type == 'E') {\r\n                                $('#getPrize h4').html('恭喜您获得实物大奖！');\r\n                                if (data.data.awardInfo.isSubmitContacts == 'Y') {\r\n                                    $('#getPrize h5').html('奖项已发送至您的收货地址');\r\n                                } else {\r\n                                    $('#getPrize h5').html('<a href=\"personInfo?url='+data.data.awardInfo.awardIcon+'\">请提交资料</a>');\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                }\r\n            }else{\r\n                requestMsg('初始化失败');\r\n            }\r\n        }\r\n    });\r\n}\r\ndataInit();\r\n\r\n//游戏\r\nclass game{\r\n    constructor(width,time){\r\n        this.init={num:-(width),time:time};\r\n        this.num=-(width);\r\n        this.time=time;\r\n        $('#playBtn').click(this.claw.bind(this));\r\n\r\n    }\r\n    start(){\r\n        let self=this;\r\n        this.reset();\r\n        this.doll();\r\n        clearInterval(this.startMove);\r\n        this.startMove=setInterval(function (){\r\n            if(self.num>=0){\r\n                self.num=-8.25;\r\n                $('#scroll').animate({marginLeft:self.num+'rem'},0,'linear');\r\n            }\r\n            self.num=(Math.round(self.num*1000)+1650)/1000;    //避免浮点数错误\r\n            $('#scroll').animate({marginLeft:self.num+'rem'},1000,'linear');\r\n        },1000);\r\n        clearTimeout(this.Countdown);\r\n        this.Countdown=setTimeout(function(){                             //结束倒计时\r\n            if(isShow!='No'){\r\n                self.alertMsg('end');\r\n            }\r\n        },20000);\r\n        setTimeout(function(){                             //结束倒计时\r\n            $('.modelPic').hide();\r\n        },1000);\r\n\r\n    }\r\n    reset(){\r\n        $('#scroll').animate({marginLeft:this.init.num+'rem'},0,'linear');\r\n        $('#claw').css('backgroundImage','url(https://fs.51fanbei.com/h5/app/activity/06/ni_claw1.png)');  //还原钩子\r\n        this.num=this.init.num;\r\n        this.time=this.init.time;\r\n        clearInterval(this.timeStart);\r\n        this.timeStart=setInterval(function () {\r\n            (this.time<=0)?this.time=0:this.time-=1;\r\n            $('#time').html(this.time+'秒');\r\n        }.bind(this),1000);\r\n    }\r\n    doll(){\r\n        let dollNum=[1,2,3,4,5,1,2,3,4,5];\r\n        let con='';\r\n        for(let i=0;i<dollNum.length;i++){\r\n            con+=`<span data-prop=\"${dollNum[i]}\" class=\"doll\"><div class=\"doll-main\" style=\"background-image: url('https://fs.51fanbei.com/h5/app/activity/06/ni_boll${dollNum[i]}.png')\"></div></span>`\r\n        }\r\n        $('#scroll').html(con)\r\n    }\r\n    alertMsg(state,item){\r\n        isShow='No';\r\n        let data={result:'N',code:chance[0]};\r\n        if(state=='end'){\r\n            $('.getState').html('抓取失败');\r\n        }\r\n       if(state=='claw'){\r\n            data={result:'Y',item:item,code:chance[0]};\r\n           $('.getState').html('抓取成功');\r\n       }\r\n        $.ajax({\r\n            url:'/fanbei-web/submitGameResult',\r\n            type:'post',\r\n            data:data,\r\n            success:function (data) {\r\n                data=eval('(' + data + ')');\r\n                $('.ad').hide();\r\n                if(data.data.lotteryResult=='Y'){\r\n\r\n                  // if(data.data.awardType=='CASH'){\r\n\r\n                        $('.getCashPrize').html('获得'+data.data.amount+'元').show();\r\n                        $('.getCashCoupon').show();\r\n                    // }else{\r\n                        // $('.limitMoney').html(data.data.limitAmount);\r\n                        // $('.limitDate').html(formatDate(data.data.gmtEnd));\r\n                        // $('.getCashPrize').show().html('获得'+data.data.amount+'元');\r\n                        //\r\n                        // $('.getCashCoupon').show();\r\n                    // }\r\n\r\n                }else{\r\n                    $('.jushuo').show();\r\n                }\r\n                $('.tryAgain').html('再抓一次');\r\n                $('#alert').show();\r\n                $('#shadow').show();\r\n                $('.tryAgain').click(function () {\r\n                    $('#shadow').hide();\r\n                    $('.alert').hide();\r\n                });\r\n                dataInit();\r\n            }\r\n        });\r\n        $('#startBtn').show();\r\n        $('.modelPic').show();\r\n    }\r\n    claw(){\r\n        let self=this;\r\n        let clawLeft=$('#claw').offset().left;\r\n        $('.button').attr('disabled','disabled');\r\n        $('#claw').animate({top:'-.5rem'},1500,function () {          //钩子下落\r\n            $('.doll').each(function () {\r\n                let doll=$(this);\r\n                let dollLeft=doll.offset().left;\r\n                if(dollLeft>(clawLeft-10) && dollLeft<(clawLeft+35)){          //判断钩子与娃娃是否重合，减的越大越偏右\r\n                    let dataProp=doll.attr('data-prop');\r\n                    if(Math.floor(Math.random()*100+1)<clientRate){                 //随机能否抓到娃娃\r\n                        $('#claw').css('backgroundImage','url(https://fs.51fanbei.com/h5/app/activity/06/ni_claw2.png)'); //钩子变为收缩样式\r\n                        doll.find('.doll-main').css({position:'absolute',left:'2.47rem'})       //娃娃脱离文档流并跟着上升\r\n                            .animate({top:'-2.2rem'},800,function () {\r\n                                $('.doll[data-prop='+dataProp+']').css('visibility','hidden');\r\n                                self.alertMsg('claw',dataProp);\r\n                            })\r\n                    }\r\n                }\r\n            });\r\n            $('#claw').animate({top:'-2rem'},1000,function () {                 //钩子回升\r\n                $('.button').removeAttr('disabled');\r\n            });\r\n        })\r\n    }\r\n}\r\nlet sixGame= new game(16.5,20);\r\nsixGame.doll();\r\n$('#startBtn').click(function () {\r\n    isShow='yes';\r\n    $('.play').animate({top:'7.1rem'},200,function () {\r\n        $('.play').animate({top:'7.08rem'},150)\r\n    });\r\n    if(isLogin=='Y'){         //是否登录\r\n        if(chanceCount<1){              //否是 有机会\r\n            $('.ad').hide();\r\n            $('.getState').html('机会用完啦').show();\r\n            $('.jushuo').show();\r\n            $('.tryAgain').html('分享增加1次机会').click(function () {\r\n                window.location.href = '/fanbei-web/opennative?name=APP_SHARE&params={\"shareAppTitle\":\"引爆年中抓娃娃，100％中大奖\",\"shareAppContent\":\"抓娃娃次数无上限100％中奖，集齐5娃，平分1亿大奖，最高888红包雨在等你，有且只在51返呗！\",\"shareAppImage\":\"https://fs.51fanbei.com/h5/common/icon/midyearCorner.png\",\"shareAppUrl\":\"'+urlHost+'/fanbei-web/activity/gameShare?recommendCode='+recommendCode+'\",\"isSubmit\":\"Y\",\"sharePage\":\"gameShare\"}';\r\n            });\r\n            $('#alert').show();\r\n            $('#shadow').show();\r\n        }else{\r\n            sixGame.start();\r\n            $(this).hide();\r\n            console.log(chance)\r\n        }\r\n    }else{\r\n        window.location.href = '/fanbei-web/opennative?name=APP_LOGIN';\r\n    }\r\n\r\n});\r\n//阴影点击\r\n$('#shadow').click(function () {\r\n    $(this).hide();\r\n    $('.alert').hide()\r\n\r\n\r\n});\r\n// function loginSuccess(obj) {\r\n//     dataInit();\r\n//     $('#startBtn').html(isLogin);\r\n//     window.location.href='DragonBoat'\r\n// }\r\n//\r\n\r\n\r\n//--------------------------------------yun--------------------------------------------\r\n//活动规则\r\n$('#rule').click(function(){\r\n    $('#rules').css('display','block');\r\n    $('#shadow').show();\r\n})\r\n$('.closeRules').click(function(){\r\n    $('#rules').css('display','none');\r\n    $('#shadow').hide();\r\n})\r\n\r\n\r\n\r\n\r\n//滚轮事件\r\nfunction AutoScroll(obj,x) {\r\n    $(obj).find(\"ul:first\").animate({\r\n        marginTop: x\r\n    },\r\n    500,\r\n    function() {\r\n        $(this).css({\r\n            marginTop: \"0\"\r\n        }).find(\"li:first\").appendTo(this);\r\n    });\r\n}\r\n$(document).ready(function() {\r\n    setInterval('AutoScroll(\".roll01\",\"-1rem\")', 1000);\r\n    setInterval('AutoScroll(\".roll02\",\"-.55rem\")', 1000);\r\n});\r\n\r\n\r\n// if(活动为开始时点击立即抓取 活动时间提示出现)\r\nfunction goUp(){\r\n     $('#shadow').css('display','block');\r\n     $('#getPrize').slideDown();\r\n     $('#allToy').css('z-index',300);\r\n     $('#allToy .gotoTop').css('transform','rotate(180deg)');\r\n}\r\nfunction goDown(){\r\n     $('#shadow').css('display','none');\r\n     $('#getPrize').slideUp();\r\n     $('#allToy').css('z-index',150);\r\n     $('#allToy .gotoTop').css('transform','rotate(0deg)');\r\n}\r\n$(function(){\r\n    //箭头点击事件\r\n    var onoff=1; //加上开关\r\n    $('#allToy .gotoTop').click(function(){\r\n       if(onoff==1){\r\n       goUp();\r\n       onoff=0;\r\n       } else {\r\n       goDown();\r\n       onoff=1;\r\n       }\r\n    })\r\n    //蒙版点击事件\r\n    $('#shadow').click(function(){\r\n       goDown()\r\n       onoff=1;\r\n    })\r\n\r\n});\r\n"]}