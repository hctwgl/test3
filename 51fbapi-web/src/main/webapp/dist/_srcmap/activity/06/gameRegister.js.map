{"version":3,"sources":["activity/06/gameRegister.js"],"names":["formatDateTime","date","Date","y","getFullYear","m","getMonth","getDate","d","second","getSeconds","getHours","getMinutes","gou","$","is","show","hide","token","Math","random","toString","substr","_fmOpt","partner","appName","cimg","Image","onload","imgLoaded","src","document","location","protocol","createElement","fm","async","getTime","toFixed","s","getElementsByTagName","parentNode","insertBefore","on","this","next","self","val","timerS","timerInterval","text","click","phone","test","ajax","url","type","dataType","mobile","returnData","setInterval","timeFunction","requestMsg","recommendCode","getUrl","password","password_md5","String","MD5","passwordLength","length","pwdReg","ispassword","code","data","registerMobile","smsCode","msg","window"],"mappings":"YAGA,SAASA,kBAAT,GAAAC,GAASD,GAAAA,MACDC,EAAAA,EAAWC,cACXC,EAAIF,EAAKG,WAAb,CACAC,GAAIA,EAAIJ,GAAKK,IAALD,EAARA,CACAA,IAAIA,GAAAJ,EAAUM,SAKd,OAJAC,GAAIA,EAAIP,GAAKM,IAAbC,EAAAA,EAIIC,EAASR,EAAKS,EAHdT,EAAUU,WACDA,EAAAA,aACAV,EAAKW,aAmCtB,QAASC,OAATC,EAASD,gBAAME,GAAA,YACXD,EAAIA,QAAEE,OAANF,EAEE,QAAAG,OAhDN,GAAIC,OAAQlB,iBAAiBmB,KAAKC,SAASC,SAAS,IAAIC,OAAO,GAe3DC,QACJ,WACEA,QACEA,QAAS,UACJC,QAAS,cACTC,MAASP,MAFd,IAAAQ,GAAA,GAAAC,OAAA,EAAA,EAKCD,GAAIA,OAAWC,WACVC,OAASC,WAAW,GAAzBH,EAAAI,KAAA,UAAAC,SAAAC,SAAAC,SAAA,WAAA,WAAA,kFAAAV,OAAAL,KAGAQ,IAAKI,GAAOC,SAAAG,cAAqBF,SAASC,GAAAA,KAAW,kBAA1CE,EAAAC,OAAmE,EAC9ED,EAAIA,KAAKJ,UAASG,SAAcF,SAAWG,SAAU,WAAA,WAAmB,2CAAA,GAAAjC,OAAAmC,UAAA,MAAAC,QAAA,EACrER,IAAHS,GAAUR,SAAAS,qBAA8BP,UAAW,EAAAM,GAAAE,WAAaC,aAAaP,EAAAI,MAKlFzB,EAAA,UAAA6B,GAAA,UAAA,WACA7B,EAAE8B,MAAAC,OAAa5B,SAEdH,EAFD,UAAA6B,GAAA,QAAA,WAGE,GAAAG,GAAUH,EAAGC,KACF,KAALE,EAAAA,OACDA,EAAKC,OAAO/B,SAanBF,EAAA,WAGC,QAAIkC,KACJA,IAAyBA,GAAA,GAClBA,EAAAA,SAAAA,OACIA,cAAWC,GACXD,EAAS/B,KAEX+B,EAAAA,SAAAhC,OACKF,EAAA,UAAAoC,KAAAF,EAAA,OATflC,GAAEmC,GACDD,EAAIC,EAYHnC,GAAA,YAAAqC,MAAA,WAGA,GAAIC,GAAQtC,EAAE,UAAUiC,KADvB,wBAAkBM,KAAUD,GAAEtC,EAAAwC,MAC/BC,IAAIH,+BACJI,KAAI,OACC1C,SAAO,OACPyC,MACAC,OAAMJ,EACNK,MAAAA,OAECC,QAAAA,SADKC,GAELzC,EAAOA,SANDJ,EAAA,SAAAE,OAQEF,EAAA,UAAS6C,KAAAA,EAAW,KACxBA,EAAJC,YAAwBC,EAAA,MAER/C,WAAE6C,EAAeX,MAGhCc,MAAAA,WACAA,WAAA,WAIDA,WAAA,eAKNhD,EA3BD,WAAAqC,MAAA,WA+BO,GAAIY,GAAgBC,OAAO,iBADHZ,EAAAtC,EAAA,UAAAiC,MACpBgB,EAAAA,EAAAA,SAAgBC,MAIhBC,EAAWnD,EAAE,aAAaiC,MAD9BmB,EAAaC,OAASpB,SAAtBqB,IAAAH,IACAI,EAAiBJ,EAAFK,OAGrBC,EAAIF,oCAIAG,EAAaD,EAAOlB,KAAKY,EAA7B,wBAAwBZ,KAAKY,GAIf,IAARQ,EADHD,GAAA,GAAAH,GAAmC,GAAEvD,EAAA,gBAAAC,GAAA,YACvCD,EAAAwC,MAAoBC,IAAA,2BACnBC,KAAKgB,OAA4Cf,SAAA,OAChDiB,MAAwCC,eAAAvB,EACvCtC,QAAEwC,EACDC,SAAAA,EACAC,cAAMO,EACNN,MAAAA,OAECkB,QAAAA,SAAAA,GACAC,EAAAA,SACAX,EAAAA,WAAAA,IAAUC,SACVH,OAAAA,SAAAA,KAAeA,EAAAA,KAJVD,WAJAH,EAAAkB,MAaJ/D,MAAAA,WACAgE,WAAAA,WAIDhB,WAlBK,sBAqBLA,WAAA,0BAGFA,WAAAA,UAGDA,WAAAA","file":"../../../activity/06/gameRegister.js","sourcesContent":["\r\nvar token = formatDateTime()+Math.random().toString(36).substr(2);\r\n\r\nfunction formatDateTime() {    \r\n    var date = new Date();  \r\n    var y = date.getFullYear();    \r\n    var m = date.getMonth() + 1;    \r\n    m = m < 10 ? ('0' + m) : m;    \r\n    var d = date.getDate();    \r\n    d = d < 10 ? ('0' + d) : d;  \r\n    var h = date.getHours();  \r\n    var minute = date.getMinutes();  \r\n    var second = date.getSeconds();\r\n    return y +  m +  d +h +minute+second;    \r\n};  \r\n\r\nvar _fmOpt;\r\n// 同盾校验编号的sessionId\r\n (function() {\r\n    _fmOpt = {\r\n         partner: 'alading',\r\n         appName: 'alading_web',\r\n         token: token\r\n     };\r\n     var cimg = new Image(1,1);\r\n     cimg.onload = function() {\r\n         _fmOpt.imgLoaded = true;\r\n     };\r\n     cimg.src = ('https:' == document.location.protocol ? 'https://' : 'http://') +\"fp.fraudmetrix.cn/fp/clear.png?partnerCode=alading&appName=alading_web&tokenId=\" + _fmOpt.token;\r\n     var fm = document.createElement('script'); fm.type = 'text/javascript'; fm.async = true;\r\n     fm.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'static.fraudmetrix.cn/fm.js?ver=0.1&t=' + (new Date().getTime()/3600000).toFixed(0);\r\n     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(fm, s);\r\n \t// alert(json.msg);\r\n })();\r\n\r\n// 根据点击显示input文字\r\n$('.input').on('keydown',function () {\r\n\t$(this).next().hide()\r\n});\r\n$('.input').on('keyup',function () {\r\n    let self=$(this);\r\n    if(self.val()==''){\r\n        self.next().show()\r\n    }\r\n});\r\n\r\nfunction gou() {\r\n    if ($(\"#input_check\").is(\":checked\")) {\r\n    \t$('.gou').show()\r\n\t}else{\r\n        $('.gou').hide()\r\n    }\r\n}\r\n\r\n// 判断手机号、接收验证码\r\n$(function(){\r\n\tvar timerInterval ;\r\n\tvar timerS = 60;\r\n\tfunction timeFunction(){ // 60s倒计时\r\n        timerS--;\r\n        if (timerS<=0) {\r\n         \t$(\".time\").hide();\r\n         \tclearInterval(timerInterval);\r\n         \ttimerS = 60;\r\n        } else {\r\n         \t$(\".time\").show();\r\n            $(\".time1\").text(timerS+\" s\");\r\n        }\r\n\t}\r\n\r\n\t$(\"#codeBtn\").click(function(){ // 获取验证码\r\n\t\tlet phone = $(\"#phone\").val();\r\n\t\tif (/^1(3|4|5|7|8)\\d{9}$/i.test(phone)){\r\n\t     \t$.ajax({\r\n    \t\t\turl: \"/app/user/getRegisterSmsCode\",\r\n    \t\t\ttype: \"POST\",\r\n    \t\t\tdataType: \"JSON\",\r\n    \t\t\tdata: {\r\n    \t\t\t\tmobile: phone,\r\n    \t\t\t\ttoken: token\r\n    \t\t\t},\r\n    \t\t\tsuccess: function(returnData){\r\n    \t\t\t\tif (returnData.success) {\r\n                        $(\".time\").show();\r\n                        $(\".time1\").text(timerS+\"s\");\r\n             \t\t\ttimerInterval = setInterval(timeFunction,1000);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\trequestMsg(returnData.msg);\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\terror: function(){\r\n\t\t      \t\trequestMsg(\"请求失败\");\r\n    \t\t\t}\r\n    \t\t})\r\n\t\t} else{\r\n\t  \t\trequestMsg(\"请填写正确的手机号\");\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t$(\"#submit\").click(function(){ // 完成注册提交\r\n        let recommendCode = getUrl(\"recommendCode\");\r\n\r\n        let phone = $(\"#phone\").val();\r\n        let code = $(\"#code\").val();\r\n        let password = $(\"#password\").val();\r\n        // md5加密\r\n\t\tlet password_md5 = String(CryptoJS.MD5(password));\r\n\t\tlet passwordLength = password.length;\r\n\r\n\t\t// 正则判断密码为6-18位字母+字符的组合\r\n\t\tlet pwdReg = /^(?![^a-zA-Z]+$)(?!\\\\D+$).{6,18}$/;\r\n\t\tlet ispassword = pwdReg.test(password);\r\n\r\n\r\n\t\tif(/^1(3|4|5|7|8)\\d{9}$/i.test(phone)){ // 判断电话开头\r\n\t\t\tif ( code != \"\" ) { // 验证码不能为空\r\n\t\t\t\tif ( ispassword && 6 <= passwordLength <= 18 ) { // 密码6-18位\r\n\t\t\t\t\tif ($(\"#input_check\").is(\":checked\")) { // 判断当前是否选中\r\n\t\t\t\t\t\t$.ajax({ // 设置登录密码\r\n\t\t\t\t\t\t\turl: \"/app/user/commitRegister\",\r\n\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\tdataType: 'JSON',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tregisterMobile: phone,\r\n\t\t\t\t\t\t\t\tsmsCode: code,\r\n\t\t\t\t\t\t\t\tpassword: password_md5,\r\n\t\t\t\t\t\t\t\trecommendCode: recommendCode,\r\n\t\t\t\t\t\t\t\ttoken:token\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: function(returnData){\r\n\t\t\t\t\t\t\t\tif ( returnData.success ) {\r\n\t\t\t\t\t\t\t\t\t$(\"#submit\").off(\"click\");\r\n\t\t\t\t\t\t\t\t\twindow.location.href = returnData.url;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\trequestMsg(returnData.msg);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terror: function(){\r\n\t\t\t\t\t\t\t\trequestMsg(\"注册失败\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trequestMsg(\"请阅读并同意《51返呗用户注册协议》\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\trequestMsg(\"请填写6-18位的数字、字母、字符组成的密码\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\trequestMsg(\"请输入验证码\");\r\n\t\t\t}\r\n\t\t} else{\r\n\t\t\trequestMsg(\"请填写正确的手机号\");\r\n\t\t}\r\n\t});\r\n});\r\n\r\n"]}