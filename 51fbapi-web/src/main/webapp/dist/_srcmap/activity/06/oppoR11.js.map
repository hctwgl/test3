{"version":3,"sources":["activity/06/oppoR11.js"],"names":["alaShareData","dataObj","type","shareAppTitle","shareAppContent","shareAppImage","shareAppUrl","domainName","isSubmit","sharePage","JSON","stringify","addMobileListModel","goodsList","notifyUrl","html","length","i","goodsIcon","goodsName","saleAmount","numId","getBlatFrom","ver","getInfo","appVersion","privateGoodsId","goodsId","getUrl","oppoR11Share","click","layer","open","content","attr","btn","location","href","$","on","remark","page","userName","window","onload","ajax","url","dataType","data","success","isHaveReservationRecord","returnData","error","css","reload","showTimerS","diff","day","hour","minute","second","floor","Math","endDate","Date","valueOf","now","differStamp","endStamp","nowTimeStamp","intDiff","setInterval","Vue","el","show","bannerlist","methods","btnBox","requestMsg","msg","mobilePopup","removeClass","addClass","close","e","this","splice","pageNo","append"],"mappings":"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","file":"../../../activity/06/oppoR11.js","sourcesContent":["\r\nlet userName = \"\";\r\nif(getInfo().userName){\r\n    userName=getInfo().userName;\r\n};\r\n\r\n// 获取网站的域名\r\nlet domainName = domainName();\r\n\r\n// app调用web的方法\r\nfunction alaShareData(){\r\n    // 分享内容\r\n    let dataObj = {\r\n        'appLogin': 'N', // 是否需要登录，Y需要，N不需要\r\n        'type': 'share', // 此页面的类型\r\n        'shareAppTitle': 'OPPO R11预约返利300福利',  // 分享的title\r\n        'shareAppContent': 'OPPO R11全明星首发，疯陪到底！0元预约享12期分期免息，更有超级返利300福利！有，且只在51返呗 GO>>>',  // 分享的内容\r\n        'shareAppImage': 'https://fs.51fanbei.com/h5/common/icon/midyearCorner.png',  // 分享右边小图\r\n        'shareAppUrl': domainName+'/fanbei-web/activity/oppoR11?oppoR11Share=oppoR11Share',  // 分享后的链接\r\n        'isSubmit': 'N', // 是否需要向后台提交数据，Y需要，N不需要\r\n        'sharePage': 'oppoR11' // 分享的页面\r\n    };\r\n    let dataStr = JSON.stringify(dataObj);  // json数组转换成json对象\r\n    return dataStr;\r\n};\r\n\r\n// 初始化页面\r\nwindow.onload=function(){\r\n    $.ajax({\r\n        url: \"/app/activity/reserveActivityInfo\",\r\n        type: \"POST\",\r\n        dataType: \"JSON\",\r\n        data: {userName: userName},\r\n        success: function(returnData){\r\n            if (returnData.data.isHaveReservationRecord == \"Y\") {\r\n                $(\"#btn\").attr('src', 'https://fs.51fanbei.com/h5/app/activity/06/oppo2_2.png');\r\n            }\r\n        },\r\n        error: function(){\r\n            requestMsg(\"请求失败\");\r\n        }\r\n    });\r\n}\r\n\r\n// 弹窗\r\n$('.mask').click(function(){\r\n    $('.mask').css('display','none');\r\n    $('.orderSuccess').css('display','none');\r\n    window.location.reload();\r\n});\r\n$('.close').click(function(){\r\n    $('.mask').css('display','none');\r\n    $('.orderSuccess').css('display','none');\r\n    window.location.reload();\r\n});\r\n\r\n// 倒计时\r\n$(function(){\r\n    // 结束时间的时间戳\r\n    let endDate = new Date(\"June 22,2017 10:00:00\")\r\n    let endStamp = endDate.valueOf();\r\n    // 获取当前时间的时间戳\r\n    let now = new Date();\r\n    let nowTimeStamp = now.valueOf();\r\n    // 相差的时间戳\r\n    let differStamp = endStamp - nowTimeStamp;\r\n    let intDiff = parseInt(differStamp/1000);//倒计时总秒数量\r\n\r\n    function showTimerS( diff ){\r\n        var day=0,\r\n        hour=0,\r\n        minute=0,\r\n        second=0;//时间默认值\r\n\r\n        if(diff > 0){\r\n            day = Math.floor(diff / (60 * 60 * 24));\r\n            hour = Math.floor(diff / (60 * 60)) - (day * 24);\r\n            minute = Math.floor(diff / 60) - (day * 24 * 60) - (hour * 60);\r\n            second = Math.floor(diff) - (day * 24 * 60 * 60) - (hour * 60 * 60) - (minute * 60);\r\n        }\r\n\r\n        if (minute <= 9) minute = '0' + minute;\r\n        if (second <= 9) second = '0' + second;\r\n        $('#day_show').html(day+\"天\");\r\n        $('#hour_show').html('<s id=\"h\"></s>'+hour+'时');\r\n        $('#minute_show').html('<s></s>'+minute+'分');\r\n        $('#second_show').html('<s></s>'+second+'秒');\r\n    };\r\n\r\n    function timer(intDiff){\r\n        showTimerS(intDiff);\r\n        intDiff--;\r\n        window.setInterval(function(){\r\n            showTimerS(intDiff);\r\n            intDiff--;\r\n        }, 1000);\r\n    };\r\n    timer(intDiff);\r\n});\r\n\r\n// 点击手机弹窗\r\nnew Vue({\r\n    el: '#oppoR11',\r\n    data: {\r\n        show: [true,false,false,false,],\r\n        bannerlist: 'https://fs.51fanbei.com/h5/app/activity/06/oppo12_31.png',\r\n        url: 'https://app.51fanbei.com/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={\"privateGoodsId\":\"120751\"}',\r\n        content: '¥2999 日供 ¥8.2起'\r\n    },\r\n    methods:{\r\n        btnBox: function(){\r\n            $.ajax({\r\n                url: '/app/activity/reserveActivityGoods',\r\n                dataType:'json',\r\n                data:{'userName':userName},\r\n                type: 'post',\r\n                success:function (data) {\r\n                    if(data.success){\r\n                        $('.mask').css('display','block');\r\n                        $('.orderSuccess').css('display','block');\r\n                    }else{\r\n                        if(data.url){\r\n                            location.href=data.url;\r\n                        }else{\r\n                            requestMsg(data.msg);\r\n                        }\r\n                    }\r\n                },\r\n                error: function(){\r\n                    requestMsg(\"请求失败\");\r\n                }\r\n            });\r\n        },\r\n        mobilePopup: function(){ // 显示手机弹窗\r\n            $('.popupBox').removeClass('hide');\r\n            $('.popup').removeClass('hide');\r\n        },\r\n        close: function(){ // 关闭手机弹窗\r\n            $('.popupBox').addClass('hide');\r\n            $('.popup').addClass('hide');\r\n        },\r\n        oppoR11List(e){\r\n            for(let i=0;i<this.show.length;i++){\r\n                this.show.splice(i, 1, false);  // 其他的为false\r\n            }\r\n            this.show.splice(e-1, 1, true);  // 点击当前的为true\r\n\r\n            // 手机的bannerlist\r\n            this.bannerlist=\"https://fs.51fanbei.com/h5/app/activity/06/oppo12_3\"+e+\".png\";\r\n\r\n            // 手机的privateGoodsId\r\n            let privateGoodsId=[120751,120790,120791,120792];\r\n            let notifyUrl = \"https://app.51fanbei.com/fanbei-web/opennative?name=GOODS_DETAIL_INFO\";\r\n            this.url=notifyUrl+'&params={\"privateGoodsId\":\"'+privateGoodsId[e-1]+'\"}';  // a链接的url\r\n\r\n            // 手机的分期的文案\r\n            let content=['¥2999 日供 ¥8.2起','¥2999 日供 ¥8.2起','¥2999 日供 ¥8.2起','¥3199 日供 ¥8.7起'];\r\n            this.content=content[e-1];\r\n        }\r\n    }\r\n});\r\n\r\n// mobileList手机列表\r\nfunction addMobileListModel(goodsList,notifyUrl) {\r\n\r\n    let html = '';\r\n        for (let i = 0; i < goodsList.length; i++) {\r\n        // let privateGoodsId = notifyUrl + '&params={\"privateGoodsId\":\"'+goodsList[i].goodsId+'\"}';\r\n        let goodsIcon = goodsList[i].goodsIcon;\r\n        let goodsName = goodsList[i].goodsName;\r\n        let saleAmount = goodsList[i].saleAmount;\r\n        let remark = goodsList[i].remark;\r\n        let numId = goodsList[i].numId;\r\n\r\n        // 判断android和ios的版本 给出相应的链接\r\n        let privateGoodsId='';\r\n        if (getBlatFrom()==2){\r\n            var ver=getInfo().appVersion;\r\n            if( ver&&ver < 365 ){\r\n                privateGoodsId = notifyUrl + '&params={\"goodsId\":\"'+goodsList[i].goodsId+'\"}';\r\n            }else {\r\n                privateGoodsId = notifyUrl + '&params={\"privateGoodsId\":\"'+goodsList[i].goodsId+'\"}';\r\n            }\r\n        }else{\r\n            privateGoodsId = notifyUrl + '&params={\"privateGoodsId\":\"'+goodsList[i].goodsId+'\"}';\r\n        }\r\n\r\n        // 锁定分享后的页面\r\n        let oppoR11Share = getUrl(\"oppoR11Share\");\r\n        if (oppoR11Share == \"oppoR11Share\") {\r\n            // 立即购买按钮\r\n            $(\"#oppoR11Btn\").attr('href', 'javascript:void(0);');\r\n            $(\"#oppoR11Btn\").click(function() {\r\n                layer.open({\r\n                    content: '享12期免息500元福利<br/>有且只在51返呗',\r\n                    btn: ['确认', '取消'],\r\n                    yes: function(){\r\n                        window.location.href=\"http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www\";\r\n                    }\r\n                });\r\n            });\r\n\r\n            // 列表的弹窗\r\n            privateGoodsId = \"javascript:void(0);\";\r\n            $('#mobileList').on('click','li',function() {\r\n                layer.open({\r\n                    content: '享12期免息500元福利<br/>有且只在51返呗',\r\n                    btn: ['确认', '取消'],\r\n                    yes: function(){\r\n                        window.location.href=\"http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www\";\r\n                    }\r\n                });\r\n            });\r\n        };\r\n\r\n        html+=`<li>\r\n                <a href='${privateGoodsId}'>\r\n                  <img src=\"${goodsIcon}\">\r\n                  <div class=\"mobileListContent\">\r\n                    <p><i></i>${goodsName}</p>\r\n                    <span>¥${saleAmount}</span>\r\n                    <span>${remark}</span>\r\n                  </div>\r\n                </a>\r\n              </li>`;\r\n    }\r\n    return html;\r\n};\r\n\r\n// 初始化页面\r\nlet page = 0;\r\nwindow.onload=function(){\r\n    page++;\r\n    $.ajax({\r\n        url: \"/app/activity/getSelfSupportGoodsInfo\",\r\n        type: \"POST\",\r\n        dataType: \"JSON\",\r\n        data: {\r\n            pageNo: page\r\n        },\r\n        success: function(returnData){\r\n            $(\"#mobileList\").append(addMobileListModel(returnData.data.goodsList,returnData.data.notifyUrl));\r\n        },\r\n        error: function(){\r\n            requestMsg(\"请求失败\");\r\n        }\r\n    });\r\n}\r\n"]}