{"version":3,"sources":["js/user/register.js"],"names":["changeBtn","mobileNum","$","val","verificationNum","addClass","removeClass","passwordNum","attr","click","timeFunction","timerS","text","clearInterval","timerInterval","isState","this","isNaN","requestMsg","ajax","url","type","dataType","mobile","returnData","success","setInterval","error","register_password","password_md5","String","CryptoJS","MD5","passwordLength","length","password","pwdReg","test","recommendCode","is","register_verification","data","registerMobile","smsCode"],"mappings":"YASA,SAAAA,aAGC,GAAIC,GAAYC,EAAE,oBAAoBC,MAAlCF,EAAcC,EAAA,0BAAlBC,MACIC,EAAAA,EAAAA,sBAAoBD,KAGN,KAAbF,EAALC,EAAA,wBAAuBG,SAAA,qBAAvBH,EAAA,wBAEOI,YAAA,qBAIiB,IAAnBF,EAALF,EAAA,8BAA6BG,SAAA,qBAA7BH,EAAA,8BAEOI,YAAA,qBAIa,IAAfC,EAALL,EAAA,0BAAyBG,SAAA,qBAAzBH,EAAA,0BAEOI,YAAA,qBAIP,IAAAL,GAAA,IAAAG,GAAA,IAAAG,GACAL,EAAA,uBAAwBE,YAAAA,WACvBF,EAAE,uBAAuBI,KAAAA,YAAY,KADtCJ,EAAA,uBAGMM,KAAA,YAAA,GACLN,EAAE,uBAAuBM,SAAK,YAOhCN,EAAE,WAEDA,EAAE,wBAAwBO,MAAM,WAC/BP,EAAE,oBAAoBC,IAAI,IAC1BD,EAAE,wBAAwBG,SAAS,uBAGpCH,EAAE,8BAA8BO,MAAM,WACrCP,EAAE,0BAA0BC,IAAI,IAChCD,EAAE,8BAA8BG,SAAS,yBAK3CH,EAAE,WAID,QAASQ,KAAgBC,IAClBA,GAAAA,GACIA,EAAAA,qBAAWC,KAAA,SACXC,cAAFC,GACAD,EAAcC,GACdH,EAAAA,qBAAAH,KAAA,UAAA,IAEKN,EAAA,qBAAAU,KAAAD,EAAA,MATd,GAAIG,GACAH,EAAS,EAabT,GAAE,qBAAqBO,MAAM,WAAY,GAAAM,GAAAb,EAAAc,MAAAR,KAAA,WAGpCP,EAAYC,EAAE,oBAAoBC,KAAlCF,IAAAA,GAAcc,GAAAE,MAAoBd,GAGjCe,WAAA,aAAAhB,EAAEiB,MADDJ,IAAAA,+BACCI,KAAK,OACPC,SAAK,OACLC,MACAC,OAAUrB,GAETsB,QAAQtB,SAAAA,GALFuB,EAAAC,SAOPA,EAAAA,qBAAkBD,KAAAA,UAAW,GAC5BtB,EAAA,qBAAwBU,KAAAD,EAAA,MACrBG,EAAqBN,YAAvBE,EAAA,MAEOI,WAAAA,EAAgBY,MAGvBC,MAAA,WAdKT,WAAA,aAoFbhB,EAAA,uBAAAO,MAAA,WAEAP,GAAE0B,GAAuBnB,EAAAA,sBAAgBN,MAAE0B,EAAAC,OAAAC,SAAAC,IAAAJ,IAC1CK,EAAAL,EAAAM,OAGID,EAAAA,oCAIAE,EAAWC,EAAOC,KAAKT,GAAvBO,EAAWC,OAAYR,iBAE3B3B,EAAAC,EAAA,oBAAAC,MACImC,EAAuBpC,EAAA,0BAA3BC,KAEIF,GAAYC,qBAAAM,KAAA,UAKb,wBAAuB6B,KAAKpC,IAA2B,IAAbA,EAF7B,IAAZc,EAIGoB,GAAY,GAAKF,GAAkB,GAFvC/B,EAAA,gBAAAqC,GAAuBF,YAAsC,GAAAnC,EAAA,qBAAAM,KAAA,WAC1DgC,EAAAA,MAAgCpB,IAAA,2BAC/Be,KAAAA,OAA0Cb,SAAA,OAC9CmB,MAAwCC,eAAAzC,EACvC0C,QAAOH,EACJrB,SAAOU,EACRT,cAAKkB,GAELhB,QAAAA,SAHME,GAIAA,EAAAC,SACLiB,EAAAA,uBADKlC,KAAA,YAAA,GAELmC,OAAAA,SAASH,KAAAA,EAFJpB,KAILkB,WAAAA,EAAeA,MAGfX,MAAKH,WACJtB,WAAE,WAIFgB,WAAA,UAGDA,WAAAA,sBAGFA,WAAM,0BAGPA,WAAM,UAGPA,WAAI,iBAMNhB,EAAA,WAEAA,EAAA,+BAAAO,MAAA,WAUmB,YAjLtBP,EAAA,sBAAAM,KAAA,SA2KAN,EAAA,sBAAAM,KAAA,OAAA,QACEN,EAAAc,MAAAX,SAAU,0BAETH,EAAA,sBAAAM,KAAF,OAAA,YAQEN,EAAEc,MAAMV,YAAY","file":"../../../js/user/register.js","sourcesContent":["/*\r\n* @Author: yoe\r\n* @Date:   2017-02-13 16:32:52\r\n* @Last Modified by:   yoe\r\n* @Last Modified time: 2017-05-16 14:43:02\r\n* @title:  注册\r\n*/\r\n\r\n\r\n// 根据判断姓名和验证码来控制按钮的颜色\r\nfunction changeBtn() {\r\n\r\n\tvar mobileNum = $(\"#register_mobile\").val();\r\n\tvar verificationNum = $(\"#register_verification\").val();\r\n\tvar passwordNum = $(\"#register_password\").val();\r\n\r\n\tif ( mobileNum == \"\" ) {\r\n\t\t$(\".register_mobileIcon\").addClass(\"registerIcon_hide\");\r\n\t} else {\r\n\t\t$(\".register_mobileIcon\").removeClass(\"registerIcon_hide\");\r\n\t};\r\n\r\n\tif ( verificationNum == \"\" ) {\r\n\t\t$(\".register_verificationIcon\").addClass(\"registerIcon_hide\");\r\n\t} else {\r\n\t\t$(\".register_verificationIcon\").removeClass(\"registerIcon_hide\");\r\n\t};\r\n\r\n\tif ( passwordNum == \"\" ) {\r\n\t\t$(\".register_passwordIcon\").addClass(\"registerIcon_hide\");\r\n\t} else {\r\n\t\t$(\".register_passwordIcon\").removeClass(\"registerIcon_hide\");\r\n\t};\r\n\r\n\t// 默认状态下提交按钮的样式\r\n\tif ( mobileNum != \"\" && verificationNum != \"\" && passwordNum != \"\" ) {\r\n\t\t$(\".register_submitBtn\").removeClass(\"btnc_cf\");\r\n\t\t$(\".register_submitBtn\").attr(\"disabled\",false);\r\n\t} else{\r\n\t\t$(\".register_submitBtn\").attr(\"disabled\",true);\r\n\t\t$(\".register_submitBtn\").addClass(\"btnc_cf\");\r\n\t};\r\n};\r\n\r\n\r\n// 点击删除按钮清空vul\r\n$(function(){\r\n\r\n\t$(\".register_mobileIcon\").click(function(){\r\n\t\t$(\".register_mobile\").val(\"\");\r\n\t\t$(\".register_mobileIcon\").addClass(\"registerIcon_hide\");\r\n\t});\r\n\r\n\t$(\".register_verificationIcon\").click(function(){\r\n\t\t$(\".register_verification\").val(\"\");\r\n\t\t$(\".register_verificationIcon\").addClass(\"registerIcon_hide\");\r\n\t});\r\n});\r\n\r\n// 判断手机号、接收验证码\r\n$(function(){\r\n\r\n\tvar timerInterval ;\r\n\tvar timerS = 60;\r\n\tfunction timeFunction(){ // 60s倒计时\r\n        timerS--;\r\n        if (timerS<=0) {\r\n         \t$(\"#register_codeBtn\").text(\"获取验证码\");\r\n         \tclearInterval(timerInterval);\r\n         \ttimerS = 60;\r\n\t\t\t$(\"#register_codeBtn\").attr(\"isState\",0);\r\n        } else {\r\n         \t$(\"#register_codeBtn\").text(timerS+\" s\");\r\n        }\r\n\t};\r\n\r\n\t$(\"#register_codeBtn\").click(function(){ // 获取验证码\r\n\r\n\t\tvar isState = $(this).attr(\"isState\");\r\n\t\tvar mobileNum = $(\"#register_mobile\").val();\r\n\r\n\t\tif ( (isState==0 || !isState) && !isNaN(mobileNum)  ){\r\n\t     \t$.ajax({\r\n    \t\t\turl: \"/app/user/getRegisterSmsCode\",\r\n    \t\t\ttype: \"POST\",\r\n    \t\t\tdataType: \"JSON\",\r\n    \t\t\tdata: {\r\n    \t\t\t\tmobile: mobileNum\r\n    \t\t\t},\r\n    \t\t\tsuccess: function(returnData){\r\n    \t\t\t\tif (returnData.success) {\r\n    \t\t\t\t\t$(\"#register_codeBtn\").attr(\"isState\",1);\r\n\t\t\t\t\t\t$(\"#register_codeBtn\").text(timerS+\" s\");\r\n             \t\t\ttimerInterval = setInterval(timeFunction,1000);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\trequestMsg(returnData.msg);\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\terror: function(){\r\n\t\t      \t\trequestMsg(\"请求失败\");\r\n    \t\t\t}\r\n    \t\t})\r\n\t\t} else{\r\n\t  \t\trequestMsg(\"请填写正确的手机号\");\r\n\t\t}\r\n\t});\r\n\r\n\t// $(\".register_submitBtn\").click(function(){ // 完成注册提交\r\n\t//\r\n\t// \t// 从分享链接中获取code\r\n\t// \tvar recommendCode = getUrl(\"recommendCode\");\r\n\t// \tvar mobileNum = $(\"#register_mobile\").val();\r\n\t// \tvar register_verification = $(\"#register_verification\").val();\r\n\t//\r\n\t// \t// md5加密\r\n\t// \tvar register_password = $(\"#register_password\").val();\r\n\t// \tvar password_md5 = String(CryptoJS.MD5(register_password));\r\n\t// \tvar passwordLength = register_password.length;\r\n\t//\r\n\t// \t// 正则判断密码为6-18位字母+字符的组合\r\n\t// \tvar pwdReg = /^(?![^a-zA-Z]+$)(?!\\\\D+$).{6,18}$/;\r\n\t// \tvar password = pwdReg.test(register_password);\r\n\t//\r\n\t// \tif(/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum) && mobileNum != \"\" ){ // 判断电话开头\r\n\t//\r\n\t// \t\tif ( register_verification != \"\" ) { // 验证码不能为空\r\n\t//\r\n\t// \t\t\tif (  password && 6 <= passwordLength <= 18 ) { // 密码6-18位\r\n\t//\r\n\t// \t\t\t\tif ($(\"#input_check\").is(\":checked\")) { // 判断协议是否勾选\r\n\t//\r\n\t// \t\t\t\t\t$.ajax({ // 设置登录密码\r\n\t// \t\t\t\t\t\turl: \"/app/user/commitRegister\",\r\n\t// \t\t\t\t\t\ttype: 'POST',\r\n\t// \t\t\t\t\t\tdataType: 'JSON',\r\n\t// \t\t\t\t\t\tdata: {\r\n\t// \t\t\t\t\t\t\tregisterMobile: mobileNum,\r\n\t// \t\t\t\t\t\t\tsmsCode: register_verification,\r\n\t// \t\t\t\t\t\t\tpassword: password_md5,\r\n\t// \t\t\t\t\t\t\trecommendCode: recommendCode\r\n\t// \t\t\t\t\t\t},\r\n\t// \t\t\t\t\t\tsuccess: function(returnData){\r\n\t// \t\t\t\t\t\t\tif ( returnData.success ) {\r\n\t// \t\t\t\t\t\t\t\twindow.location.href = returnData.url;\r\n\t// \t\t\t\t\t\t\t} else {\r\n\t// \t\t\t\t\t\t\t\trequestMsg(returnData.msg);\r\n\t// \t\t\t\t\t\t\t}\r\n\t// \t\t\t\t\t\t},\r\n\t// \t\t\t\t\t\terror: function(){\r\n\t// \t\t\t\t\t        requestMsg(\"绑定失败\");\r\n\t// \t\t\t\t\t\t}\r\n\t// \t\t\t\t\t})\r\n\t//\r\n\t// \t\t\t\t} else {\r\n\t// \t\t\t\t\trequestMsg(\"请阅读并同意《51返呗用户注册协议》\");\r\n\t// \t\t\t\t}\r\n\t//\r\n\t// \t\t\t} else {\r\n\t// \t\t\t\trequestMsg(\"请填写6-18位的数字、字母、字符组成的密码\");\r\n\t// \t\t\t}\r\n\t// \t\t}else{\r\n\t// \t\t\trequestMsg(\"请输入验证码\");\r\n\t// \t\t}\r\n\t// \t} else{\r\n  //           requestMsg(\"请填写正确的手机号\");\r\n  //       }\r\n\t// });\r\n\r\n\t$(\".register_submitBtn\").click(function(){ // 完成注册提交\r\n\t\t// md5加密\r\n\t\tvar register_password = $(\"#register_password\").val();\r\n\t\tvar password_md5 = String(CryptoJS.MD5(register_password));\r\n\t\tvar passwordLength = register_password.length;\r\n\r\n\t\t// 正则判断密码为6-18位字母+字符的组合\r\n\t\tvar pwdReg = /^(?![^a-zA-Z]+$)(?!\\\\D+$).{6,18}$/;\r\n\t\tvar password = pwdReg.test(register_password);\r\n\r\n\t\t// 从分享链接中获取code\r\n\t\tvar recommendCode = getUrl(\"recommendCode\");\r\n\r\n\t\tvar mobileNum = $(\"#register_mobile\").val();\r\n\t\tvar register_verification = $(\"#register_verification\").val();\r\n\r\n\t\tvar isState = $(\"#register_codeBtn\").attr(\"isState\");\r\n\r\n\t\tif(/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum) && mobileNum != \"\" ){ // 判断电话开头\r\n\t\t\tif ( register_verification != \"\" ) { // 验证码不能为空\r\n\t\t\t\tif ( password && 6 <= passwordLength <= 18 ) { // 密码6-18位\r\n\t\t\t\t\tif ($(\"#input_check\").is(\":checked\")) { // 判断当前是否选中\r\n\t\t\t\t\t\tif ( $(\"#register_codeBtn\").attr(\"isState\") == 1 ) {\r\n\t\t\t\t\t\t\t$.ajax({ // 设置登录密码\r\n\t\t\t\t\t\t\t\turl: \"/app/user/commitRegister\",\r\n\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\tdataType: 'JSON',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tregisterMobile: mobileNum,\r\n\t\t\t\t\t\t\t\t\tsmsCode: register_verification,\r\n\t\t\t\t\t\t\t\t\tpassword: password_md5,\r\n\t\t\t\t\t\t\t\t\trecommendCode: recommendCode\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: function(returnData){\r\n\t\t\t\t\t\t\t\t\tif ( returnData.success ) {\r\n\t\t\t\t\t\t\t\t\t\t$(\"#register_submitBtn\").attr(\"disabled\",true);\r\n\t\t\t\t\t\t\t\t\t\twindow.location.href = returnData.url;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trequestMsg(returnData.msg);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\terror: function(){\r\n\t\t\t\t\t\t\t\t\trequestMsg(\"注册失败\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trequestMsg(\"请输入验证码\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trequestMsg(\"请阅读并同意《51返呗用户注册协议》\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\trequestMsg(\"请填写6-18位的数字、字母、字符组成的密码\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\trequestMsg(\"请输入验证码\");\r\n\t\t\t}\r\n\t\t} else{\r\n\t\t\trequestMsg(\"请填写正确的手机号\");\r\n\t\t};\r\n\t});\r\n});\r\n\r\n// 点击眼睛显示密码\r\n$(function(){\r\n\r\n\t$(\".register_passwordEyeClosed\").click(function() {\r\n\r\n\t\tvar passwordType = $(\".register_password\").attr(\"type\");\r\n\t\tif (passwordType == \"password\") {\r\n\t\t\t$(\".register_password\").attr(\"type\",\"text\");\r\n\t\t\t$(this).addClass(\"register_passwordEye\");\r\n\t\t} else {\r\n\t\t\t$(\".register_password\").attr(\"type\",\"password\");\r\n\t\t\t$(this).removeClass(\"register_passwordEye\");\r\n\t\t}\r\n\t});\r\n});\r\n"]}