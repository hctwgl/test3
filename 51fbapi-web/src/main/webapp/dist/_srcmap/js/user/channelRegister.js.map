{"version":3,"sources":["js/user/channelRegister.js"],"names":["formatDateTime","date","Date","y","getMonth","m","getFullYear","d","minute","getDate","getMinutes","getHours","token","Math","random","toString","substr","os","getBlatFrom","console","style","$","document","title","click","window","location","href","_fmOpt","partner","cimg","onload","imgLoaded","protocol","fm","createElement","type","async","getTime","toFixed","s","parentNode","insertBefore","root","_tt_config","ta","src","request","onerror","encodeURIComponent","js_url","url","web_url","open","getElementsByTagName","send","timerInterval","timerS","timeFunction","removeAttr","clearInterval","text","mobileNum","this","attr","val","channelCode","pointCode","isState","isNaN","test","ajax","dataType","data","success","returnData","msg","requestMsg","register_password","password_md5","String","CryptoJS","MD5","passwordLength","length","pwdReg","password","register_verification","is","convert_id","event_type","_taq","push","smsCode","registerMobile","removeClass"],"mappings":"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","file":"../../../js/user/channelRegister.js","sourcesContent":["/*\r\n* @Date:   2017-04-12 10:53:28\r\n*/\r\n\r\nvar token=formatDateTime()+Math.random().toString(36).substr(2);\r\n\r\nvar style=$(\"#style\").val();  // 样式\r\nvar os=getBlatFrom(); // 1是android，2是ios\r\nconsole.log(os);\r\n\r\n// 更换页面title\r\nif( style==21 ){\r\n    document.title=\"借款超人注册\";\r\n\r\n    $(\"#borrowSuperman\").click(function(){  // 更换已登陆链接\r\n        if ( os==1 ){\r\n            window.location.href=\"http://f.51fanbei.com/online/jiekuancaoren_v3.7.1.apk\";\r\n        }else if( os==2 ){\r\n            window.location.href=\"https://itunes.apple.com/cn/app/%E5%80%9F%E6%AC%BE%E8%B6%85%E4%BA%BA-%E5%85%8D%E6%81%AF%E5%B0%8F%E9%A2%9D%E5%80%9F%E8%B4%B7%E6%89%8B%E6%9C%BA%E8%BD%AF%E4%BB%B6/id1263792729?mt=8\";\r\n        }\r\n\t})\r\n}\r\n\r\n\r\nfunction formatDateTime() {\r\n    var date = new Date();\r\n    var y = date.getFullYear();\r\n    var m = date.getMonth() + 1;\r\n    m = m < 10 ? ('0' + m) : m;\r\n    var d = date.getDate();\r\n    d = d < 10 ? ('0' + d) : d;\r\n    var h = date.getHours();\r\n    var minute = date.getMinutes();\r\n    var second = date.getSeconds();\r\n    return y +  m +  d +h +minute+second;\r\n};\r\n\r\n// 同盾校验编号的sessionId\r\nvar _fmOpt;\r\n(function() {\r\n    _fmOpt = {\r\n     partner: 'alading',\r\n     appName: 'alading_web',\r\n     token: token\r\n     };\r\n     var cimg = new Image(1,1);\r\n     cimg.onload = function() {\r\n         _fmOpt.imgLoaded = true;\r\n     };\r\n     cimg.src = ('https:' == document.location.protocol ? 'https://' : 'http://') +\"fp.fraudmetrix.cn/fp/clear.png?partnerCode=alading&appName=alading_web&tokenId=\" + _fmOpt.token;\r\n     var fm = document.createElement('script'); fm.type = 'text/javascript'; fm.async = true;\r\n     fm.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'static.fraudmetrix.cn/fm.js?ver=0.1&t=' + (new Date().getTime()/3600000).toFixed(0);\r\n     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(fm, s);\r\n \t// alert(json.msg);\r\n})();\r\n\r\n// 检测流量\r\n(function (root) {\r\n    root._tt_config = true;\r\n    var ta = document.createElement('script');\r\n    ta.type = 'text/javascript';\r\n    ta.async = true;\r\n    ta.src = document.location.protocol+'//'+'s3.pstatp.com/bytecom/resource/track_log/src/toutiao-track-log.js';\r\n    ta.onerror = function () {\r\n        var request = new XMLHttpRequest();\r\n        var web_url = window.encodeURIComponent(window.location.href);\r\n        var js_url = ta.src;\r\n\r\n        if ( style==16 ) { // 钜美头条访问量\r\n            var url = '//ad.toutiao.com/link_monitor/cdn_failed?web_url=' + web_url + '&js_url=' + js_url + '&convert_id=63736236689';\r\n        } else if ( style==14 ) {\r\n            var url = '//ad.toutiao.com/link_monitor/cdn_failed?web_url='+web_url+'&js_url='+js_url+'&convert_id=62421367574';\r\n        } else {\r\n            var url = '//ad.toutiao.com/link_monitor/cdn_failed?web_url='+web_url+'&js_url='+js_url;\r\n        }\r\n        request.open('GET', url, true);\r\n        request.send(null);\r\n    }\r\n    var s = document.getElementsByTagName('script')[0];\r\n    s.parentNode.insertBefore(ta, s);\r\n})(window);\r\n\r\n\r\n// 判断手机号、接收验证码\r\n$(function(){\r\n\r\n\tvar timerInterval ;\r\n\tvar timerS = 60;\r\n\tfunction timeFunction(){ // 60s倒计时\r\n        timerS--;\r\n        if (timerS<=0) {\r\n        \t$(\"#register_codeBtn\").removeAttr(\"disabled\");\r\n         \t$(\"#register_codeBtn\").text(\"获取验证码\");\r\n         \tclearInterval(timerInterval);\r\n         \ttimerS = 60;\r\n    \t\t// $(\"#register_codeBtn\").attr(\"isState\",0);\r\n        } else {\r\n         \t$(\"#register_codeBtn\").text(timerS+\" s\");\r\n        }\r\n\t};\r\n\r\n\t// 获取验证码\r\n\t$(\"#register_codeBtn\").click(function(){\r\n\t\tvar isState = $(this).attr(\"isState\");\r\n\t\tvar mobileNum = $(\"#register_mobile\").val();\r\n\t\tvar channelCode = $(\"#channelCode\").val();\r\n\t\tvar pointCode = $(\"#pointCode\").val();\r\n\r\n\t\tif ( !isNaN(mobileNum) && (/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum)) ){  // 验证码不能为空、判断电话开头\r\n\t\t\t$(\"#register_codeBtn\").attr(\"disabled\",true);\r\n\t\t\t$.ajax({\r\n      \t\t\turl: \"/app/user/getRegisterSmsCode\",\r\n      \t\t\ttype: \"POST\",\r\n      \t\t\tdataType: \"JSON\",\r\n      \t\t\tdata: {\r\n      \t\t\t\tmobile: mobileNum,\r\n      \t\t\t\ttoken: token,\r\n\t\t\t\t\tchannelCode: channelCode,\r\n\t\t\t\t\tpointCode: pointCode\r\n      \t\t\t},\r\n      \t\t\tsuccess: function(returnData){\r\n      \t\t\t\tconsole.log(returnData);\r\n      \t\t\t\tif (returnData.success) {\r\n                        $(\"#register_codeBtn\").attr(\"isState\",1);\r\n    \t\t\t\t\t$(\"#register_codeBtn\").text(timerS+\" s\");\r\n               \t        timerInterval = setInterval(timeFunction,1000);\r\n      \t\t\t\t} else {\r\n      \t\t\t\t\trequestMsg(returnData.msg);\r\n      \t\t\t\t\t$(\"#register_codeBtn\").removeAttr(\"disabled\");\r\n      \t\t\t\t}\r\n      \t\t\t},\r\n      \t\t\terror: function(){\r\n    \t      \t    requestMsg(\"请求失败\");\r\n      \t\t\t}\r\n      \t\t})\r\n\t\t} else{\r\n\t  \t    requestMsg(\"请填写正确的手机号\");\r\n\t\t}\r\n\t});\r\n\r\n    // 提交注册\r\n    $(\"#register_submitBtn\").click(function(){ // 完成注册提交\r\n\t\t// md5加密\r\n\t\tvar register_password = $(\"#register_password\").val();\r\n\t\tvar password_md5 = String(CryptoJS.MD5(register_password));\r\n\t\tvar passwordLength = register_password.length;\r\n\r\n\t\t// 正则判断密码为6-18位字母+字符的组合\r\n\t\t// var pwdReg = /^(?![^a-zA-Z]+$)(?!\\\\D+$).{6,18}$/;\r\n\t\t// var password = pwdReg.test(register_password);\r\n\r\n        // 正则判断密码为6-18位字母+字符的组合\r\n        var pwdReg=/^((?=.*?\\d)(?=.*?[A-Za-z])|(?=.*?\\d)(?=.*?[.!@#$%])|(?=.*?[A-Za-z])(?=.*?[.]))[\\dA-Za-z.!@#$%]+$/;\r\n        var password = pwdReg.test(register_password);\r\n\r\n        var mobileNum = $(\"#register_mobile\").val();\r\n        var register_verification = $(\"#register_verification\").val();\r\n\t\tvar channelCode = $(\"#channelCode\").val();\r\n\t\tvar pointCode = $(\"#pointCode\").val();\r\n\r\n\t\tvar isState = $(\"#register_codeBtn\").attr(\"isState\");\r\n\r\n\t\tif(/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum) && mobileNum != \"\" ){ // 判断电话开头\r\n\t\t\tif ( register_verification != \"\" ) { // 验证码不能为空\r\n\t\t\t\tif ( password && 6 <= passwordLength && passwordLength <= 18 ) { // 密码6-18位\r\n\t\t\t\t\tif ($(\"#input_check\").is(\":checked\")) { // 判断当前是否选中\r\n\t\t\t\t\t\tif ( $(\"#register_codeBtn\").attr(\"isState\")==1 ) {\r\n                            // 检测访问量\r\n                            if ( style==16 ) { // 钜美头条注册量\r\n                                _taq.push({convert_id:\"63736236689\", event_type:\"form\"})\r\n                            } else if ( style==14 ) {\r\n                                _taq.push({convert_id:\"62421367574\", event_type:\"form\"});\r\n                            } else {\r\n                                _taq.push({convert_id:\"59212981134\", event_type:\"form\"});  // 其他统计\r\n                            }\r\n\r\n\t\t\t\t\t\t\t$.ajax({ // 设置登录密码\r\n\t\t\t\t\t\t\t\turl: \"/app/user/commitChannelRegister\",\r\n\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\tdataType: 'JSON',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tregisterMobile: mobileNum,\r\n\t\t\t\t\t\t\t\t\tsmsCode: register_verification,\r\n\t\t\t\t\t\t\t\t\tpassword: password_md5,\r\n\t\t\t\t\t\t\t\t\tchannelCode: channelCode,\r\n\t\t\t\t\t\t\t\t\tpointCode: pointCode,\r\n\t\t\t\t\t\t\t\t\ttoken:token\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: function(returnData){\r\n                                    if (returnData.success) {\r\n                                        if ( style==10 || style==12 || style==15 || style==16 ) {\r\n                                            $(\"#register_submitBtn\").attr(\"disabled\",true);\r\n\r\n                                            $(\".registerSuss8\").removeClass(\"hide\");  // 显示样式8\r\n                                            $(\".registerSuss12\").removeClass(\"hide\");  // 显示样式10\r\n\r\n                                            $(\".registerMask\").removeClass(\"hide\");  // 显示遮罩\r\n\r\n                                            $(\"#downloadApp\").click(function(){  // 点击下载app\r\n                                                window.location.href = returnData.url;\r\n                                            });\r\n                                        } else if( style==20 ){\r\n\t\t\t\t\t\t\t\t\t\t\t$(\".registerSuss8\").removeClass(\"hide\");  // 显示样式8\r\n\t\t\t\t\t\t\t\t\t\t\t$(\".registerMask\").removeClass(\"hide\");  // 显示遮罩\r\n\t\t\t\t\t\t\t\t\t\t\t$(\"#downloadApp\").click(function(){  // 点击下载app\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(os==1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.location.href = 'http://fusion.qq.com/cgi-bin/qzapps/unified_jump?appid=42318693&from=mqq&actionFlag=0&params=pname%3Dcom.alfl.www%26versioncode%3D373%26channelid%3D%26actionflag%3D0';\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.location.href = 'https://itunes.apple.com/WebObjects/MZStore.woa/wa/search?mt=8&submit=edit&term=%E5%88%86%E6%9C%9F%E8%B4%B7#software';\r\n                                                    window.location.href = 'https://itunes.apple.com/us/app/51%E8%BF%94%E5%91%97/id1136587444?mt=8';\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t} else if( style==21 ){\r\n                                            if ( os==1 ){\r\n                                                window.location.href=\"http://f.51fanbei.com/online/jiekuancaoren_v3.7.1.apk\";\r\n                                            }else if( os==2 ){\r\n                                                window.location.href=\"https://itunes.apple.com/cn/app/%E5%80%9F%E6%AC%BE%E8%B6%85%E4%BA%BA-%E5%85%8D%E6%81%AF%E5%B0%8F%E9%A2%9D%E5%80%9F%E8%B4%B7%E6%89%8B%E6%9C%BA%E8%BD%AF%E4%BB%B6/id1263792729?mt=8\";\r\n                                            }\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n                                            $(\"#register_submitBtn\").attr(\"disabled\",true);\r\n                                            window.location.href = returnData.url;\r\n                                        }\r\n                                    } else {\r\n                                        requestMsg(returnData.msg);\r\n                                    }\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\terror: function(){\r\n                                    requestMsg(\"注册失败\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trequestMsg(\"请获取验证码\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trequestMsg(\"请阅读并同意《51返呗用户注册协议》\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\trequestMsg(\"请填写6-18位的数字、字母、字符组成的密码\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\trequestMsg(\"请输入正确的验证码\");\r\n\t\t\t}\r\n\t\t} else{\r\n            requestMsg(\"请填写正确的手机号\");\r\n        };\r\n    });\r\n});\r\n"]}