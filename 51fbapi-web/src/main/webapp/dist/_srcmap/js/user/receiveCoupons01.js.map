{"version":3,"sources":["js/user/receiveCoupons01.js"],"names":["couponListString","$","val","couponList","eval","click","i","this","index","rid","ajax","url","type","dataType","data","couponIdNum","couponId","success","returnData","requestMsg","eq","addClass","status","window","location","href","msg","css","error"],"mappings":"YASA,IAAIA,kBAAmBC,EAAE,eAAeC,MAApCF,WAAAA,KAAAA,IAAqBA,iBAAzB,KACIG,SAAAA,EAAaC,aAAWJ,KAG5BC,GAAA,WAGIA,EAAE,2BAA2BI,MAAM,WAE/B,GAAIC,GAAGL,EAAEM,MAAMC,QAAXF,EAAWE,WAAfF,GAAAG,GAGAR,GAAES,MAAAA,IAAK,yBACHC,KAAK,OACLC,SAAM,OACNC,MACAC,SAAMC,EACFC,SAAUD,UADRE,QAJH,SAAAC,GAUC,GAAIA,EAAWD,QAAXC,WAAWD,WACXE,EAAAA,2BAAAC,GAAAd,GAAAe,SAAA,0BAGG,CAEH,GAAIC,GAASJ,EAAWJ,KAAXI,MAEC,mBAAVI,IAA8BC,OAAAC,SAAAC,KAAAP,EAAAP,KAIpB,QAAVW,IAAAA,WAAUJ,EAAQQ,KAAEzB,EAAA,2BAAAmB,GAAAd,GAAAe,SAAA,uBAGvB,aAAAC,IAGGH,WAAWD,EAAWQ,KADtBJ,EAAAA,2BAAuBF,GAAAd,GAAAe,SAAA,uBAErB,oBAAFpB,IACHkB,WAAAD,EAAAQ,KAIGzB,EAAE,2BAA2BmB,GAAGd,GAAGqB,IAAI,UAAW,WAAlD1B,MAAAA,WACHkB,WAAA,WAGTS,EAAAA,MAAAA,OAAO","file":"../../../js/user/receiveCoupons01.js","sourcesContent":["/*\r\n* @Author: Yangyang\r\n* @Date:   2017-03-08 17:42:52\r\n* @Last Modified by:   Yangyang\r\n* @Last Modified time: 2017-04-24 17:50:09\r\n* @title:  领取优惠劵\r\n*/\r\n\r\n\r\nvar couponListString = $(\"#couponList\").val();\r\nvar couponList = eval('(' + couponListString + ')');\r\nvar userName = $(\"#userName\").val();\r\n\r\n// 领取优惠劵\r\n$(function(){\r\n\r\n    $(\".receiveCoupons_main li\").click(function(){\r\n        \r\n        var i= $(this).index();\r\n        var couponIdNum = couponList[i].rid;\r\n        \r\n        $.ajax({\r\n            url: \"/fanbei-web/pickCoupon\",\r\n            type: \"POST\",\r\n            dataType: \"JSON\",\r\n            data: {\r\n                couponId: couponIdNum,\r\n                userName: userName\r\n            },\r\n            success: function(returnData){\r\n\r\n                if (returnData.success) {\r\n                    requestMsg(\"优惠劵领取成功\");\r\n                    $(\".receiveCoupons_main li\").eq(i).addClass(\"receiveCoupons_ylq\");\r\n\r\n                } else {\r\n                    \r\n                    var status = returnData.data[\"status\"];\r\n\r\n                    if (status == \"USER_NOT_EXIST\") { // 用户不存在\r\n                        window.location.href = returnData.url;\r\n                    }\r\n\r\n                    if (status == \"OVER\") { // 优惠券个数超过最大领券个数\r\n                        requestMsg(returnData.msg);\r\n                        $(\".receiveCoupons_main li\").eq(i).addClass(\"receiveCoupons_ylq\");\r\n                    }\r\n\r\n                    if (status == \"MORE_THAN\") { // 优惠券已领取完\r\n                        requestMsg(returnData.msg);\r\n                        $(\".receiveCoupons_main li\").eq(i).addClass(\"receiveCoupons_ylw\");\r\n                    }\r\n\r\n                    if (status == \"COUPON_NOT_EXIST\") { // 优惠券不存在\r\n                        requestMsg(returnData.msg);\r\n                        $(\".receiveCoupons_main li\").eq(i).css('display', 'none');;\r\n                    }\r\n                }\r\n            },\r\n            error: function(){\r\n                requestMsg(\"请求失败\");\r\n            }\r\n        });\r\n        $(this).unbind(\"click\"); // 移除当前元素的点击时间(禁止重复点击)\r\n    });\r\n});\r\n\r\n"]}