{"version":3,"sources":["js/user/channelPc.js"],"names":["formatDateTime","date","Date","y","getFullYear","m","getMonth","d","getDate","getHours","getMinutes","getSeconds","token","Math","toString","substr","_fmOpt","partner","appName","cimg","Image","onload","imgLoaded","src","document","location","protocol","fm","createElement","type","async","getTime","toFixed","s","getElementsByTagName","parentNode","insertBefore","root","_tt_config","ta","onerror","request","XMLHttpRequest","web_url","window","encodeURIComponent","href","js_url","url","open","send","$","timeFunction","timerS","removeAttr","timerInterval","clearInterval","text","click","isState","this","val","mobileNum","test","attr","ajax","dataType","data","mobile","pointCode","returnData","success","setInterval","error","requestMsg","register_password","password_md5","String","CryptoJS","MD5","length","pwdReg","password","register_verification","passwordLength","is","convert_id","event_type","_taq","registerMobile","smsCode","channelCode","setTimeout","body","scrollTop","removeClass","msg","event","reload","addClass"],"mappings":"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","file":"../../../js/user/channelPc.js","sourcesContent":["\r\n\r\nvar token = formatDateTime()+Math.random().toString(36).substr(2);\r\n\r\n// var style = $(\"#style\").val();\r\n\r\nfunction formatDateTime() {\r\n  var date = new Date();\r\n  var y = date.getFullYear();\r\n  var m = date.getMonth() + 1;\r\n  m = m < 10 ? ('0' + m) : m;\r\n  var d = date.getDate();\r\n  d = d < 10 ? ('0' + d) : d;\r\n  var h = date.getHours();\r\n  var minute = date.getMinutes();\r\n  var second = date.getSeconds();\r\n  return y +  m +  d +h +minute+second;\r\n};\r\n\r\n// 同盾校验编号的sessionId\r\nvar _fmOpt;\r\n(function() {\r\n  _fmOpt = {\r\n    partner: 'alading',\r\n    appName: 'alading_web',\r\n    token: token\r\n  };\r\n  var cimg = new Image(1,1);\r\n  cimg.onload = function() {\r\n    _fmOpt.imgLoaded = true;\r\n  };\r\n  cimg.src = ('https:' == document.location.protocol ? 'https://' : 'http://') +\"fp.fraudmetrix.cn/fp/clear.png?partnerCode=alading&appName=alading_web&tokenId=\" + _fmOpt.token;\r\n  var fm = document.createElement('script'); fm.type = 'text/javascript'; fm.async = true;\r\n  fm.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'static.fraudmetrix.cn/fm.js?ver=0.1&t=' + (new Date().getTime()/3600000).toFixed(0);\r\n  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(fm, s);\r\n  // alert(json.msg);\r\n})();\r\n\r\n// 检测流量\r\n(function (root) {\r\n  root._tt_config = true;\r\n  var ta = document.createElement('script');\r\n  ta.type = 'text/javascript';\r\n  ta.async = true;\r\n  ta.src = document.location.protocol+'//'+'s3.pstatp.com/bytecom/resource/track_log/src/toutiao-track-log.js';\r\n  ta.onerror = function () {\r\n    var request = new XMLHttpRequest();\r\n    var web_url = window.encodeURIComponent(window.location.href);\r\n    var js_url = ta.src;\r\n    var url = '//ad.toutiao.com/link_monitor/cdn_failed?web_url='+web_url+'&js_url='+js_url;\r\n    request.open('GET', url, true);\r\n    request.send(null);\r\n  }\r\n  var s = document.getElementsByTagName('script')[0];\r\n  s.parentNode.insertBefore(ta, s);\r\n})(window);\r\n\r\n// 判断手机号、接收验证码\r\n$(function(){\r\n\r\n  var timerInterval ;\r\n  var timerS = 60;\r\n  function timeFunction(){ // 60s倒计时\r\n    timerS--;\r\n    if (timerS<=0) {\r\n      $(\"#register_codeBtn\").removeAttr(\"disabled\");\r\n      $(\"#register_codeBtn\").text(\"获取验证码\");\r\n      clearInterval(timerInterval);\r\n      timerS = 60;\r\n      // $(\"#register_codeBtn\").attr(\"isState\",0);\r\n    } else {\r\n      $(\"#register_codeBtn\").text(timerS+\" s\");\r\n    }\r\n  };\r\n\r\n  // 获取验证码\r\n  $(\"#register_codeBtn\").click(function(){\r\n    var isState = $(this).attr(\"isState\");\r\n    var mobileNum = $(\"#register_mobile\").val();\r\n    if ( !isNaN(mobileNum) && (/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum)) ){  // 验证码不能为空、判断电话开头\r\n      $(\"#register_codeBtn\").attr(\"disabled\",true);\r\n      $.ajax({\r\n        url: \"/app/user/getRegisterSmsCode\",\r\n        type: \"POST\",\r\n        dataType: \"JSON\",\r\n        data: {\r\n          mobile: mobileNum,\r\n          token: token,\r\n          channelCode: 'SEOPC',\r\n          pointCode: 'SEOPC'\r\n        },\r\n        success: function(returnData){\r\n          if (returnData.success) {\r\n            $(\"#register_codeBtn\").attr(\"isState\",1);\r\n            $(\"#register_codeBtn\").text(timerS+\" s\");\r\n            timerInterval = setInterval(timeFunction,1000);\r\n          } else {\r\n            requestMsg(returnData.msg);\r\n            $(\"#register_codeBtn\").removeAttr(\"disabled\");\r\n          }\r\n        },\r\n        error: function(){\r\n          requestMsg(\"请求失败\");\r\n        }\r\n      })\r\n    } else{\r\n      requestMsg(\"请填写正确的手机号\");\r\n    }\r\n  });\r\n\r\n\r\n  // 提交注册\r\n  $(\"#register_submitBtn\").click(function(){ // 完成注册提交\r\n    // md5加密\r\n    var register_password = $(\"#register_password\").val();\r\n    var password_md5 = String(CryptoJS.MD5(register_password));\r\n    var passwordLength = register_password.length;\r\n\r\n    // 正则判断密码为6-18位字母+字符的组合\r\n    var pwdReg=/^((?=.*?\\d)(?=.*?[A-Za-z])|(?=.*?\\d)(?=.*?[.!@#$%])|(?=.*?[A-Za-z])(?=.*?[.]))[\\dA-Za-z.!@#$%]+$/;\r\n    var password = pwdReg.test(register_password);\r\n\r\n    var mobileNum = $(\"#register_mobile\").val();\r\n    var register_verification = $(\"#register_verification\").val();\r\n\r\n    var isState = $(\"#register_codeBtn\").attr(\"isState\");\r\n\r\n    if(/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum) && mobileNum != \"\" ){ // 判断电话开头\r\n      if ( register_verification != \"\" ) { // 验证码不能为空\r\n        if ( password && 6 <= passwordLength <= 18 ) { // 密码6-18位\r\n          if ($(\"#input_check\").is(\":checked\")) { // 判断当前是否选中\r\n            if ( $(\"#register_codeBtn\").attr(\"isState\") == 1 ) {\r\n              // 检测访问量\r\n              _taq.push({convert_id:\"59212981134\", event_type:\"form\"})  // 其他统计\r\n\r\n              $.ajax({ // 设置登录密码\r\n                url: \"/app/user/commitChannelRegister\",\r\n                type: 'POST',\r\n                dataType: 'JSON',\r\n                data: {\r\n                  registerMobile: mobileNum,\r\n                  smsCode: register_verification,\r\n                  password: password_md5,\r\n                  channelCode: 'SEOPC',\r\n                  pointCode: 'SEOPC',\r\n                  token: token\r\n                },\r\n                success: function(returnData){\r\n                  if ( returnData.success ) {\r\n                    $(\"#register_submitBtn\").attr(\"disabled\",true);\r\n                    // window.location.href = returnData.url;\r\n                    requestMsg(\"注册成功，立刻下载！\");\r\n                    setTimeout(function(){\r\n                      document.body.scrollTop=0;\r\n                      $(\".mask\").removeClass('hide');\r\n                      $(\".downloadQRcode\").removeClass('hide');\r\n                    }, 2000);\r\n                  } else {\r\n                    requestMsg(returnData.msg);\r\n                  }\r\n                },\r\n                error: function(){\r\n                  requestMsg(\"注册失败\");\r\n                }\r\n              })\r\n            } else {\r\n              requestMsg(\"请获取验证码\");\r\n            }\r\n          } else {\r\n            requestMsg(\"请阅读并同意《51返呗用户注册协议》\");\r\n          }\r\n        }else{\r\n          requestMsg(\"请填写6-18位的数字、字母、字符组成的密码\");\r\n        }\r\n      } else {\r\n        requestMsg(\"请输入验证码\");\r\n      }\r\n    } else{\r\n      requestMsg(\"请填写正确的手机号\");\r\n    };\r\n  });\r\n\r\n  // 关闭遮罩\r\n  $(\".mask\").click(function(event) {\r\n    window.location.reload();\r\n    $(\".mask\").addClass('hide');\r\n    $(\".downloadQRcode\").addClass('hide');\r\n  });\r\n\r\n});\r\n"]}