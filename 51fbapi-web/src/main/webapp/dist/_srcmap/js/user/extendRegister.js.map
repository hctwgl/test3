{"version":3,"sources":["js/user/extendRegister.js"],"names":["token","formatDateTime","Math","random","toString","substr","$","timerS","timerInterval","clearInterval","text","click","isState","this","attr","mobileNum","val","test","url","type","dataType","data","mobile","pointCode","returnData","success","setInterval","timeFunction","error","requestMsg","register_password","password_md5","String","CryptoJS","MD5","register_verification","ajax","registerMobile","smsCode","channelCode","msg"],"mappings":"YAQA,IAAIA,OAAQC,iBAAiBC,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAG/DC,GAAE,WAED,QAAIC,KACJA,IAAyBA,GAAA,GAClBA,EAAAA,qBAAAA,KAAAA,SACIA,cAAWC,GACXD,EAAA,GACFE,EAAAA,qBAAcD,KAAAA,UAAd,IAELF,EAAA,0BAA0BI,KAA5BH,EAAA,MATHD,GAAEE,GACDD,EAAIC,EAeJF,GAAE,qBAAqBK,MAAM,WAD7B,GAAAC,GAAAN,EAAAO,MAAAC,KAAA,WACEC,EAAAT,EAAA,oBAA2BU,KACxBJ,IAAJA,GAAgBA,IAChB,uBAAkBK,KAAAF,GACdH,EAAAA,MACAM,IAAA,+BACiBC,KAAA,OACEC,SAAA,OACCC,MACIC,OAHPP,EAIGf,MAAAA,MACFsB,YAAAA,MACAtB,UAAAA,QAElBuB,QAAW,SAAAC,GARMA,EAAAC,SAUMnB,EAAA,qBAAoBQ,KAAA,UAAA,GACVW,EAAAA,0BAASf,KAAAH,EAAA,MAClBC,EAA0BkB,YAA5BC,EAAA,MAEAnB,WAAgBkB,EAAYC,MAG/BC,MAAA,WAjBFC,WAAA,WAAPA,WAAA,gBA6BZvB,EAAA,uBAAAK,MAAA,WAEHL,GAAEwB,GAAFxB,EAAyBK,sBAAgBK,MAG9BD,EAAYT,EAAE,oBAAoBU,KADxCc,IAAAA,uBAAsBb,KAAAF,GAEjB,GAAAT,EAAA,gBAAuBW,GAAKF,YAErB,GAAA,oCAAgCE,KAAAa,GAAA,CAAE,GAAAC,GAAAC,OAAAC,SAAAC,IAAAJ,IAI5BK,EAAwB7B,EAAE,0BAA0BU,KAF5DV,GAAA8B,MAAuElB,IAAA,kCACnEC,KAAA,OACAC,SAAIe,OACnB7B,MACCY,eAAKH,EACLI,QAAAA,EACAC,SAAAA,EACAC,YAAM,MACLgB,UAAAA,OACAC,MAAAA,OAEAC,QAAAA,SAAAA,GACAhB,EAAAA,QACAvB,OAAAA,SAAOA,KAAAA,EAAAA,IAERyB,WAAAA,EAASe,MAGPZ,MAAA,WACAC,WAAAA,eAIDA,YAAA,2BAGcA,YAAA,0BA5BTA,YA+BO","file":"../../../js/user/extendRegister.js","sourcesContent":["/*\r\n* @Author: nizhiwei\r\n* @Date:   2017-04-18\r\n* @Last Modified by:   Yangyang\r\n\r\n* @Last Modified time: 2017-04-25 15:44:56\r\n* @title:  返呗注册\r\n*/\r\nvar token = formatDateTime()+Math.random().toString(36).substr(2);\r\n\r\n\r\n$(function(){\r\n\tvar timerInterval ;\r\n\tvar timerS = 60;\r\n\tfunction timeFunction(){ // 60s倒计时\r\n        timerS--;\r\n        if (timerS<=0) {\r\n         \t$(\".register_codeBtn\").text(\"获取验证码\");\r\n         \tclearInterval(timerInterval);\r\n         \ttimerS = 60;\r\n\t\t\t$(\".register_codeBtn\").attr(\"isState\",0);\r\n        } else {\r\n         \t$(\".register_codeBtn span\").text(timerS+\" s\");\r\n        }\r\n\t}\r\n\r\n\t// 获取验证码\r\n\t$(\".register_codeBtn\").click(function(){\r\n\t\tvar isState = $(this).attr(\"isState\");\r\n\t\tvar mobileNum = $(\"#register_mobile\").val();\r\n\t\tif (isState==0 || !isState){\r\n\t\t\tif(/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum)){\r\n                $.ajax({\r\n                    url: \"/app/user/getRegisterSmsCode\",\r\n                    type: \"POST\",\r\n                    dataType: \"JSON\",\r\n                    data: {\r\n                        mobile: mobileNum,\r\n                        token: token,\r\n\t\t\t\t\t\tchannelCode: 'Xdt',\r\n\t\t\t\t\t\tpointCode: 'Xdt1'\r\n                    },\r\n                    success: function(returnData){\r\n                        if (returnData.success) {\r\n                            $(\".register_codeBtn\").attr(\"isState\",1);\r\n                            $(\".register_codeBtn span\").text(timerS+\" s\");\r\n                            timerInterval = setInterval(timeFunction,1000);\r\n                        } else {\r\n                            requestMsg(returnData.msg);\r\n                        }\r\n                    },\r\n                    error: function(){\r\n                        requestMsg(\"请求失败\");\r\n                    }\r\n                })\r\n            } else{\r\n                requestMsg(\"请填写正确的手机号\");\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    // 完成注册提交\r\n\r\n\t$(\".register_submitBtn\").click(function(){\r\n\r\n\t\tvar register_password = $(\"#register_password\").val();\r\n        var mobileNum = $(\"#register_mobile\").val();\r\n        if(/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum)){\r\n\r\n            if ($(\"#input_check\").is(\":checked\")) { // 判断当前是否选中\r\n\r\n                if ( /^(?![^a-zA-Z]+$)(?!\\\\D+$).{6,18}$/.test(register_password) ) { \t\t// 正则判断密码为8-16位字母+字符的组合\r\n                    var password_md5 = String(CryptoJS.MD5(register_password));            // md5加密\r\n                    var register_verification = $(\"#register_verification\").val();\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: \"/app/user/commitChannelRegister\",\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\tdataType: 'JSON',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tregisterMobile: mobileNum,\r\n\t\t\t\t\t\t\tsmsCode: register_verification,\r\n\t\t\t\t\t\t\tpassword: password_md5,\r\n\t\t\t\t\t\t\tchannelCode: 'Xdt',\r\n\t\t\t\t\t\t\tpointCode: 'Xdt1',\r\n\t\t\t\t\t\t\ttoken: token\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(returnData){\r\n\t\t\t\t\t\t\tif ( returnData.success ) {\r\n\t\t\t\t\t\t\t\twindow.location.href = returnData.url;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\trequestMsg(returnData.msg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(){\r\n\t\t\t\t\t\t\trequestMsg(\"绑定失败\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n                }else{\r\n                    requestMsg(\"请填写6-18位的数字、字母组成的密码\");\r\n                }\r\n            } else {\r\n                requestMsg(\"请阅读并同意《51返呗用户注册协议》\");\r\n            }\r\n\t\t}else{\r\n            requestMsg(\"请填写正确的手机号\");\r\n        }\r\n\t});\r\n});\r\n"]}