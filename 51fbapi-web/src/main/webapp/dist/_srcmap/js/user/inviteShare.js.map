{"version":3,"sources":["js/user/inviteShare.js"],"names":["timeFunction","timerS","$","removeAttr","text","clearInterval","timerInterval","recommendCode","getUrl","vm","Vue","el","methods","getCode","console","log","mobileNum","this","attr","val","isNaN","test","ajax","url","type","dataType","data","beforeSend","success","returnData","requestMsg","msg","error","goRegister","pwdLength","length","CryptoJS","MD5","pwdMd5","telNum","VerifiCode","pwdReg","is","registerMobile","smsCode","password","window"],"mappings":"YAQyB,SAAAA,gBACrBC,SACIA,QAAAA,GACAC,EAAE,YAAYC,WAAW,YACzBD,EAAE,YAAYE,KAAK,SACnBC,cAAcC,eACdL,OAAS,IAETC,EAAE,YAAYE,KAAKH,OAAAA,MAb3B,GAAIM,eAAgBC,OAAO,iBAIvBP,cACJA,OAASD,GAYLS,GAAAA,GAAGC,MACHC,GAAI,eACJC,SACIC,QADJD,WAEQE,QAAQC,IAAI,IACZ,IACIC,IADUd,EAAEe,MAAMC,KAAK,WACXhB,EAAE,QAAQiB,QAEpBC,MAAMJ,IAAe,uBAAuBK,KAAKL,IAAgBd,EAAA,YAAAgB,KAAA,YAAA,GACnEhB,EAAEoB,MACAA,IAAK,+BACHC,KAAK,OACLC,SAAM,OACNC,MACAC,OAAMV,GAAAW,WAJH,WAOHA,EAAAA,YAAYT,KAAA,UAAA,GACRhB,EAAE,YAAYgB,KAAKjB,OAAA,MACnBC,cAAcE,YAAYJ,aAA1B,MAEH4B,QAXE,SAAAC,GAYHD,QAASb,IAAAc,GACLf,EAAYe,QACRA,QAAAA,IAAWD,IAAfE,WAMOD,EAAAE,KACHD,EAAAA,YAAWD,WAAX,cAGPG,MAxBE,WAyBHA,WAAO,YA3BfF,WA+BM,cAGTG,WAxCLrB,WA2CQ,GAAIsB,GAAahC,EAAE,aAAaiB,MAAOgB,OAAnCD,EAAAA,OAAeE,SAAFC,IAAelB,EAAf,aAAjBA,QACImB,EAAAA,mGAAqDjB,KAAAnB,EAAA,aAAAiB,OAGrDoB,EAASrC,EAAE,QAAQiB,MAAnBoB,EAAWrC,EAAA,eAAfiB,KAGcjB,GAAE,qBAAqBgB,KAAK,UAEvC,wBAAuBG,KAAKkB,IAAqB,IAAVA,EAAvC,IAAAC,EAAuDC,GAAA,GAAAP,GAAAA,GAAA,GACjDM,EAAAA,eAAmBE,GAAA,YAAE,GAAAxC,EAAA,YAAAgB,KAAA,WAC+BhB,EAAAoB,MAC3CC,IAAA,2BAAiCC,KAAA,OAC5BC,SAAYP,OAMXQ,MAJGiB,eAAEJ,EACLhB,QAAKiB,EACLhB,SAFGc,EAGHb,cAHGlB,eAKCoC,QAAAA,SAAAA,GACAC,EAASJ,SACTK,EAAAA,uBAHE3B,KAAA,YAAA,GAIFX,OAAAA,SAAeA,KAAAA,EAAAA,KAEnBqB,WAASC,EAASA,MAGViB,MAAAA,WACHhB,WAAM,WAIXE,WAAO,UAlBJF,WAAP,sBAwBHA,WAAA,0BAGJA,WAAA,aAGJA,WAAA","file":"../../../js/user/inviteShare.js","sourcesContent":["\r\n\r\n// 从分享链接中获取code\r\nvar recommendCode = getUrl(\"recommendCode\");\r\n\r\n\r\nvar timerInterval ;\r\nvar timerS = 60;\r\nfunction timeFunction(){ // 60s倒计时\r\n    timerS--;\r\n    if (timerS<=0) {\r\n        $(\"#codeBtn\").removeAttr(\"disabled\");\r\n        $(\"#codeBtn\").text(\"获取验证码\");\r\n        clearInterval(timerInterval);\r\n        timerS = 60;\r\n    } else {\r\n        $(\"#codeBtn\").text(timerS+\" s\");\r\n    }\r\n};\r\n\r\nvar vm=new Vue({\r\n    el: '#inviteShare',\r\n    methods:{\r\n        getCode(){\r\n            console.log(222);\r\n            var isState = $(this).attr(\"isState\");\r\n            var mobileNum = $(\"#tel\").val();\r\n\r\n            if ( !isNaN(mobileNum) && (/^1(3|4|5|7|8)\\d{9}$/i.test(mobileNum)) ){  // 验证码不能为空、判断电话开头\r\n                $(\"#codeBtn\").attr(\"disabled\",true);\r\n                $.ajax({\r\n                    url: \"/app/user/getRegisterSmsCode\",\r\n                    type: \"POST\",\r\n                    dataType: \"JSON\",\r\n                    data: {\r\n                        mobile: mobileNum,\r\n                    },\r\n                    beforeSend: function(){\r\n                        $(\"#codeBtn\").attr(\"isState\",1);\r\n                        $(\"#codeBtn\").text(timerS+\" s\");\r\n                        timerInterval = setInterval(timeFunction,1000);\r\n                    },\r\n                    success: function(returnData){\r\n                        console.log(returnData);\r\n                        if (returnData.success) {\r\n                            console.log(returnData);\r\n\r\n                            // $(\"#register_codeBtn\").attr(\"isState\",1);\r\n                            // $(\"#register_codeBtn\").text(timerS+\" s\");\r\n                            // timerInterval = setInterval(timeFunction,1000);\r\n                        } else {\r\n                            requestMsg(returnData.msg);\r\n                            $(\"#codeBtn\").removeAttr(\"disabled\");\r\n                        }\r\n                    },\r\n                    error: function(){\r\n                        requestMsg(\"请求失败\");\r\n                    }\r\n                })\r\n            } else{\r\n                requestMsg(\"请填写正确的手机号\");\r\n            }\r\n        },\r\n        goRegister(){\r\n\r\n            var pwdLength = ($(\"#password\").val()).length;\r\n            var pwdMd5 = String(CryptoJS.MD5($(\"#password\").val())); // md5加密\r\n            var pwdReg=(/^((?=.*?\\d)(?=.*?[A-Za-z])|(?=.*?\\d)(?=.*?[.!@#$%])|(?=.*?[A-Za-z])(?=.*?[.]))[\\dA-Za-z.!@#$%]+$/).test($(\"#password\").val()); // 正则判断密码为6-18位字母+字符的组合\r\n\r\n            var telNum = $(\"#tel\").val();\r\n            var VerifiCode = $(\"#VerifiCode\").val();\r\n\r\n            var isState = $(\"#register_codeBtn\").attr(\"isState\");\r\n\r\n            if(/^1(3|4|5|7|8)\\d{9}$/i.test(telNum) && telNum != \"\" ){ // 判断电话开头\r\n                if ( VerifiCode != \"\" ) { // 验证码不能为空\r\n                    if ( pwdReg && 6 <= pwdLength && pwdLength <= 18 ) { // 密码6-18位\r\n                        if ($(\"#inputCheck\").is(\":checked\")) { // 判断当前是否选中\r\n                            if ( $(\"#codeBtn\").attr(\"isState\")==1 ) {\r\n\r\n                                $.ajax({ // 设置登录密码\r\n                                    url: \"/app/user/commitRegister\",\r\n                                    type: 'POST',\r\n                                    dataType: 'JSON',\r\n                                    data: {\r\n                                        registerMobile: telNum,\r\n                                        smsCode: VerifiCode,\r\n                                        password: pwdMd5,\r\n                                        recommendCode: recommendCode\r\n                                    },\r\n                                    success: function(returnData){\r\n                                        if ( returnData.success ) {\r\n                                            $(\"#register_submitBtn\").attr(\"disabled\",true);\r\n                                            window.location.href = returnData.url;\r\n                                        } else {\r\n                                            requestMsg(returnData.msg);\r\n                                        }\r\n                                    },\r\n                                    error: function(){\r\n                                        requestMsg(\"注册失败\");\r\n                                    }\r\n                                })\r\n                            } else {\r\n                                requestMsg(\"请获取验证码\");\r\n                            }\r\n                        } else {\r\n                            requestMsg(\"请阅读并同意《51返呗用户注册协议》\");\r\n                        }\r\n                    }else{\r\n                        requestMsg(\"请填写6-18位的数字、字母、字符组成的密码\");\r\n                    }\r\n                } else {\r\n                    requestMsg(\"请输入正确的验证码\");\r\n                }\r\n            } else{\r\n                requestMsg(\"请填写正确的手机号\");\r\n            };\r\n        }\r\n    }\r\n});"]}