"use strict";var protocol=window.location.protocol,host=window.location.host,urlHost=protocol+"//"+host,userName=getUrl("userName"),spread=getUrl("spread"),vm=new Vue({el:"#main",data:{goodsData:{},couponData:[],currentData:[],redRainData:[],couponFlag:!0,downTime:{d:0,h:0,m:0,s:0},isApp:!0,couponUrl:"/activity/double12/couponHomePage"},created:function(){this.isAppFn(),this.maidian("enter=true")},methods:{isAppFn:function(){""!=getUrl("spread")&&(this.isApp=!1,this.couponUrl="/activityH5/double12/couponHomePage"),this.logData()},logData:function(){var t=this;$.ajax({url:t.couponUrl,type:"POST",dataType:"json",success:function(o){if(!o.success)return location.href=o.data.loginUrl,!1;t.couponData=o.data.couponList},error:function(){requestMsg("哎呀，出错了！")}}),$.ajax({url:"/activity/double12/goodsHomePage",type:"POST",dataType:"json",success:function(o){if(console.log(o.data),!o.success)return requestMsg("哎呀，获取优惠券出错了！"),!1;t.goodsData=o.data.goodsMap;for(var e in t.goodsData)if(t.goodsData.hasOwnProperty(e)){var a=t.goodsData[e];"O"==a.type&&(t.currentData=a)}t.$nextTick(function(){var t=$("#dayBox").width(),o=$(".status-2").width(),e=(t-o)/2,a=$(".status-2").offset().left;if(a>e){var s=a-e;$("#dayBox").scrollLeft(s)}})},error:function(){requestMsg("哎呀，出错了！")}}),$.ajax({url:"/activity/double12/startTime",type:"POST",dataType:"json",success:function(o){if(!o.success)return!1;t.redRainData=o.data,t.countDown()},error:function(){requestMsg("哎呀，出错了！")}})},countDown:function(){var t=this;setInterval(function(){var o=(t.redRainData.startTime-t.redRainData.currentTime)/1e3,e=0,a=0,s=0,n=0;o>=0&&(e=Math.floor(o/60/60/24),a=Math.floor(o/60/60%24),s=Math.floor(o/60%60),n=Math.floor(o%60)),t.downTime.d=e,t.downTime.h=a,t.downTime.m=s,t.downTime.s=n,t.redRainData.currentTime+=1e3},1e3)},couponClick:function(t,o){var e=this,a=t.id;return e.isApp?"Y"==t.isGet?(requestMsg("您已经领取过了，快去使用吧"),!1):"N"==t.isShow?(requestMsg("活动暂未开始"),!1):"E"==t.isShow?(requestMsg("活动已结束"),!1):void $.ajax({url:"/activity/double12/getCoupon",type:"POST",dataType:"JSON",data:{couponId:a},success:function(t){console.log("returnData=>>",t);var a=t.data;t.success?"Y"==a.result?(requestMsg("优惠劵领取成功"),e.$set(e.couponData[o],"isGet","Y"),e.maidian("couponSuccess=true")):"N"==a.result?(requestMsg("您已经领取过了，快去使用吧"),e.maidian("couponSuccess=got")):(requestMsg("今日优惠券已领取完毕，明天再来领取吧"),e.maidian("couponSuccess=end")):""==a?requestMsg("哎呀，出错了！"):location.href=a.loginUrl},error:function(){requestMsg("哎呀，出错了！")},complete:function(){e.ajaxFlag=!0}}):(this.toRegister(),!1)},buy:function(t){this.isApp?this.toRegister():window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={"privateGoodsId":"'+t+'"}'},maidian:function(t){$.ajax({url:"/fanbei-web/postMaidianInfo",type:"post",data:{maidianInfo:"/fanbei-web/activity/doubleTwelve?userName="+userName+"&"+t+"&spread="+spread},success:function(t){console.log(t)}})},changeFlag:function(){this.couponFlag=!this.couponFlag},changeProduct:function(t){this.currentData=this.goodsData[t]},toRegister:function(){location.href="doubleTwelveRegister?spread="+spread}}});
//# sourceMappingURL=../../_srcmap/activity/12/doubleTwelve.js.map
