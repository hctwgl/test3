"use strict";var protocol=window.location.protocol,host=window.location.host,urlHost=protocol+"//"+host,vm=new Vue({el:"#main",data:{goodsData:{},couponData:[],currentData:[],redRainData:[],couponFlag:!0,downTime:{d:0,h:0,m:0,s:0},isApp:!0,couponUrl:"/activity/double12/couponHomePage"},created:function(){this.isAppFn()},computed:{couponNum:function(){return this.firstGoods.couponList?this.firstGoods.couponList.filter(function(o,t){return 0!=o.state}).length:0}},methods:{isAppFn:function(){""!=getUrl("spread")&&(this.isApp=!1,this.couponUrl="/activityH5/double12/couponHomePage"),this.logData()},logData:function(){var o=this;$.ajax({url:o.couponUrl,type:"POST",dataType:"json",success:function(t){if(!t.success)return location.href=t.data.loginUrl,!1;o.couponData=t.data.couponList},error:function(){requestMsg("哎呀，出错了！")}}),$.ajax({url:"/activity/double12/goodsHomePage",type:"POST",dataType:"json",success:function(t){if(console.log(t.data),!t.success)return requestMsg("哎呀，获取优惠券出错了！"),!1;o.goodsData=t.data.goodsMap;for(var a in o.goodsData)if(o.goodsData.hasOwnProperty(a)){var e=o.goodsData[a];"O"==e.type&&(o.currentData=e)}},error:function(){requestMsg("哎呀，出错了！")}}),$.ajax({url:"/activity/double12/startTime",type:"POST",dataType:"json",success:function(t){if(!t.success)return!1;o.redRainData=t.data,o.countDown()},error:function(){requestMsg("哎呀，出错了！")}})},countDown:function(){var o=this;setInterval(function(){var t=(o.redRainData.startTime-o.redRainData.currentTime)/1e3,a=0,e=0,n=0,s=0;t>=0&&(a=Math.floor(t/60/60/24),e=Math.floor(t/60/60%24),n=Math.floor(t/60%60),s=Math.floor(t%60)),o.downTime.d=a,o.downTime.h=e,o.downTime.m=n,o.downTime.s=s,o.redRainData.currentTime+=1e3},1e3)},couponClick:function(o,t){var a=this,e=o.id;return!!a.isApp&&("Y"==o.isGet?(requestMsg("您已经领取过了，快去使用吧"),!1):"N"==o.isShow?(requestMsg("活动暂未开始"),!1):"E"==o.isShow?(requestMsg("活动已结束"),!1):void $.ajax({url:"/activity/double12/getCoupon",type:"POST",dataType:"JSON",data:{couponId:e},success:function(o){console.log("returnData=>>",o);var e=o.data;o.success?"Y"==e.result?(requestMsg("优惠劵领取成功"),a.$set(a.couponData[t],"isGet","Y")):"N"==e.result?requestMsg("您已经领取过了，快去使用吧"):requestMsg("今日优惠券已领取完毕，明天再来领取吧"):""==e?requestMsg("哎呀，出错了！"):location.href=e.loginUrl},error:function(){requestMsg("哎呀，出错了！")},complete:function(){a.ajaxFlag=!0}}))},buy:function(o){this.isApp?location.href="":window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={"privateGoodsId":"'+o+'"}'},maidian:function(o){$.ajax({url:"/fanbei-web/postMaidianInfo",type:"post",data:{maidianInfo:"/fanbei-web/activity/barginIndex?userName="+userName,spread:spread},success:function(o){console.log(o)}})},changeFlag:function(){this.couponFlag=!this.couponFlag},changeProduct:function(o){this.currentData=this.goodsData[o]}}});
//# sourceMappingURL=../../_srcmap/activity/12/doubleTwelve.js.map
