"use strict";var protocol=window.location.protocol,host=window.location.host,urlHost=protocol+"//"+host,vm=new Vue({el:"#main",data:{goodsData:{},couponData:[],currentData:[],couponFlag:!0,downTime:{d:0,h:0,m:0,s:0},isApp:!0,couponUrl:"/activity/double12/couponHomePage"},created:function(){this.isAppFn()},computed:{couponNum:function(){return this.firstGoods.couponList?this.firstGoods.couponList.filter(function(o,t){return 0!=o.state}).length:0}},methods:{isAppFn:function(){""!=getUrl("spread")&&(this.isApp=!1,this.couponUrl="/activityH5/double12/couponHomePage"),this.logData()},logData:function(){var o=this;$.ajax({url:o.couponUrl,type:"POST",dataType:"json",success:function(t){if(!t.success)return location.href=t.data.loginUrl,!1;t={data:{couponList:[{amount:6,id:1047,isGet:"Y",isShow:"Y",ishas:"Y",name:"6元还款抵用券",threshold:"6元还款抵用券"},{amount:3,id:1046,isGet:"N",isShow:"Y",ishas:"N",name:"3元还款抵用券",threshold:"3元还款抵用券"},{amount:1,id:1045,isGet:"N",isShow:"Y",ishas:"Y",name:"抓娃娃1元现金红包",threshold:"抓娃娃1元现金红包"},{amount:9,id:1048,isGet:"N",isShow:"N",ishas:"Y",name:"9元还款抵用券",threshold:"9元还款抵用券"}]},msg:"获取优惠券列表成功",success:!0},o.couponData=t.data.couponList},error:function(){requestMsg("哎呀，出错了！")}}),$.ajax({url:"/activity/double12/goodsHomePage",type:"POST",dataType:"json",success:function(t){if(console.log(t.data),!t.success)return requestMsg("哎呀，获取优惠券出错了！"),!1;o.goodsData=t.data.goodsMap;for(var a in o.goodsData)if(o.goodsData.hasOwnProperty(a)){var e=o.goodsData[a];"O"==e.type&&(o.currentData=e)}},error:function(){requestMsg("哎呀，出错了！")}})},toProduct:function(o,t){location.href="/fanbei-web/activity/barginProduct?goodsId="+o+"&productType="+t+"&userName="+name+"&spread="+spread},countDown:function(){var o=this;setInterval(function(){var t=(o.totalData.endTime-(new Date).getTime())/1e3,a=0,e=0,s=0,n=0;t>=0&&(a=Math.floor(t/60/60/24),e=Math.floor(t/60/60%24),s=Math.floor(t/60%60),n=Math.floor(t%60)),o.downTime.d=a,o.downTime.h=e,o.downTime.m=s,o.downTime.s=n},1e3)},couponClick:function(o,t){var a=this,e=o.id;if("Y"==o.isGet)return requestMsg("您已经领取过了，快去使用吧"),!1;$.ajax({url:a.couponUrl,type:"POST",dataType:"JSON",data:{couponId:e},success:function(o){if(console.log("returnData=>>",o),o.success)requestMsg("优惠劵领取成功"),a.$set(a.couponData[t],"state",1);else{var e=o.data.status;"USER_NOT_EXIST"==e&&(a.isWx?location.href="./barginLogin":window.location.href=o.url),"OVER"==e&&requestMsg("您已经领取，快去使用吧"),"COUPON_NOT_EXIST"==e&&requestMsg(o.msg),"MORE_THAN"==e&&requestMsg(o.msg)}},error:function(){requestMsg("哎呀，出错了！")},complete:function(){a.ajaxFlag=!0}})},buy:function(o){this.isWX?location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www":window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={"privateGoodsId":"'+o+'"}'},maidian:function(o){$.ajax({url:"/fanbei-web/postMaidianInfo",type:"post",data:{maidianInfo:"/fanbei-web/activity/barginIndex?userName="+userName,spread:spread},success:function(o){console.log(o)}})},changeFlag:function(){this.couponFlag=!this.couponFlag},changeProduct:function(o){this.currentData=this.goodsData[o]}}});
//# sourceMappingURL=../../_srcmap/activity/12/doubleTwelve.js.map
