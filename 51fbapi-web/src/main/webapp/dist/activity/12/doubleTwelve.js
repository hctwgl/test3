"use strict";var protocol=window.location.protocol,host=window.location.host,urlHost=protocol+"//"+host,goodArr=Object.keys(Array.apply(null,{length:8})).map(function(){return{img:"https://img2.mukewang.com/szimg/59b8a486000107fb05400300.jpg",link:"http://baidu.com"}}),goodArr1=Object.keys(Array.apply(null,{length:8})).map(function(){return{img:"https://img4.sycdn.imooc.com/szimg/59eeb21c00012eb205400300.jpg",link:"http://baidu.com"}});console.log(goodArr);var vm=new Vue({el:"#main",data:{goodsData:[],tabs:[{tab:"电子数码",key:0},{tab:"鞋服箱包",key:1},{tab:"手表配饰",key:2},{tab:"美妆护肤",key:3}],goods:[goodArr,goodArr1,goodArr,goodArr1],pretab:0,nowkey:0,couponData:[],currentData:[],redRainData:[],couponFlag:!0,downTime:{d:0,h:0,m:0,s:0},touchstartx:null,touchendx:null,touchdefx:null,touchstarty:null,touchendy:null,touchdefy:null,isApp:!0,couponUrl:"/activity/double12/couponHomePage"},created:function(){this.isAppFn()},watch:{nowkey:function(t){var o=-$(".rule").width();this.$nextTick(function(){$(".goodpi").css({transform:"translateX("+o*t+"px)"})})},touchdefx:function(t){this.isScroll&&(t>80?this.nowkey<this.goods.length-1&&this.nowkey++:t<-80&&this.nowkey>0&&this.nowkey--)}},computed:{couponNum:function(){return this.firstGoods.couponList?this.firstGoods.couponList.filter(function(t,o){return 0!=t.state}).length:0},isScroll:function(){return Math.abs(this.touchdefy)<50}},mounted:function(){var t=this;this.$nextTick(function(){setTimeout(function(){$(".good_tab").pin({containerSelector:".good_con"}),$(".goodpi").css({width:$(".rule").width()*t.goods.length+"px"}),$(".goodeach").css({width:$(".rule").width()+"px"}),$(".goodpi").on("touchstart",function(o){var n=o.originalEvent.targetTouches[0];t.touchstartx=n.pageX,t.touchstarty=n.clientY}),$(".goodpi").on("touchend",function(o){var n=o.originalEvent.changedTouches[0];t.touchendx=n.pageX,t.touchendy=n.clientY,t.touchdefy=t.touchstarty-t.touchendy,t.touchdefx=t.touchstartx-t.touchendx})},0)})},methods:{changetab:function(t){this.pretab=this.nowkey,this.nowkey=t},linkto:function(t){window.location.href=t.link},isAppFn:function(){""!=getUrl("spread")&&(this.isApp=!1,this.couponUrl="/activityH5/double12/couponHomePage"),this.logData()},logData:function(){var t=this;$.ajax({url:t.couponUrl,type:"POST",dataType:"json",success:function(o){if(!o.success)return location.href=o.data.loginUrl,!1;t.couponData=o.data.couponList},error:function(){requestMsg("哎呀，出错了！")}}),$.ajax({url:"/activity/double12/goodsHomePage",type:"POST",dataType:"json",success:function(o){if(console.log(o.data),!o.success)return requestMsg("哎呀，获取优惠券出错了！"),!1;t.goodsData=o.data.goodsMap;for(var n in t.goodsData)if(t.goodsData.hasOwnProperty(n)){var e=t.goodsData[n];"O"==e.type&&(t.currentData=e)}},error:function(){requestMsg("哎呀，出错了！")}}),$.ajax({url:"/activity/double12/startTime",type:"POST",dataType:"json",success:function(o){if(!o.success)return!1;t.redRainData=o.data,t.countDown()},error:function(){requestMsg("哎呀，出错了！")}})},countDown:function(){var t=this;setInterval(function(){var o=(t.redRainData.startTime-t.redRainData.currentTime)/1e3,n=0,e=0,a=0,i=0;o>=0&&(n=Math.floor(o/60/60/24),e=Math.floor(o/60/60%24),a=Math.floor(o/60%60),i=Math.floor(o%60)),t.downTime.d=n,t.downTime.h=e,t.downTime.m=a,t.downTime.s=i,t.redRainData.currentTime+=1e3},1e3)},couponClick:function(t,o){var n=this,e=t.id;return!!n.isApp&&("Y"==t.isGet?(requestMsg("您已经领取过了，快去使用吧"),!1):"N"==t.isShow?(requestMsg("活动暂未开始"),!1):"E"==t.isShow?(requestMsg("活动已结束"),!1):void $.ajax({url:"/activity/double12/getCoupon",type:"POST",dataType:"JSON",data:{couponId:e},success:function(t){console.log("returnData=>>",t);var e=t.data;t.success?"Y"==e.result?(requestMsg("优惠劵领取成功"),n.$set(n.couponData[o],"isGet","Y")):"N"==e.result?requestMsg("您已经领取过了，快去使用吧"):requestMsg("今日优惠券已领取完毕，明天再来领取吧"):""==e?requestMsg("哎呀，出错了！"):location.href=e.loginUrl},error:function(){requestMsg("哎呀，出错了！")},complete:function(){n.ajaxFlag=!0}}))},buy:function(t){this.isApp?location.href="":window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={"privateGoodsId":"'+t+'"}'},maidian:function(t){$.ajax({url:"/fanbei-web/postMaidianInfo",type:"post",data:{maidianInfo:"/fanbei-web/activity/barginIndex?userName="+userName,spread:spread},success:function(t){console.log(t)}})},changeFlag:function(){this.couponFlag=!this.couponFlag},changeProduct:function(t){this.currentData=this.goodsData[t]}}});
//# sourceMappingURL=../../_srcmap/activity/12/doubleTwelve.js.map
