"use strict";var protocol=window.location.protocol,host=window.location.host,urlHost=protocol+"//"+host,vm=new Vue({el:"#main",data:{goodsData:{},couponData:[],couponFlag:!0,downTime:{d:0,h:0,m:0,s:0},isApp:!0,couponUrl:"/activity/double12/couponHomePage"},created:function(){this.logData(),this.isApp()},computed:{couponNum:function(){return this.firstGoods.couponList?this.firstGoods.couponList.filter(function(o,t){return 0!=o.state}).length:0}},methods:{logData:function(){var o=this;$.ajax({url:"/activity/double12/couponHomePage",type:"POST",dataType:"json",success:function(t){if(!t.success)return requestMsg("哎呀，获取优惠券出错了！"),!1;o.couponData=t.data.couponList},error:function(){requestMsg("哎呀，出错了！")}}),$.ajax({url:"/activity/double12/goodsHomePage",type:"POST",dataType:"json",success:function(t){if(console.log(t.data),!t.success)return requestMsg("哎呀，获取优惠券出错了！"),!1;o.goodsData=t.data.goodsMap,$(".loadingMask").fadeOut()},error:function(){requestMsg("哎呀，出错了！")}})},isApp:function(){""!=getUrl("spread")&&(this.isApp=!1,this.couponUrl="/activityH5/double12/couponHomePage")},toProduct:function(o,t){location.href="/fanbei-web/activity/barginProduct?goodsId="+o+"&productType="+t+"&userName="+name+"&spread="+spread},countDown:function(){var o=this;setInterval(function(){var t=(o.totalData.endTime-(new Date).getTime())/1e3,e=0,a=0,n=0,s=0;t>=0&&(e=Math.floor(t/60/60/24),a=Math.floor(t/60/60%24),n=Math.floor(t/60%60),s=Math.floor(t%60)),o.downTime.d=e,o.downTime.h=a,o.downTime.m=n,o.downTime.s=s},1e3)},couponClick:function(o,t){var e=this,a=o.id;if("Y"==o.isGet)return requestMsg("您已经领取过了，快去使用吧"),!1;$.ajax({url:e.couponUrl,type:"POST",dataType:"JSON",data:{couponId:a},success:function(o){if(console.log("returnData=>>",o),o.success)requestMsg("优惠劵领取成功"),e.$set(e.couponData[t],"state",1);else{var a=o.data.status;"USER_NOT_EXIST"==a&&(e.isWx?location.href="./barginLogin":window.location.href=o.url),"OVER"==a&&requestMsg("您已经领取，快去使用吧"),"COUPON_NOT_EXIST"==a&&requestMsg(o.msg),"MORE_THAN"==a&&requestMsg(o.msg)}},error:function(){requestMsg("哎呀，出错了！")},complete:function(){e.ajaxFlag=!0}})},buy:function(o){this.isWX?location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.alfl.www":window.location.href='/fanbei-web/opennative?name=GOODS_DETAIL_INFO&params={"privateGoodsId":"'+o+'"}'},maidian:function(o){$.ajax({url:"/fanbei-web/postMaidianInfo",type:"post",data:{maidianInfo:"/fanbei-web/activity/barginIndex?userName="+userName,spread:spread},success:function(o){console.log(o)}})},changeFlag:function(){this.couponFlag=!this.couponFlag}}});
//# sourceMappingURL=../../_srcmap/activity/12/doubleTwelve.js.map
