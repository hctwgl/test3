"use strict";var goodsId=getUrl("goodsId"),vm=new Vue({el:"#barginList",data:{goodsData:{},listData:[],ruleFlag:!1,downTime:{d:0,h:0,m:0,s:0},loadFlag:!1,listNum:1},created:function(){this.logData()},methods:{logData:function(){var t=this;$.ajax({url:"/activity/de/top",type:"POST",dataType:"json",data:{goodsPriceId:goodsId},success:function(o){console.log("initData=",o),o.success?(t.goodsData=o.data,t.countDown()):requestMsg("哎呀，出错了！")},error:function(){requestMsg("哎呀，出错了！")}}),t.listFn(),t.scrollFn()},listFn:function(){var t=this;t.loadFlag=!1,$.ajax({url:"/activity/de/topList",type:"POST",dataType:"json",data:{goodsPriceId:goodsId,pageNo:t.listNum},success:function(o){o.success?o.data.listPerson.length>0&&(t.listData=t.listData.concat(o.data.listPerson),t.listNum++,t.loadFlag=!0):requestMsg("哎呀，出错了！")},error:function(){requestMsg("哎呀，出错了！")}})},showRule:function(){this.ruleFlag=!0,console.log("click")},closeRule:function(){this.ruleFlag=!1},countDown:function(){var t=this;setInterval(function(){var o=(t.goodsData.endTime-(new Date).getTime())/1e3,s=0,a=0,e=0,n=0;o>=0&&(s=Math.floor(o/60/60/24),a=Math.floor(o/60/60%24),e=Math.floor(o/60%60),n=Math.floor(o%60)),t.downTime.d=s,t.downTime.h=a,t.downTime.m=e,t.downTime.s=n},1e3)},scrollFn:function(){console.log("start");var t=this;$(window).on("scroll",function(o){if(t.loadFlag){var s=$(this).scrollTop(),a=$(document).height();s+$(this).height()>=a-20&&t.listFn()}})}}});
//# sourceMappingURL=../../_srcmap/activity/11/barginList.js.map
