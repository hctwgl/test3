"use strict";function gameAreaTwo(e){var a=new mui.PopPicker({layer:2});a.setData(e),a.pickers[0].setSelectedIndex(0),a.pickers[1].setSelectedIndex(0),a.show(function(e){var t=e[0].text+"&nbsp"+e[1];$(".gameArea span").html(t),$(".gameArea span").css("color","#232323"),a.dispose()})}function gameAreaOne(e){var a=new mui.PopPicker({layer:1});a.setData(e),a.pickers[0].setSelectedIndex(0),a.show(function(e){var t=e[0];$(".gameArea span").html(t),$(".gameArea span").css("color","#232323"),a.dispose()})}var goodsId=getUrl("goodsId"),vm=new Vue({el:"#gamePay",data:{content:{},fixCont:{},dataType:"",allData:[],gameNameShow:""},created:function(){this.logData()},methods:{rewritedata:function(e){var a=e,t=Object.create(null),n=function(e,a,t){return t?$(e).find(a).attr(t):$(e).find(a)},r=function(e,a){return $(e).attr(a)};(n(a,"game","name")||r(a,"name"))&&(t.gameName=n(a,"game","name")||r(a,"name"));var i=$(a).find("acctType").text();if(i?t.accountType=i:$(".gameNum").hide(),$(a).find("area")&&$(a).find("area").attr("name")){$(".gameArea").show();var s=n(a,"areas"),o=s.length;if(o&&o>=2&&(t.areasList=s.map(function(e,a){var t=n(a,"area"),i=[];return t.length&&t.each(function(e,a){i.push(r(a,"name"))}),{text:r(a,"name"),children:i}}),t.areasList=Array.prototype.slice.call(t.areasList),t.areaslen=o),o&&1==o){var c=$(a).find("area").length,m=[];c&&$(a).find("area").each(function(){m.push($(this).attr("name"))}),t.areasList=m,t.areaslen=o}}var l=[];n(a,"type","name")?($(a).find("type").each(function(){l.push($(this).attr("name"))}),t.typeNameList=l):n(a,"types","name")?($(a).find("types").each(function(){l.push($(this).attr("name"))}),t.typeNameList=l):$(".gameType").hide();var d=[],u=[];u=$(a).find("type").children("quantity").text().split(",");var p=[];p=$(a).find("type").children("chargeNum").text().split(",");for(var f=0;f<u.length;f++){var h={quantity:u[f],chargeNum:p[f]};d.push(h)}return t.priceTypeList=d,t.priceTimes=$(a).find("type").children("quantity").attr("priceTimes"),$(a).find("type").children("chargeNum").attr("name")?t.chargeNumName=$(a).find("type").children("chargeNum").attr("name"):t.chargeNumName="",t},fixDataB:function(e){},logData:function(){var e=this;$.ajax({type:"post",url:"/game/pay/goodsInfo",data:{goodsId:goodsId},success:function(a){e.content=a.data.content,e.dataType=a.data.xmlType,console.log(e.content),"A"==e.dataType&&($(".gamePass").hide(),$(e.content).find("game").each(function(a,t){e.allData.push(e.rewritedata(t)),e.allData[a].gameName?e.gameNameShow="Y":e.gameNameShow="N"}),console.log(e.allData,11111)),"B"==e.dataType&&alert("B")},error:function(){requestMsg("哎呀，出错了！")}})},gameNameClick:function(){for(var e=this,a=[],t=0;t<e.allData.length;t++)e.allData[t].gameName&&a.push({value:t,text:e.allData[t].gameName});var n=new mui.PopPicker({layer:1});n.setData(a),n.pickers[0].setSelectedIndex(0),n.show(function(a){var t=a[0].text;$(".gameName:first-child span").html(t),$(".gameName:first-child span").css("color","#232323"),e.fixCont=e.allData[a[0].value],console.log(e.fixCont),n.dispose()})},gameAreaClick:function(){var e=this;e.fixCont.areaslen&&(1==e.fixCont.areaslen&&gameAreaOne(e.fixCont.areasList),e.fixCont.areaslen>=2&&gameAreaTwo(e.fixCont.areasList))},fixStrToNum:function(e){return parseInt(e)}}});
//# sourceMappingURL=../../_srcmap/activity/11/gamePay.js.map
