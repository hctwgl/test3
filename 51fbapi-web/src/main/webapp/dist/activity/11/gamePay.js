"use strict";function gameAreaTwo(e){var a=new mui.PopPicker({layer:2});a.setData(e),a.pickers[0].setSelectedIndex(0),a.pickers[1].setSelectedIndex(0),a.show(function(e){var t=e[0].text+"&nbsp"+e[1];$(".gameArea span").html(t),a.dispose()})}function gameAreaOne(e){var a=new mui.PopPicker({layer:1});a.setData(e),a.pickers[0].setSelectedIndex(0),a.show(function(e){var t=e[0];$(".gameArea span").html(t),a.dispose()})}var goodsId=getUrl("goodsId"),discout=getUrl("discout"),rebate=getUrl("rebate"),vm=new Vue({el:"#gamePay",data:{content:{},fixCont:{},dataType:"",allData:[],initChooseFirst:"",allDataLen:"",discout:discout,rebate:rebate},created:function(){this.logData()},methods:{rewritedata:function(e){var a=e,t=Object.create(null),i=function(e,a,t){return t?$(e).find(a).attr(t):$(e).find(a)},n=function(e,a){return $(e).attr(a)};(i(a,"game","name")||n(a,"name"))&&(t.gameName=i(a,"game","name")||n(a,"name"));var s=$(a).find("acctType").text();if(s?t.accountType=s:$(".gameNum").hide(),$(a).find("area")&&$(a).find("area").attr("name")){$(".gameArea").show();var o=i(a,"areas"),r=o.length;if(r&&r>=2&&(t.areasList=o.map(function(e,a){var t=i(a,"area"),s=[];return t.length&&t.each(function(e,a){s.push(n(a,"name"))}),{text:n(a,"name"),children:s}}),t.areasList=Array.prototype.slice.call(t.areasList),t.areaslen=r),r&&1==r){var l=$(a).find("area").length,c=[];l&&$(a).find("area").each(function(){c.push($(this).attr("name"))}),t.areasList=c,t.areaslen=r}}var d=[];i(a,"type","name")?($(a).find("type").each(function(){d.push($(this).attr("name"))}),t.typeNameList=d):i(a,"types","name")?($(a).find("types").each(function(){d.push($(this).attr("name"))}),t.typeNameList=d):$(".gameType").hide();var m=[],h=[];h=$(a).find("type").children("quantity").text().split(",");var p=[];p=$(a).find("type").children("chargeNum").text().split(",");for(var f=0;f<h.length;f++){var g={quantity:h[f],chargeNum:p[f]};m.push(g)}return t.priceTypeList=m,t.priceTimes=$(a).find("type").children("quantity").attr("priceTimes"),$(a).find("type").children("chargeNum").attr("name")?t.chargeNumName=$(a).find("type").children("chargeNum").attr("name"):t.chargeNumName="",t},fixDataB:function(e){},logData:function(){var e=this;$.ajax({type:"post",url:"/game/pay/goodsInfo",data:{goodsId:goodsId},success:function(a){if(e.content=a.data.content,e.dataType=a.data.xmlType,console.log(e.content),"A"==e.dataType){if($(e.content).find("game").each(function(a,t){e.allData.push(e.rewritedata(t))}),console.log(e.allData,"全部数据"),console.log(e.allData.length,"全部数据长度"),e.initChooseFirst=e.allData[0],e.initChooseFirst.areasList)for(var t=0;t<e.initChooseFirst.areasList.length;t++)e.initChooseFirst.areasList[0].text?e.initChooseFirst.initArea=e.initChooseFirst.areasList[0].text+" "+e.initChooseFirst.areasList[0].children[0]:e.initChooseFirst.initArea=e.initChooseFirst.areasList[0];console.log(e.allData[0],"默认显示第一个数据"),e.allDataLen=e.allData.length,1==e.allDataLen&&(e.fixCont=e.allData[0]),e.$nextTick(function(){$(".typeList li").eq(0).addClass("changeColor01"),$(".typeList li").eq(0).find("p").addClass("changeColor02"),$(".moneyList li").eq(0).addClass("changeColor01"),$(".moneyList li").eq(0).find("p").addClass("changeColor02"),$(".payMoney span").html($(".moneyList li").eq(0).find(".typePrice").html()),$(".fanMoney span").html(($(".moneyList li").eq(0).find("i").html()*rebate).toFixed(2)+"元")})}"B"==e.dataType&&alert("B")},error:function(){requestMsg("哎呀，出错了！")}})},gameNameClick:function(){for(var e=this,a=[],t=0;t<e.allData.length;t++)e.allData[t].gameName&&a.push({value:t,text:e.allData[t].gameName});var i=new mui.PopPicker({layer:1});i.setData(a),i.pickers[0].setSelectedIndex(0),i.show(function(a){var t=a[0].text;$(".gameName:first-child span").html(t),$(".gameName:first-child span").css("color","#232323"),e.fixCont=e.allData[a[0].value],console.log(e.fixCont),i.dispose()})},gameAreaClick:function(){var e=this;console.log(e.fixCont,222),e.fixCont.areaslen&&(1==e.fixCont.areaslen&&gameAreaOne(e.fixCont.areasList),e.fixCont.areaslen>=2&&gameAreaTwo(e.fixCont.areasList))},gameTypeClick:function(e){$(".typeList li").eq(e).addClass("changeColor01"),$(".typeList li").eq(e).find("p").addClass("changeColor02"),$(".typeList li").eq(e).siblings().removeClass("changeColor01"),$(".typeList li").eq(e).siblings().find("p").removeClass("changeColor02")},gameMoneyClick:function(e){$(".moneyList li").eq(e).addClass("changeColor01"),$(".moneyList li").eq(e).find("p").addClass("changeColor02"),$(".moneyList li").eq(e).siblings().removeClass("changeColor01"),$(".moneyList li").eq(e).siblings().find("p").removeClass("changeColor02"),$(".payMoney span").html($(".moneyList li").eq(e).find(".typePrice").html()),$(".fanMoney span").html(($(".moneyList li").eq(e).find("i").html()*rebate).toFixed(2)+"元")},fixStrToNum:function(e){return parseInt(e)}}});
//# sourceMappingURL=../../_srcmap/activity/11/gamePay.js.map
