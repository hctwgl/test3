"use strict";function formatDateTime(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var a=e.getDate();return a=a<10?"0"+a:a,t+r+a+e.getHours()+e.getMinutes()+e.getSeconds()}function getUrlParam(e){var t=new Object;if(-1!=e.indexOf("?")){var r=e.substr(e.indexOf("?")+1,e.length),a=[];a=r.split("&");for(var s=0;s<a.length;s++)t[a[s].split("=")[0]]=unescape(a[s].split("=")[1])}return t}var token=formatDateTime()+Math.random().toString(36).substr(2);$(function(){function e(){i--,i<=0?($(".btn").text("获取验证码"),clearInterval(t),i=60,$(".btn").attr("isState",0)):$(".btn").text(i+" s")}var t,r=window.location.href,a=getUrlParam(r),s=(a.urlName,a.typeFrom),o=a.typeFromNum,i=60;$(".btn").click(function(){var e=$(".phoneNumber-right").val();!isNaN(e)&&/^1(3|4|5|6|7|8|9)\d{9}$/i.test(e)?$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:e},success:function(e){console.log(e),$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){requestMsg("请求失败")}}):requestMsg("请填写正确的手机号")}),$("#imgVftCodeRefresh").click(function(){var e=$(".phoneNumber-right").val();$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:e},success:function(e){console.log(e),$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){requestMsg("请求失败")}})}),$("#imgVftCodeSbumit").click(function(){var r=$(".phoneNumber-right").val(),a=/^1[3|4|5|6|7|8|9][0-9]\d{4,8}$/.test(r),s=$(".btn").attr("isState"),o=$("#imgVftCode").val();0!=s&&s||(a?$.ajax({url:"/H5GGShare/boluomeActivityForgetPwd",type:"POST",dataType:"JSON",data:{mobile:r,token:token,verifyImgCode:o,bsqToken:token},success:function(r){console.log(r),r.success?($(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide"),$(".btn").attr("isState",1),$(".btn").text(i+" s"),t=setInterval(e,1e3)):requestMsg(r.msg)},error:function(){requestMsg("请求失败")}}):requestMsg("请填写正确的手机号"),localStorage.setItem("user",r),console.log(r))}),$(".nextStep").click(function(){var e=$(".mesg-right").val(),t=$(".phoneNumber-right").val();$.ajax({url:"/H5GGShare/boluomeActivityCheckVerifyCode",type:"POST",dataType:"JSON",data:{mobile:t,verifyCode:e,token:token,typeFrom:s,typeFromNum:o,bsqToken:token},success:function(t){if("ForgetPwd"==t.url&&requestMsg(t.msg),console.log(t),!t.success)return requestMsg(t.msg),!1;localStorage.setItem("mesg",e),window.location.href="ggFixShareForget?typeFrom="+s+"&typeFromNum="+o},error:function(){requestMsg("请求失败")}})})});
//# sourceMappingURL=../../_srcmap/activity/11/ggFixShareVerify.js.map
