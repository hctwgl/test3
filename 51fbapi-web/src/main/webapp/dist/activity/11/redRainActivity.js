"use strict";var couponArr=[],sendAjax=!0,ward=[parseInt(5*Math.random()+1),parseInt(5*Math.random()+6),parseInt(5*Math.random()+11)],touch=0;$.ajax({url:"/fanbei-web/postMaidianInfo",type:"post",data:{maidianInfo:"/fanbei-web/activity/redRainActivity?type=pv"},success:function(t){console.log(t)}}),$(document).ready(function(){var t=parseInt($(".content").css("width"))-70,n=function n(){var a=(parseInt(2*Math.random()+1),parseInt(60*Math.random()+50)),e=parseInt(Math.random()*t),s=parseInt(90*Math.random()-45)+"deg";o++,$(".content").append("<li class='li"+o+"' ></li>"),$(".li"+o).css({left:e}),$(".li"+o).css({width:a-30,height:a,transform:"rotate("+s+")",background:"url(https://f.51fanbei.com/h5/app/activity/11/redRain1.png) no-repeat center center","background-size":"100%","-ms-transform":"rotate("+s+")","-moz-transform":"rotate("+s+")","-webkit-transform":"rotate("+s+")","-o-transform":"rotate("+s+")"}),$(".li"+o).animate({top:$(window).height()+20},4e3,function(){this.remove()}),$(".li"+o).one("touchstart",function(){touch++;var t=this;if(ward.indexOf(touch)>=0&&couponArr.length<3&&sendAjax){sendAjax=!1;var n=(new Date).getTime();$.ajax({url:"/fanbei-web/redRain/applyHit?time="+n,type:"post",success:function(n){sendAjax=!0,n=JSON.parse(n),console.log(n),n.success?(couponArr.push(n.data),$(t).html('<div style="transform: none;color:white;font-size: .16rem;position: absolute;right:-.1rem;top:0rem;">+1</div>'),t.style.backgroundImage="url(https://f.51fanbei.com/h5/app/activity/11/redRain4.png)",i+=1,$(".noWard").hide(),$(".ward").show(),$(".redNum span:nth-child(2)").text("中红包数量："+i)):t.style.backgroundImage="url(https://f.51fanbei.com/h5/app/activity/11/redRain3.png)"},error:function(){t.style.backgroundImage="url(https://f.51fanbei.com/h5/app/activity/11/redRain3.png)"}})}else t.style.backgroundImage="url(https://f.51fanbei.com/h5/app/activity/11/redRain3.png)"}),r>0&&setTimeout(n,300)},a=function t(){if(--r>0)$(".redNum span:nth-child(1)").text(r),setTimeout(t,1e3);else{$(".redNum span:nth-child(1)").text(0);for(var n="",a=0;a<couponArr.length;a++)n+='   <div class="wardCoupon">\n                        <span class="wardMoney">\n                            <span>￥</span>'+couponArr[a].amount+'\n                        </span>\n                         <div class="wardMsg">\n                                <p>全场通用</p><p>满'+couponArr[a].couponLimitAmount+'元可用</p>\n                         </div>\n                         <span class="wardTxt">有效期：'+couponArr[a].couponEffectiveTime+" 不可叠加使用</span>\n\n                </div>";$(".wardContent").html(n),$(".gameWard").show()}},e=6,r=21;!function t(){e--,e>0?($(".backward span").css({background:"url(https://f.51fanbei.com/h5/app/activity/11/num"+e+".png) no-repeat center","background-size":"100%"}),setTimeout(t,1e3)):($(".backward").remove(),a())}();var o=0,i=0;setTimeout(n,5e3)});
//# sourceMappingURL=../../_srcmap/activity/11/redRainActivity.js.map
