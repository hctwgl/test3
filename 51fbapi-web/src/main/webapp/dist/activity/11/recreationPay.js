"use strict";var goodsId=getUrl("goodsId"),discout=getUrl("discout"),rebate=getUrl("rebate"),vm=new Vue({el:"#recreationPay",data:{content:{},fixCont:{},dataType:"",allData:[],initChooseFirst:"",allDataLen:"",discout:discout,rebate:rebate,liIndex:""},created:function(){this.logData()},methods:{rewritedata:function(e){var a=e,t=Object.create(null),i=function(e,a,t){return t?$(e).find(a).attr(t):$(e).find(a)},n=function(e,a){return $(e).attr(a)};(i(a,"game","name")||n(a,"name"))&&(t.gameName=i(a,"game","name")||n(a,"name"));var o=$(a).find("acctType").text();o?t.accountType=o:$(".gameNum").hide();var l=[];i(a,"type","name")?($(a).find("type").each(function(){l.push($(this).attr("name"))}),t.typeNameList=l):i(a,"types","name")?($(a).find("types").each(function(){l.push($(this).attr("name"))}),t.typeNameList=l):$(".gameType").hide();var s=[],r=[];r=$(a).find("type").children("quantity").text().split(",");var m=[];m=$(a).find("type").children("chargeNum").text().split(",");for(var c=0;c<r.length;c++){var d={quantity:r[c],chargeNum:m[c]};s.push(d)}return t.priceTypeList=s,t.priceTimes=$(a).find("type").children("quantity").attr("priceTimes"),$(a).find("type").children("chargeNum").attr("name")?t.chargeNumName=$(a).find("type").children("chargeNum").attr("name"):t.chargeNumName="",t},logData:function(){var e=this;$.ajax({type:"post",url:"/game/pay/goodsInfo",data:{goodsId:goodsId},success:function(a){e.content=a.data.content,e.dataType=a.data.xmlType,console.log(e.content),$(e.content).find("game").each(function(a,t){e.allData.push(e.rewritedata(t))}),console.log(e.allData,"全部数据"),console.log(e.allData.length,"全部数据长度"),e.initChooseFirst=e.allData[0],console.log(e.allData[0],"默认显示第一个数据"),e.liIndex=0,e.allDataLen=e.allData.length,1==e.allDataLen&&(e.fixCont=e.allData[0]),e.$nextTick(function(){$(".gamePass input").attr("placeholder","请输入"+e.initChooseFirst.accountType),$(".typeList li").eq(0).addClass("changeColor01"),$(".typeList li").eq(0).find("p").addClass("changeColor02"),$(".moneyList li").eq(0).addClass("changeColor01"),$(".moneyList li").eq(0).find("p").addClass("changeColor02"),$(".payMoney span").html($(".moneyList li").eq(0).find(".typePrice").html()),$(".fanMoney span").html(($(".moneyList li").eq(0).find(".pricePay").html()*rebate).toFixed(2)+"元")})},error:function(){requestMsg("哎呀，出错了！")}})},gameNameClick:function(){for(var e=this,a=[],t=0;t<e.allData.length;t++)e.allData[t].gameName&&a.push({value:t,text:e.allData[t].gameName});var i=new mui.PopPicker({layer:1});i.setData(a),i.pickers[0].setSelectedIndex(0),i.show(function(a){var t=a[0].text;$(".gameName:first-child span").html(t),e.fixCont=e.allData[a[0].value],console.log(e.fixCont),i.dispose()})},gameTypeClick:function(e){$(".typeList li").eq(e).addClass("changeColor01"),$(".typeList li").eq(e).find("p").addClass("changeColor02"),$(".typeList li").eq(e).siblings().removeClass("changeColor01"),$(".typeList li").eq(e).siblings().find("p").removeClass("changeColor02")},gameMoneyClick:function(e){var a=this;$(".moneyList li").eq(e).addClass("changeColor01"),$(".moneyList li").eq(e).find("p").addClass("changeColor02"),$(".moneyList li").eq(e).siblings().removeClass("changeColor01"),$(".moneyList li").eq(e).siblings().find("p").removeClass("changeColor02"),$(".payMoney span").html($(".moneyList li").eq(e).find(".pricePay").html()+"元"),$(".fanMoney span").html(($(".moneyList li").eq(e).find(".pricePay").html()*rebate).toFixed(2)+"元"),a.liIndex=e},sureClick:function(){var e=this;e.fixCont.priceTypeList?(e.fixCont.priceTypeList[e.liIndex].quantity,e.fixCont.priceTimes):(e.initChooseFirst.priceTypeList[e.liIndex].quantity,e.initChooseFirst.priceTimes);var a=void 0,t=void 0,i=void 0,n=void 0,o=void 0,l=void 0,s=void 0,r=void 0;l=$(".gameName").hasClass("needGameNum")?$(".needGameNum input").val():"",s=$(".gameName").hasClass("gameArea")?$(".gameArea span").html():"",r=$(".payType").hasClass("gameType")?$(".typeList .changeColor02").html():"","A"==e.dataType&&(a=$(".gameName:first-child").find("span").html(),t=$(".gamePass p").html(),i=$(".gamePass input").val(),n=$(".changeColor01 .goodsNum").html(),o=$(".changeColor01 .pricePay").html()),"B"==e.dataType&&(a=$(".gameName:first-child").find("span").html(),t=$(".gamePass p").html(),i=$(".gamePass input").val(),n=$(".changeColor01 .goodsNum").html(),o=$(".changeColor01 .pricePay").html()),$.ajax({type:"post",url:"/game/pay/order",data:{goodsId:goodsId,gameName:a,acctType:t,userName:i,goodsNum:n,actualAmount:o,gameAcct:l,gameArea:s,gameType:r},success:function(e){console.log(e,"确认充值");var a=e.data.orderNo,t=e.data.plantform;window.location.href="gameOrderDetail?orderNo="+a+"&plantform="+t},error:function(){requestMsg("哎呀，出错了！")}})},fixStrToNum:function(e){return parseInt(e)},fixNum:function(e){return e.toFixed(2)}}});
//# sourceMappingURL=../../_srcmap/activity/11/recreationPay.js.map
