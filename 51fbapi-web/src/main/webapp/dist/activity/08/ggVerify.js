"use strict";function formatDateTime(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();return r=r<10?"0"+r:r,t+a+r+e.getHours()+e.getMinutes()+e.getSeconds()}function getUrlParam(e){var t=new Object;if(-1!=e.indexOf("?")){var a=e.substr(e.indexOf("?")+1,e.length),r=[];r=a.split("&");for(var s=0;s<r.length;s++)t[r[s].split("=")[0]]=unescape(r[s].split("=")[1])}return t}var token=formatDateTime()+Math.random().toString(36).substr(2),_fmOpt;!function(){_fmOpt={partner:"alading",appName:"alading_web",token:token};var e=new Image(1,1);e.onload=function(){_fmOpt.imgLoaded=!0},e.src=("https:"==document.location.protocol?"https://":"http://")+"fp.fraudmetrix.cn/fp/clear.png?partnerCode=alading&appName=alading_web&tokenId="+_fmOpt.token;var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://":"http://")+"static.fraudmetrix.cn/fm.js?ver=0.1&t="+((new Date).getTime()/36e5).toFixed(0);var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}(),$(function(){function e(){c--,c<=0?($(".btn").text("获取验证码"),clearInterval(t),c=60,$(".btn").attr("isState",0)):$(".btn").text(c+" s")}var t,a=window.location.href,r=getUrlParam(a),s=r.word,o=r.urlName,i=(r.userName,r.activityId),n=r.userItemsId,d=r.itemsId,c=60;$(".btn").click(function(){var e=$(".phoneNumber-right").val();!isNaN(e)&&/^1(3|4|5|7|8)\d{9}$/i.test(e)?$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:e},success:function(e){console.log(e),$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){requestMsg("请求失败")}}):requestMsg("请填写正确的手机号")}),$("#imgVftCodeRefresh").click(function(){var e=$(".phoneNumber-right").val();$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:e},success:function(e){console.log(e),$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){requestMsg("请求失败")}})}),$("#imgVftCodeSbumit").click(function(){var a=$(".phoneNumber-right").val(),r=/^1[3|4|5|7|8][0-9]\d{4,8}$/.test(a),s=$(".btn").attr("isState"),o=$("#imgVftCode").val();0!=s&&s||(r?$.ajax({url:"/H5GGShare/boluomeActivityForgetPwd",type:"POST",dataType:"JSON",data:{mobile:a,token:token,verifyImgCode:o},success:function(a){console.log(a),a.success?($(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide"),$(".btn").attr("isState",1),$(".btn").text(c+" s"),t=setInterval(e,1e3)):requestMsg(a.msg)},error:function(){requestMsg("请求失败")}}):requestMsg("请填写正确的手机号"),localStorage.setItem("user",a),console.log(a))}),$(".nextStep").click(function(){var e=$(".mesg-right").val(),t=$(".phoneNumber-right").val();$.ajax({url:"/H5GGShare/boluomeActivityCheckVerifyCode",type:"POST",dataType:"JSON",data:{mobile:t,verifyCode:e,token:token},success:function(a){if("ForgetPwd"==a.url&&requestMsg(a.msg),console.log(a),!a.success)return requestMsg(a.msg),!1;localStorage.setItem("mesg",e),window.location.href="ggForgetP?urlName="+o+"&userName="+t+"&activityId="+i+"&userItemsId="+n+"&itemsId="+d+"&word="+s},error:function(){requestMsg("请求失败")}})})});
//# sourceMappingURL=../../_srcmap/activity/08/ggVerify.js.map
