"use strict";function getData(i){for(var e=0;e<i;e++)$(".imgList .img:eq("+e+")").attr("data-slide-imgId",e);if(1==i)for(var e=0;e<i;e++)$(".imgList .img:eq("+e+")").addClass("img3");if(2==i)for(var e=0;e<i;e++)$(".imgList .img:eq("+e+")").addClass("img"+(e+3));if(3==i)for(var e=0;e<i;e++)$(".imgList .img:eq("+e+")").addClass("img"+(e+2));if(i>3&&i<6)for(var e=0;e<i;e++)$(".imgList .img:eq("+e+")").addClass("img"+(e+1));if(i>=6)for(var e=0;e<i;e++)e<5?$(".imgList .img:eq("+e+")").addClass("img"+(e+1)):$(".imgList .img:eq("+e+")").addClass("img5");hasTouchInit||k_touch(),imgClickFy()}function right(){for(var i=new Array,e=0;e<slideNub;e++)i[e]=$(".imgList .img[data-slide-imgId="+e+"]").attr("class");for(var e=0;e<slideNub;e++)0==e?$(".imgList .img[data-slide-imgId="+e+"]").attr("class",i[slideNub-1]):$(".imgList .img[data-slide-imgId="+e+"]").attr("class",i[e-1]);imgClickFy(),numClick03=$(".img.img3").attr("numClick"),$(".presentTitle span").eq(1).html($(".img.img3").attr("name")),changeButtonBg(numClick03)}function left(){for(var i=new Array,e=0;e<slideNub;e++)i[e]=$(".imgList .img[data-slide-imgId="+e+"]").attr("class");for(var e=0;e<slideNub;e++)e==slideNub-1?$(".imgList .img[data-slide-imgId="+e+"]").attr("class",i[0]):$(".imgList .img[data-slide-imgId="+e+"]").attr("class",i[e+1]);imgClickFy(),numClick03=$(".img.img3").attr("numClick"),$(".presentTitle span").eq(1).html($(".img.img3").attr("name")),changeButtonBg(numClick03)}function imgClickFy(){$(".imgList .img").removeAttr("onclick"),$(".imgList .img2").attr("onclick","left()"),$(".imgList .img4").attr("onclick","right()")}function k_touch(){function i(i){var e=i.targetTouches[0];s=e.pageX}function e(i){var e=i.targetTouches[0];a=s-e.pageX}function t(){a<-50?(left(),a=0):a>50&&(right(),a=0)}var s=0,a=0,r=document.getElementById("slide");r.addEventListener("touchstart",i,!1),r.addEventListener("touchmove",e,!1),r.addEventListener("touchend",t,!1),hasTouchInit=!0}function changeButtonBg(i){"Y"==$(".presentButton").attr("superPrize")?i<1?$(".surePresent").css("background","#B3B3B3"):$(".surePresent").css("background","#f2404d"):i<2?$(".surePresent").css("background","#B3B3B3"):$(".surePresent").css("background","#f2404d")}var userName="";getInfo().userName&&(userName=getInfo().userName);var slideNub,protocol=window.location.protocol,host=window.location.host,domainName=protocol+"//"+host,cardRid,activityId=getUrl("activityId"),name,itemsListRid,itemsId,userItemsList,numClick01,numClick02,numClick03,hasTouchInit=!1;$(function(){$(".presentButton").click(function(){$.ajax({type:"get",url:"/H5GG/sendItems",data:{activityId:activityId},success:function(i){if(console.log(i),i.data.loginUrl)location.href=i.data.loginUrl;else if("Y"==$(".presentButton").attr("present")){$("body").addClass("overflowChange"),$("html").addClass("overflowChange"),$(".imgList").empty(),$(".alertPresent").css("display","block"),$(".mask").css("display","block"),$(".presentTitle").css("display","block"),$(".surePresent").show(),$(".sureDemand").hide();var e=i.data.itemsList;userItemsList=i.data.userItemsList;var t="";if("Y"==$(".presentButton").attr("superPrize"))for(var s=0;s<e.length;s++)e[s].num>=1?t+='<div class="img" numClick="'+e[s].num+'" name="'+e[s].name+'" rid="'+e[s].rid+'"><img src="'+e[s].iconUrl+'"><img class="cardBlur" src="'+e[s].iconUrl+'"><p class="num">x'+e[s].num+"</p></div>":t+='<div class="img" numClick="'+e[s].num+'" name="'+e[s].name+'" rid="'+e[s].rid+'"><img class="garyCard" src="http://f.51fanbei.com/h5/app/activity/10/ggNewCard0'+e[s].rid+'.png"><img class="cardBlur" src="http://f.51fanbei.com/h5/app/activity/10/ggNewCard0'+e[s].rid+'.png"></div>';else for(var a=0;a<e.length;a++)e[a].num>=2?t+='<div class="img" numClick="'+e[a].num+'" name="'+e[a].name+'" rid="'+e[a].rid+'"><img src="'+e[a].iconUrl+'"><img class="cardBlur" src="'+e[a].iconUrl+'"><p class="num">x'+(e[a].num-1)+"</p></div>":t+='<div class="img" numClick="'+e[a].num+'" name="'+e[a].name+'" rid="'+e[a].rid+'"><img class="garyCard" src="http://f.51fanbei.com/h5/app/activity/10/ggNewCard0'+e[a].rid+'.png"><img class="cardBlur" src="http://f.51fanbei.com/h5/app/activity/10/ggNewCard0'+e[a].rid+'.png"></div>';$(".imgList").append(t),slideNub=$(".imgList .img").size(),getData(slideNub),console.log($(".img.img3").attr("name")),$(".presentTitle span").eq(1).html($(".img.img3").attr("name")),$(".img").click(function(){var i=$(this).index();$(".presentTitle span").eq(1).html($(".img").eq(i).attr("name")),numClick01=$(this).attr("numClick"),changeButtonBg(numClick01)})}else requestMsg("抱歉，你暂时没有可以赠送的卡片")},error:function(){requestMsg("请求失败")}})}),$(".surePresent").click(function(){var i=[];name=$(".img.img3").attr("name"),itemsListRid=$(".img.img3").attr("rid"),numClick02=$(".img.img3").attr("numClick");for(var e=0;e<userItemsList.length;e++)(itemsId=userItemsList[e].itemsId)==itemsListRid&&i.push(userItemsList[e].rid);cardRid=i[0];var t='{"shareAppTitle":"全民集卡片 领取51元大奖","shareAppContent":"你的好友赠送了一张'+name+'卡给你，助你赢得51元大奖，速来领走吧~","shareAppImage":"http://f.51fanbei.com/h5/app/activity/08/gg31.png","shareAppUrl":"'+domainName+"/fanbei-web/activity/ggpresents?loginSource=Z&userName="+userName+"&activityId="+activityId+"&userItemsId="+cardRid+"&sharePage=ggpresents_userItemsId_"+cardRid+'","shareCodeUrl":"'+domainName+"/H5GGShare/submitShareCode?userItemsId="+cardRid+"&shareAppUrl="+domainName+"/fanbei-web/activity/ggpresents?loginSource=Z_userName="+userName+"_activityId="+activityId+"_userItemsId="+cardRid+'","isSubmit":"Y","sharePage":"ggpresents_userItemsId_'+cardRid+'"}',s=BASE64.encoder(t);"Y"==$(".presentButton").attr("superPrize")?numClick02>=1&&(window.location.href="/fanbei-web/opennative?name=APP_SHARE&params="+s):numClick02>=2&&(window.location.href="/fanbei-web/opennative?name=APP_SHARE&params="+s)}),$(".mask").click(function(){$("body").removeClass("overflowChange"),$("html").removeClass("overflowChange"),$(".surePresent").css("background","#f2404d")}),$(".closeAlert").click(function(){$("body").removeClass("overflowChange"),$("html").removeClass("overflowChange"),$(".surePresent").css("background","#f2404d")})});
//# sourceMappingURL=../../_srcmap/activity/08/ggIndexPresent.js.map
