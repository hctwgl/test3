"use strict";function getData(e){for(var t=0;t<e;t++)$(".imgList .img:eq("+t+")").attr("data-slide-imgId",t);if(1==e)for(var t=0;t<e;t++)$(".imgList .img:eq("+t+")").addClass("img3");if(2==e)for(var t=0;t<e;t++)$(".imgList .img:eq("+t+")").addClass("img"+(t+3));if(3==e)for(var t=0;t<e;t++)$(".imgList .img:eq("+t+")").addClass("img"+(t+2));if(e>3&&e<6)for(var t=0;t<e;t++)$(".imgList .img:eq("+t+")").addClass("img"+(t+1));if(e>=6)for(var t=0;t<e;t++)t<5?$(".imgList .img:eq("+t+")").addClass("img"+(t+1)):$(".imgList .img:eq("+t+")").addClass("img5");touch&&k_touch(),imgClickFy()}function right(){for(var e=new Array,t=0;t<slideNub;t++)e[t]=$(".imgList .img[data-slide-imgId="+t+"]").attr("class");for(var t=0;t<slideNub;t++)0==t?$(".imgList .img[data-slide-imgId="+t+"]").attr("class",e[slideNub-1]):$(".imgList .img[data-slide-imgId="+t+"]").attr("class",e[t-1]);imgClickFy()}function left(){for(var e=new Array,t=0;t<slideNub;t++)e[t]=$(".imgList .img[data-slide-imgId="+t+"]").attr("class");for(var t=0;t<slideNub;t++)t==slideNub-1?$(".imgList .img[data-slide-imgId="+t+"]").attr("class",e[0]):$(".imgList .img[data-slide-imgId="+t+"]").attr("class",e[t+1]);imgClickFy()}function imgClickFy(){$(".imgList .img").removeAttr("onclick"),$(".imgList .img2").attr("onclick","left()"),$(".imgList .img4").attr("onclick","right()")}function k_touch(){function e(e){var t=e.targetTouches[0];a=t.pageX}function t(e){var t=e.targetTouches[0];s=a-t.pageX}function i(e){s<-100?(left(),s=0):s>100&&(right(),s=0)}var a=0,s=0,r=document.getElementById("slide");r.addEventListener("touchstart",e,!1),r.addEventListener("touchmove",t,!1),r.addEventListener("touchend",i,!1)}function alaShareData(){var e={appLogin:"Y",type:"share",shareAppTitle:"消费有返利 领取51元现金红包！",shareAppContent:"你的好友赠送了一张"+name+"卡片给你，快领走吧~",shareAppImage:"https://fs.51fanbei.com/h5/common/icon/midyearCorner.png",shareAppUrl:domainName+"/fanbei-web/activity/ggpresents?loginSource=Z&userName="+userName+"&activityId="+activityId+"&userItemsId="+cardRid,isSubmit:"Y",sharePage:"ggpresents"};return JSON.stringify(e)}var userName="";getInfo().userName&&(userName=getInfo().userName);var touch=!0,slideNub,protocol=window.location.protocol,host=window.location.host,domainName=protocol+"//"+host,cardRid,activityId=getUrl("activityId"),name,itemsListRid,itemsId,userItemsList;$(function(){$(".presentCard").click(function(){$.ajax({type:"get",url:"/H5GG/sendItems",data:{activityId:activityId},success:function success(returnData){var returnData=eval("("+returnData+")");if(console.log(returnData),returnData.data.loginUrl)location.href=returnData.data.loginUrl;else if("Y"==$(".presentCard").attr("present")){$("body").addClass("overflowChange"),$("html").addClass("overflowChange"),$(".imgList").empty(),$(".alertPresent").css("display","block"),$(".mask").css("display","block"),$(".presentTitle").css("display","block"),$(".surePresent").show(),$(".sureDemand").hide();var presentCardList=returnData.data.itemsList;userItemsList=returnData.data.userItemsList;for(var str="",j=0;j<presentCardList.length;j++)presentCardList[j].num>=2?str+='<div class="img" name="'+presentCardList[j].name+'" rid="'+presentCardList[j].rid+'"><img src="'+presentCardList[j].iconUrl+'"><p class="num">'+(presentCardList[j].num-1)+"</p></div>":0==presentCardList[j].num?str+='<div class="img" name="'+presentCardList[j].name+'" rid="'+presentCardList[j].rid+'"><img class="gray" src="http://f.51fanbei.com/h5/app/activity/08/gg000'+presentCardList[j].rid+'.png"></div>':str+='<div class="img" name="'+presentCardList[j].name+'" rid="'+presentCardList[j].rid+'"><img src="'+presentCardList[j].iconUrl+'"><p class="cardMask"></p></div>';$(".imgList").append(str),slideNub=$(".imgList .img").size(),getData(slideNub),$(".presentTitle span").eq(1).html($(".img.img3").attr("name")),$(".img").click(function(){var e=$(this).index();$(".presentTitle span").eq(1).html($(".img").eq(e).attr("name"))})}else requestMsg("抱歉，你暂时没有可以赠送的卡片")},error:function(){requestMsg("请求失败")}})}),$(".surePresent").click(function(){var arr=[];name=$(".img.img3").attr("name"),itemsListRid=$(".img.img3").attr("rid");for(var i=0;i<userItemsList.length;i++)(itemsId=userItemsList[i].itemsId)==itemsListRid&&arr.push(userItemsList[i].rid);cardRid=arr[0],cardRid&&""!=cardRid?$.ajax({type:"get",url:"/H5GG/doSendItems",data:{userItemsId:cardRid},success:function success(returnData){var returnData=eval("("+returnData+")");returnData.success&&(window.location.href='/fanbei-web/opennative?name=APP_SHARE&params={"shareAppTitle":"消费有返利 领取51元现金红包！","shareAppContent":"你的好友赠送了一张'+name+'卡片给你，快领走吧~","shareAppImage":"https://fs.51fanbei.com/h5/common/icon/midyearCorner.png","shareAppUrl":"'+domainName+"/fanbei-web/activity/ggpresents?loginSource=Z&userName="+userName+"&activityId="+activityId+"&userItemsId="+cardRid+'","isSubmit":"Y","sharePage":"ggpresents"}')},error:function(){requestMsg("请求失败")}}):window.location.href="ggIndex"}),$(".close").click(function(){$("body").removeClass("overflowChange"),$("html").removeClass("overflowChange")}),$(".mask").click(function(){$("body").removeClass("overflowChange"),$("html").removeClass("overflowChange")})});
//# sourceMappingURL=../../_srcmap/activity/08/ggIndexPresent.js.map
