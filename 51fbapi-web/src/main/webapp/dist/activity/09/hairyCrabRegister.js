"use strict";function formatDateTime(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var s=e.getDate();return s=s<10?"0"+s:s,t+a+s+e.getHours()+e.getMinutes()+e.getSeconds()}function timeFunction(){timerS--,timerS<=0?($("#codeBtn").removeAttr("disabled"),$("#codeBtn").text("获取验证码"),clearInterval(timerInterval),timerS=60):$("#codeBtn").text(timerS+" s")}var channelCode=getUrl("channelCode"),pointCode=getUrl("pointCode"),recommendCode=getUrl("recommendCode"),token=formatDateTime()+Math.random().toString(36).substr(2),timerInterval,timerS=60,vm=new Vue({el:"#hairyCrabRegister",data:{alertShow:""},methods:{getImgCode:function(){var e=$("#tel").val();!isNaN(e)&&/^1(3|4|5|6|7|8|9)\d{9}$/i.test(e)?$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:e},success:function(e){$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCode").val(""),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){requestMsg("请求失败")}}):requestMsg("请填写正确的手机号")},getImgCodeRefresh:function(){var e=$("#tel").val();$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:e},success:function(e){$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){requestMsg("请求失败")}})},getCode:function(){var e=($(this).attr("isState"),$("#tel").val()),t=$("#imgVftCode").val();!isNaN(e)&&/^1(3|4|5|6|7|8|9)\d{9}$/i.test(e)?($("#codeBtn").attr("disabled",!0),$.ajax({url:"/app/user/getRegisterSmsCode",type:"POST",dataType:"JSON",data:{mobile:e,token:token,verifyImgCode:t,channelCode:channelCode,pointCode:pointCode,bsqToken:token},success:function(e){e.success?($(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide"),$("#codeBtn").attr("isState",1),$("#codeBtn").text(timerS+" s"),timerInterval=setInterval(timeFunction,1e3)):(requestMsg(e.msg),$("#codeBtn").removeAttr("disabled"))},error:function(){requestMsg("请求失败")}})):requestMsg("请填写正确的手机号")},goRegister:function(){var e=this,t=$("#password").val().length,a=String(CryptoJS.MD5($("#password").val())),s=/^((?=.*?\d)(?=.*?[A-Za-z])|(?=.*?\d)(?=.*?[.!@#$%])|(?=.*?[A-Za-z])(?=.*?[.]))[\dA-Za-z.!@#$%]+$/.test($("#password").val()),r=$("#tel").val(),o=$("#VerifiCode").val();$("#register_codeBtn").attr("isState");/^1(3|4|5|6|7|8|9)\d{9}$/i.test(r)&&""!=r?""!=o?s&&6<=t&&t<=18?$("#inputCheck").is(":checked")?1==$("#codeBtn").attr("isState")?$.ajax({url:"/app/user/commitChannelRegister",type:"POST",dataType:"JSON",data:{registerMobile:r,smsCode:o,password:a,recommendCode:recommendCode,token:token,channelCode:channelCode,pointCode:pointCode,bsqToken:token},success:function(t){console.log(t),t.success?($("#register_submitBtn").attr("disabled",!0),e.alertShow="Y",$(".goNow").click(function(){window.location.href=t.url})):requestMsg(t.msg)},error:function(){requestMsg("注册失败")}}):requestMsg("请获取验证码"):requestMsg("请阅读并同意《51返呗用户注册协议》"):requestMsg("请填写6-18位的数字、字母、字符组成的密码"):requestMsg("请输入正确的验证码"):requestMsg("请填写正确的手机号")},closeAlert:function(){this.alertShow=""}}});
//# sourceMappingURL=../../_srcmap/activity/09/hairyCrabRegister.js.map
