"use strict";function formatDateTime(){var e=new Date,t=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var a=e.getDate();return a=a<10?"0"+a:a,t+s+a+e.getHours()+e.getMinutes()+e.getSeconds()}function getUrlParam(e){var t=new Object;if(-1!=e.indexOf("?")){var s=e.substr(e.indexOf("?")+1,e.length),a=[];a=s.split("&");for(var o=0;o<a.length;o++)t[a[o].split("=")[0]]=unescape(a[o].split("=")[1])}return t}var token=formatDateTime()+Math.random().toString(36).substr(2);$(function(){function e(){r--,r<=0?($(".checkbtn").text("获取验证码"),clearInterval(t),r=60,$(".checkbtn").attr("isState",0)):$(".checkbtn").text(r+" s")}var t,s=window.location.href,a=getUrlParam(s),o=a.urlName,i=a.activityId,r=60,n=a.typeFrom,c=a.typeFromNum;$(".yhicon").click(function(){$(".yhinp").val(""),$(".yhicon").css("display","none")}),$(".yhinp").keyup(function(){""==$(".yhinp").val()?$(".yhicon").css("display","none"):$(".yhicon").css("display","block")}),$(".big-one").click(function(){$("#mobile").val("")}),$(".big-two").click(function(){$("#password").val("")}),$(".checkbtn").click(function(){var e=$(".mobile").val();!isNaN(e)&&/^1(3|4|5|6|7|8|9)\d{9}$/i.test(e)?$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:e},success:function(e){console.log(e),$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){requestMsg("请求失败")}}):requestMsg("请填写正确的手机号")}),$("#imgVftCodeRefresh").click(function(){var e=$(".mobile").val();$.ajax({url:"/app/user/getImgCode",type:"POST",dataType:"JSON",data:{mobile:e},success:function(e){console.log(e),$(".registerMask").removeClass("hide"),$(".imgVftCodeWrap").removeClass("hide"),$("#imgVftCodeWrapImg").attr("src","data:image/png;base64,"+e.data),$("#imgVftCodeClose").click(function(){$(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide")})},error:function(){requestMsg("请求失败")}})}),$("#imgVftCodeSbumit").click(function(){var s=$(".checkbtn").attr("isState"),a=$(".mobile").val(),o=($("#password").val(),$("#imgVftCode").val());if(0==s||!s){var i=/^1[3|4|5|6|7|8|9][0-9]\d{4,8}$/.test(a);i?$.ajax({url:"/app/user/getRegisterSmsCode",type:"POST",dataType:"json",data:{mobile:a,token:token,verifyImgCode:o,bsqToken:token},success:function(s){s.success?($(".registerMask").addClass("hide"),$(".imgVftCodeWrap").addClass("hide"),$(".checkbtn").attr("isState",1),$(".checkbtn").text(r+" s"),t=setInterval(e,1e3)):requestMsg(s.msg)},error:function(){requestMsg("请求失败")}}):(console.log(i),requestMsg("请填写正确的手机号"))}}),$(".loginbtn").click(function(){var e=$(".check").val(),t=$(".mobile").val(),s=$("#password").val(),a=$("#yzcheck").val(),r=/^1[3|4|5|6|7|8|9][0-9]{9}$/.test(t),l=/^\d{6}$/.test(a),g=/^(?![^a-zA-Z]+$)(?!\\D+$).{6,18}$/.test(s),d=String(CryptoJS.MD5(s));console.log(t),r&&l&&""!=a&&g&&void 0!=s?$.ajax({url:"/H5GGShare/boluomeActivityRegisterLogin",type:"post",data:{registerMobile:t,smsCode:e,password:d,token:token,bsqToken:token,activityId:i,typeFrom:n,typeFromNum:c},success:function(e){console.log(0),console.log(e);var t=JSON.parse(e);t.success?(requestMsg("注册成功"),window.location.href=o+"?activityId="+i+"&typeFrom="+n+"&typeFromNum="+c):requestMsg(t.msg)},error:function(){requestMsg("绑定失败")}}):r?l?requestMsg("请填写6-18位的数字、字母、字符组成的密码"):requestMsg("请填写正确的验证码"):requestMsg("请填写正确的手机号")}),$(".goLogin").click(function(){window.location.href="ggADLogin?activityId="+i+"&urlName="+o+"&typeFrom="+n+"&typeFromNum="+c})});
//# sourceMappingURL=../../_srcmap/activity/10/ggADRegister.js.map
